<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Class: ActiveResource::Base</title><link type="text/css" href="../.././rdoc-style.css" media="screen" rel="stylesheet"/><script type="text/javascript">
// Allison template
// Copyright 2007, 2008 Cloudburst, LLC. Licensed under the AFL 3. See the included LICENSE file.

var href_base = '../.././rdoc-style.css'.replace(/(.*\/).*/, '$1'); // inline js is good for something  

function $(id) {
    if (document.getElementById)
      elem = document.getElementById(id);
    else if ( document.all )
      elem = eval("document.all." + id);
    else
      return false;
    return elem;
}

  function toggle(id) {
    elem = $(id);
    elemStyle = elem.style;   
    if (elemStyle.display == "block") {
      elemStyle.display = "none"
    } else {
      elemStyle.display = "block"
    }
    return true;
  }

  function toggleText(id) {
    elem = $(id)
    if (m = elem.innerHTML.match(/(Hide)(.*)/)) {
      elem.innerHTML = "Show" + m[2];
    } else if (m = elem.innerHTML.match(/(Show)(.*)/)) {
      elem.innerHTML = "Hide" + m[2];
    }
    return true;
  }

function span(s, klass) {
  return '<span class="' + klass + '">' + s + '</span>';
}
  
function highlightSymbols() {
  pres = document.getElementsByTagName('pre');
  for(var i = 0; i < pres.length; i++) {
    pre = pres[i];
    spans = pre.getElementsByTagName('span');
    for(var k = 0; k < spans.length; k++) {
      span = spans[k];
      if (span.className.match(/ruby-identifier/)) {
        if (span.innerHTML.match(/^:/)) {
          span.className += " ruby-symbol";
        }
      }
    }
  }
}

 function hasClass(obj) {
     var result = false;
     if (obj.getAttributeNode("class") != null) {
         result = obj.getAttributeNode("class").value;
     }
     return result;
  }   

 function stripe() {
    var even = true;
    var color = "#e4ebed";
    var tables = document.getElementsByTagName('table');
    if (tables.length == 0) { return; }
    for (var h = 0; h < tables.length; h++) {
        var trs = tables[h].getElementsByTagName("tr");
        for (var i = 0; i < trs.length; i++) {
          var tds = trs[i].getElementsByTagName("td");
            for (var j = 0; j < tds.length; j++) {       
              if (hasClass(tds[j]) != "first") {                
              var mytd = tds[j];
              if (even) {
                mytd.style.backgroundColor = color;
              }         
            }
          }
          even =  ! even;
      }
    }
  }
  
function ajaxGet(url) {
  url = (href_base + url).replace('/./', '/')
  var req = false;

  if (window.ActiveXObject) {
    try {
      // stupid hack because IE7 disables local Ajax with the native xmlhttprequest object
      // for security purposes. Yet ActiveX still works. Thanks, Microsoft. I hate you. Die.
      req = new ActiveXObject("MSXML2.XMLHTTP.3.0");
    } catch (e) {
      try {
        /* IE 6 and maybe 5, don't know, don't care */
        req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          req = false;
        }
      }
    }
  }
    
  /* real browsers */
  if (!req && window.XMLHttpRequest) {
    try {
      req = new XMLHttpRequest();
    } catch (e) {
      req = false;
    }
  } 
  
  if (req) {
    req.open('GET', url, false);
    req.send(null);
    return req.responseText;
  } else {
    return "Ajax error";  
  }
}


function addEvent(elm, evType, fn, useCapture) {
	if (elm.addEventListener) {
	  elm.addEventListener(evType, fn, useCapture);  
  	return true;
	} else if (elm.attachEvent) {
  	var r = elm.attachEvent('on' + evType, fn);  
	  return r;  
	} else {
  	elm['on' + evType] = fn;
	}
}

function insertIndices() {
  pages = ["class", "file", "method"]
  for (x in pages) { 
    $(pages[x]).innerHTML += ajaxGet('fr_' + pages[x] + '_index.html').replace(/(href=")/g, '$1' + href_base);
  }
  /* mouseoverify method links */
  links = $('method').getElementsByTagName('a');
  for (var x = 0; x < links.length; x++) {
    if (m = links[x].innerHTML.match(/(.*)\s\((.*)\)/)) {
      links[x].innerHTML = m[1] + '<br>';
      links[x].title = m[2];
    }
  }
  /* this is stupid */
  $('class').style.display = "block";
  $('file').style.display = "block";
  
  /* has to be here because IE7 does not guarantee the onLoad callback order */
  abbreviateIndicesInner(["class", "file"], 25, "a");
  /* same, linkTitle() depends on the class link list */
  linkTitle();
}

function abbreviateIndices() {
  var ids = ["defined_in", "child_of", "includes", "requires", "method", "methods"];
  abbreviateIndicesInner(ids, 25, 'a');
  abbreviateIndicesInner(ids, 25, 'span');
}

function abbreviateIndicesInner(indices, amount, tag) {
  for (var x = 0; x < indices.length; x++) { 
    var the_index = $(indices[x]);
    if (the_index) {
      links = the_index.getElementsByTagName(tag);
      for (var y = 0; y < links.length; y++) {
        var link = links[y];
        if (link.getElementsByTagName('span').length == 0 && link.getElementsByTagName('a').length == 0) {
          // avoid nesting
          link.innerHTML = link.innerHTML.replace(/<br>|\n/gi, '');
          link.title = link.innerHTML;
          link.innerHTML = abbreviate(link.innerHTML, amount) + '<br>';
        }
      }
    }
  }
}

function linkTitle() {
  
  /* grab the correct title element from the index */
  var index_page = ajaxGet('index.html');
  title_text = index_page.match(/<title>(.*)<\/title>/m)[1];
  document.title = title_text + " - " + document.title;
  var p = $('header').getElementsByTagName('p')[0]
  if (p.innerHTML.match(/^\s*$/)) {
    p.innerHTML = title_text;
  } else {
    p.innerHTML = title_text + ": " + p.innerHTML;
  }
  
  /* set the link properly */
  title_link = index_page.match(/<a\s+href="(.*?)"/)[1];
  var element = $('title');
  var item_type = "";
  var item_name = "";
  if (m = element.innerHTML.match(/(Class:|Module:|File:)\s*(.*)/)) {
    item_type = m[1];
    item_name = m[2];
  } else {
    item_name = element.innerHTML;
  }
  element.innerHTML = '<a href="' + href_base + title_link + '">' + item_type + " " + abbreviate(item_name, 45) + '</a>';
  element.getElementsByTagName('a')[0].title = item_name
  
  /* breadcrumb navigation */
  items = item_name.split("::");
  items_new = item_name.split("::");
  file_links = $('class').getElementsByTagName('a');
  for (var x = 0; x < items.length - 1; x++ ){
    var item = items[x];
    link = ("/classes/" + items.slice(0,x).join("/") + "/" + item + ".html").replace('//', '/');
    regex = new RegExp(RegExp.escape(link) + '$');
    for (var y = 0; y < file_links.length; y++) {
      if (file_links[y].href.match(regex)) {
         items_new[x] = '<a href="' + href_base + link + '">' + item + '</a>';
         break;
      }
    }  
  }
  $('item_name').innerHTML = item_type + ' ' + items_new.join(" :: ");
}

function abbreviate(s, size) {
  while (s.length > size) {
    var old_s = s;
    s = s.replace(/\s|\n/mg, '');
    s = s.replace(/([A-Z])[a-z]+/m, '$1');
    if (!s || old_s == s) {
      return "..." + s.substring(s.length - size, s.length);
    }
  }
  return s;
}

function disableSubmit(event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  if (keyCode == 13) {
    return false;
  } else {
    return true;
  }
}
  
function filterList(id, s, event) {
  
  /* some weak escaping */
  s = s.replace(/[^\w\d\.\_\-\/\:\=\[\]\?\!]/g, '');
  s = RegExp.escape(s);
  
  var show_all = false;
  if (s.match(/^\s*$/)) {
    show_all = true;
  }
  
  links = $(id).getElementsByTagName('a')
  regex = new RegExp(s, 'i');
  
  for (var x = 0; x < links.length; x++) {
    var link = links[x];
    if (show_all) {
      link.style.display = 'inline';
    } else {
       if (link.innerHTML.match(regex)) {        
         link.style.display = 'inline';
       } else {
         link.style.display = 'none';
       }
    }
  }
  return true;
}

RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

function hacks() {
  // show the spacer if necessary, 
  divs = document.getElementsByTagName('div');
  for(var x = 0; x < divs.length; x++) {
    if (divs[x].className && divs[x].className.match(/top/)) {
      document.getElementById('spacer').style.display = 'block';
    }
  }
  // remove extra colons from tables
  tds = document.getElementsByTagName('td');
  for(var x = 0; x < tds.length; x++) {
    str = tds[x].innerHTML
    if (str.charAt(str.length - 1) == ":") {
      tds[x].innerHTML = str.slice(0, str.length - 1)
    }
  }
}

addEvent(window, 'load', insertIndices, false);
addEvent(window, 'load', abbreviateIndices, false);
addEvent(window, 'load', stripe, false);
addEvent(window, 'load', highlightSymbols, false);
addEvent(window, 'load', hacks, false);
</script></head><body><div id="container"><div class="curve" id="preheader_curve_0"></div><div class="curve" id="preheader_curve_1"></div><div class="curve" id="preheader_curve_2"></div><div class="curve" id="preheader_curve_3"></div><div class="curve" id="preheader_curve_4"></div><div class="curve" id="preheader_curve_5"></div><div id="header"><p>
</p><span><h1 id="title">
Class: ActiveResource::Base
</h1></span>
</div><div class="clear"></div><div id="left">
<div class="navigation darker top" id="child_of"><h3>Child of</h3><span>

<a href='../Object.html'>
Object
</a>
</span></div>

<div class="navigation darker top" id="defined_in"><h3>Defined in</h3>

<a href="../../files/vendor/rails/activeresource/lib/active_resource/base_rb.html">vendor/rails/activeresource/lib/active_resource/base.rb</a>

</div>



<div class="navigation top" id="methods"><h3>Methods</h3>


<a href='#M001000'>
==<br/>
</a>




<a href='#M000990'>
collection_path<br/>
</a>




<a href='#M001017'>
collection_path<br/>
</a>




<a href='#M001011'>
connection<br/>
</a>




<a href='#M000984'>
connection<br/>
</a>




<a href='#M000991'>
create<br/>
</a>




<a href='#M001013'>
create<br/>
</a>




<a href='#M000993'>
delete<br/>
</a>




<a href='#M001005'>
destroy<br/>
</a>




<a href='#M001003'>
dup<br/>
</a>




<a href='#M001016'>
element_path<br/>
</a>




<a href='#M000989'>
element_path<br/>
</a>




<a href='#M001001'>
eql?<br/>
</a>




<a href='#M000994'>
exists?<br/>
</a>




<a href='#M001006'>
exists?<br/>
</a>




<a href='#M000992'>
find<br/>
</a>




<a href='#M000983'>
format=<br/>
</a>




<a href='#M001002'>
hash<br/>
</a>




<a href='#M000985'>
headers<br/>
</a>




<a href='#M000997'>
id<br/>
</a>




<a href='#M000998'>
id=<br/>
</a>




<a href='#M001015'>
id_from_response<br/>
</a>




<a href='#M001009'>
load<br/>
</a>




<a href='#M001014'>
load_attributes_from_response<br/>
</a>




<a href='#M000995'>
new<br/>
</a>




<a href='#M000996'>
new?<br/>
</a>




<a href='#M000981'>
password<br/>
</a>




<a href='#M000982'>
password=<br/>
</a>




<a href='#M000986'>
prefix<br/>
</a>




<a href='#M000988'>
prefix=<br/>
</a>




<a href='#M000987'>
prefix_source<br/>
</a>




<a href='#M001008'>
reload<br/>
</a>




<a href='#M001010'>
respond_to?<br/>
</a>




<a href='#M001004'>
save<br/>
</a>




<a href='#M000977'>
site<br/>
</a>




<a href='#M000978'>
site=<br/>
</a>




<a href='#M000999'>
to_param<br/>
</a>




<a href='#M001007'>
to_xml<br/>
</a>




<a href='#M001012'>
update<br/>
</a>




<a href='#M000979'>
user<br/>
</a>




<a href='#M000980'>
user=<br/>
</a>


</div>
<div id="spacer"></div><div class="navigation darker index" id="class_wrapper"><div class="list_header"><h3>All classes</h3></div><div class="list_header_link"><a onclick="toggle('class'); toggleText('class_link'); return false;" href="#" id="class_link">Hide...</a></div><div class="clear"></div><div id="class"><form><label for="filter_class">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('class', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_class"></input></form></div></div><div class="navigation darker index" id="file_wrapper"><div class="list_header"><h3>All files</h3></div><div class="list_header_link"><a onclick="toggle('file'); toggleText('file_link'); return false;" href="#" id="file_link">Hide...</a></div><div class="clear"></div><div id="file"><form><label for="filter_file">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('file', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_file"></input></form></div></div><div class="navigation darker index" id="method_wrapper"><div class="list_header"><h3>All methods</h3></div><div class="list_header_link"><a onclick="toggle('method'); toggleText('method_link'); return false;" href="#" id="method_link">Show...</a></div><div class="clear"></div><div id="method"><form><label for="filter_method">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('method', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_method"></input></form></div></div></div><div id="content">
<h1 id="item_name">Class: ActiveResource::Base</h1>

<div id="description"><p>
<a href="Base.html">ActiveResource::Base</a> is the main class for mapping
RESTful resources as models in a <a href="../Rails.html">Rails</a>
application.
</p>
<p>
For an outline of what Active Resource is capable of, see <a
href="../../files/vendor/rails/activeresource/README.html">files/vendor/rails/activeresource/README.html</a>.
</p>
<h2>Automated mapping</h2>
<p>
Active Resource objects represent your RESTful resources as manipulatable
Ruby objects. To map resources to Ruby objects, Active Resource only needs
a class name that corresponds to the resource name (e.g., the class Person
maps to the resources people, very similarly to Active Record) and a <tt><a
href="Base.html#M000977">site</a></tt> value, which holds the URI of the
resources.
</p>
<pre>
    class Person &lt; ActiveResource::Base
      self.site = &quot;http://api.people.com:3000/&quot;
    end
</pre>
<p>
Now the Person class is mapped to RESTful resources located at <tt><a
href="http://api.people.com:3000/people">api.people.com:3000/people</a>/</tt>,
and you can now use Active Resource&#8216;s lifecycles methods to
manipulate resources.
</p>
<h2>Lifecycle methods</h2>
<p>
Active Resource exposes methods for creating, finding, updating, and
deleting resources from REST web services.
</p>
<pre>
  ryan = Person.new(:first =&gt; 'Ryan', :last =&gt; 'Daigle')
  ryan.save  #=&gt; true
  ryan.id  #=&gt; 2
  Person.exists?(ryan.id)  #=&gt; true
  ryan.exists?  #=&gt; true

  ryan = Person.find(1)
  # =&gt; Resource holding our newly created Person object

  ryan.first = 'Rizzle'
  ryan.save  #=&gt; true

  ryan.destroy  #=&gt; true
</pre>
<p>
As you can see, these are very similar to Active Record&#8216;s lifecycle
methods for database records. You can read more about each of these methods
in their respective documentation.
</p>
<h3>Custom REST methods</h3>
<p>
Since simple CRUD/lifecycle methods can&#8216;t accomplish every task,
Active Resource also supports defining your own custom REST methods. To
invoke them, Active Resource provides the <tt>get</tt>, <tt>post</tt>,
<tt>put</tt> and <tt><a href="Base.html#M000993">delete</a></tt> methods
where you can specify a custom REST method name to invoke.
</p>
<pre>
  # POST to the custom 'register' REST method, i.e. POST /people/new/register.xml.
  Person.new(:name =&gt; 'Ryan').post(:register)
  # =&gt; { :id =&gt; 1, :name =&gt; 'Ryan', :position =&gt; 'Clerk' }

  # PUT an update by invoking the 'promote' REST method, i.e. PUT /people/1/promote.xml?position=Manager.
  Person.find(1).put(:promote, :position =&gt; 'Manager')
  # =&gt; { :id =&gt; 1, :name =&gt; 'Ryan', :position =&gt; 'Manager' }

  # GET all the positions available, i.e. GET /people/positions.xml.
  Person.get(:positions)
  # =&gt; [{:name =&gt; 'Manager'}, {:name =&gt; 'Clerk'}]

  # DELETE to 'fire' a person, i.e. DELETE /people/1/fire.xml.
  Person.find(1).delete(:fire)
</pre>
<p>
For more information on using custom REST methods, see the <a
href="CustomMethods.html">ActiveResource::CustomMethods</a> documentation.
</p>
<h2><a href="Validations.html">Validations</a></h2>
<p>
You can validate resources client side by overriding validation methods in
the base class.
</p>
<pre>
    class Person &lt; ActiveResource::Base
       self.site = &quot;http://api.people.com:3000/&quot;
       protected
         def validate
           errors.add(&quot;last&quot;, &quot;has invalid characters&quot;) unless last =~ /[a-zA-Z]*/
         end
    end
</pre>
<p>
See the <a href="Validations.html">ActiveResource::Validations</a>
documentation for more information.
</p>
<h2>Authentication</h2>
<p>
Many REST APIs will require authentication, usually in the form of basic
HTTP authentication. Authentication can be specified by:
</p>
<ul>
<li>putting the credentials in the URL for the <tt><a
href="Base.html#M000977">site</a></tt> variable.

<pre>
 class Person &lt; ActiveResource::Base
   self.site = &quot;http://ryan:password@api.people.com:3000/&quot;
 end
</pre>
</li>
<li>defining <tt><a href="Base.html#M000979">user</a></tt> and/or <tt><a
href="Base.html#M000981">password</a></tt> variables

<pre>
 class Person &lt; ActiveResource::Base
   self.site = &quot;http://api.people.com:3000/&quot;
   self.user = &quot;ryan&quot;
   self.password = &quot;password&quot;
 end
</pre>
</li>
</ul>
<p>
For obvious security reasons, it is probably best if such services are
available over HTTPS.
</p>
<p>
Note: Some values cannot be provided in the URL passed to <a
href="Base.html#M000977">site</a>. e.g. email addresses as usernames. In
those situations you should use the seperate <a
href="Base.html#M000979">user</a> and <a
href="Base.html#M000981">password</a> option.
</p>
<h2><a href="Errors.html">Errors</a> &amp; Validation</h2>
<p>
Error handling and validation is handled in much the same manner as
you&#8216;re used to seeing in Active Record. Both the response code in the
HTTP response and the body of the response are used to indicate that an
error occurred.
</p>
<h3>Resource errors</h3>
<p>
When a GET is requested for a resource that does not exist, the HTTP
<tt>404</tt> (Resource Not Found) response code will be returned from the
server which will raise an <a
href="ResourceNotFound.html">ActiveResource::ResourceNotFound</a>
exception.
</p>
<pre>
  # GET http://api.people.com:3000/people/999.xml
  ryan = Person.find(999) # =&gt; Raises ActiveResource::ResourceNotFound
  # =&gt; Response = 404
</pre>
<p>
<tt>404</tt> is just one of the HTTP error response codes that <a
href="../ActiveResource.html">ActiveResource</a> will handle with its own
exception. The following HTTP response codes will also result in these
exceptions:
</p>
<table>
<tr><td valign="top">200 - 399:</td><td>Valid response, no exception

</td></tr>
<tr><td valign="top">404:</td><td><a href="ResourceNotFound.html">ActiveResource::ResourceNotFound</a>

</td></tr>
<tr><td valign="top">409:</td><td><a href="ResourceConflict.html">ActiveResource::ResourceConflict</a>

</td></tr>
<tr><td valign="top">422:</td><td>ActiveResource::ResourceInvalid (rescued by <a
href="Base.html#M001004">save</a> as validation errors)

</td></tr>
<tr><td valign="top">401 - 499:</td><td><a href="ClientError.html">ActiveResource::ClientError</a>

</td></tr>
<tr><td valign="top">500 - 599:</td><td><a href="ServerError.html">ActiveResource::ServerError</a>

</td></tr>
</table>
<p>
These custom exceptions allow you to deal with resource errors more
naturally and with more precision rather than returning a general HTTP
error. For example:
</p>
<pre>
  begin
    ryan = Person.find(my_id)
  rescue ActiveResource::ResourceNotFound
    redirect_to :action =&gt; 'not_found'
  rescue ActiveResource::ResourceConflict, ActiveResource::ResourceInvalid
    redirect_to :action =&gt; 'new'
  end
</pre>
<h3>Validation errors</h3>
<p>
Active Resource supports validations on resources and will return errors if
any these validations fail (e.g., &quot;First name can not be blank&quot;
and so on). These types of errors are denoted in the response by a response
code of <tt>422</tt> and an XML representation of the validation errors.
The <a href="Base.html#M001004">save</a> operation will then fail (with a
<tt>false</tt> return value) and the validation errors can be accessed on
the resource in question.
</p>
<pre>
  ryan = Person.find(1)
  ryan.first #=&gt; ''
  ryan.save  #=&gt; false

  # When
  # PUT http://api.people.com:3000/people/1.xml
  # is requested with invalid values, the response is:
  #
  # Response (422):
  # &lt;errors type=&quot;array&quot;&gt;&lt;error&gt;First cannot be empty&lt;/error&gt;&lt;/errors&gt;
  #

  ryan.errors.invalid?(:first)  #=&gt; true
  ryan.errors.full_messages  #=&gt; ['First cannot be empty']
</pre>
<p>
Learn more about Active Resource&#8216;s validation features in the <a
href="Validations.html">ActiveResource::Validations</a> documentation.
</p>
</div>




<p></p>



<h1>Aliases</h1><p><table><tr><th>Old name</th><th>New name</th></tr>
<tr>


<td class="highlight">prefix=</td>

<td class="normal">set_prefix</td>

</tr>
<tr>


<td class="highlight">element_name=</td>

<td class="normal">set_element_name</td>

</tr>
<tr>


<td class="highlight">collection_name=</td>

<td class="normal">set_collection_name</td>

</tr>
<tr>


<td class="highlight">primary_key=</td>

<td class="normal">set_primary_key</td>

</tr>
<tr>


<td class="highlight">respond_to?</td>

<td class="normal">respond_to_without_attributes?</td>

</tr>
</table></p>



<h1>Public Class Methods</h1>


<a class="small" name="M000990"><br/></a>
<div class="method_block"><h3>
<a href='#M000990'>


collection_path

(prefix_options = {}, query_options = nil)

</a>
</h3>
<p>
Gets the collection path for the REST resources. If the
<tt>query_options</tt> parameter is omitted, <a
href="../Rails.html">Rails</a> will split from the <tt>prefix_options</tt>.
</p>
<h4>Options</h4>
<table>
<tr><td valign="top"><tt>prefix_options</tt>:</td><td>A <a href="Base.html#M001002">hash</a> to add a <a
href="Base.html#M000986">prefix</a> to the request for nested URL&#8216;s
(e.g., <tt>:account_id =&gt; 19</tt> would yield a URL like
<tt>/accounts/19/purchases.xml</tt>).

</td></tr>
<tr><td valign="top"><tt>query_options</tt>:</td><td>A <a href="Base.html#M001002">hash</a> to add items to the query string for
the request.

</td></tr>
</table>
<h4>Examples</h4>
<pre>
  Post.collection_path
  # =&gt; /posts.xml

  Comment.collection_path(:post_id =&gt; 5)
  # =&gt; /posts/5/comments.xml

  Comment.collection_path(:post_id =&gt; 5, :active =&gt; 1)
  # =&gt; /posts/5/comments.xml?active=1

  Comment.collection_path({:post_id =&gt; 5}, {:active =&gt; 1})
  # =&gt; /posts/5/comments.xml?active=1
</pre>

<p class="source_link" id="M000990-show-link"><a onclick="toggle('M000990-source'); toggleText('M000990-link'); return false;" href="#" id="M000990-link">Show source...</a></p><div class="source" id="M000990-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 378</span>
378:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collection_path</span>(<span class="ruby-identifier">prefix_options</span> = {}, <span class="ruby-identifier">query_options</span> = <span class="ruby-keyword kw">nil</span>)
379:         <span class="ruby-identifier">prefix_options</span>, <span class="ruby-identifier">query_options</span> = <span class="ruby-identifier">split_options</span>(<span class="ruby-identifier">prefix_options</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">query_options</span>.<span class="ruby-identifier">nil?</span>
380:         <span class="ruby-node">&quot;#{prefix(prefix_options)}#{collection_name}.#{format.extension}#{query_string(query_options)}&quot;</span>
381:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000984"><br/></a>
<div class="method_block"><h3>
<a href='#M000984'>


connection

(refresh = false)

</a>
</h3>
<p>
An instance of <a href="Connection.html">ActiveResource::Connection</a>
that is the base <a href="Base.html#M000984">connection</a> to the remote
service. The <tt>refresh</tt> parameter toggles whether or not the <a
href="Base.html#M000984">connection</a> is refreshed at every request or
not (defaults to <tt>false</tt>).
</p>

<p class="source_link" id="M000984-show-link"><a onclick="toggle('M000984-source'); toggleText('M000984-link'); return false;" href="#" id="M000984-link">Show source...</a></p><div class="source" id="M000984-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 269</span>
269:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>(<span class="ruby-identifier">refresh</span> = <span class="ruby-keyword kw">false</span>)
270:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@connection</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Object</span>
271:           <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">site</span>, <span class="ruby-identifier">format</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">refresh</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">nil?</span>
272:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">user</span> = <span class="ruby-identifier">user</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span>
273:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">password</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">password</span>
274:           <span class="ruby-ivar">@connection</span>
275:         <span class="ruby-keyword kw">else</span>
276:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">connection</span>
277:         <span class="ruby-keyword kw">end</span>
278:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000991"><br/></a>
<div class="method_block"><h3>
<a href='#M000991'>


create

(attributes = {})

</a>
</h3>
<p>
Create a <a href="Base.html#M000995">new</a> resource instance and request
to the remote service that it be saved, making it equivalent to the
following simultaneous calls:
</p>
<pre>
  ryan = Person.new(:first =&gt; 'ryan')
  ryan.save
</pre>
<p>
The newly created resource is returned. If a failure has occurred an
exception will be raised (see <a href="Base.html#M001004">save</a>). If the
resource is invalid and has not been saved then valid? will return
<tt>false</tt>, while <a href="Base.html#M000996">new?</a> will still
return <tt>true</tt>.
</p>
<h4>Examples</h4>
<pre>
  Person.create(:name =&gt; 'Jeremy', :email =&gt; 'myname@nospam.com', :enabled =&gt; true)
  my_person = Person.find(:first)
  my_person.email
  # =&gt; myname@nospam.com

  dhh = Person.create(:name =&gt; 'David', :email =&gt; 'dhh@nospam.com', :enabled =&gt; true)
  dhh.valid?
  # =&gt; true
  dhh.new?
  # =&gt; false

  # We'll assume that there's a validation that requires the name attribute
  that_guy = Person.create(:name =&gt; '', :email =&gt; 'thatguy@nospam.com', :enabled =&gt; true)
  that_guy.valid?
  # =&gt; false
  that_guy.new?
  # =&gt; true
</pre>

<p class="source_link" id="M000991-show-link"><a onclick="toggle('M000991-source'); toggleText('M000991-link'); return false;" href="#" id="M000991-link">Show source...</a></p><div class="source" id="M000991-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 415</span>
415:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span> = {})
416:         <span class="ruby-identifier">returning</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)) { <span class="ruby-operator">|</span><span class="ruby-identifier">res</span><span class="ruby-operator">|</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">save</span> }        
417:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000993"><br/></a>
<div class="method_block"><h3>
<a href='#M000993'>


delete

(id, options = {})

</a>
</h3>
<p>
Deletes the resources with the ID in the <tt><a
href="Base.html#M000997">id</a></tt> parameter.
</p>
<h4>Options</h4>
<p>
All options specify <a href="Base.html#M000986">prefix</a> and query
parameters.
</p>
<h4>Examples</h4>
<pre>
  Event.delete(2)
  # =&gt; DELETE /events/2

  Event.create(:name =&gt; 'Free Concert', :location =&gt; 'Community Center')
  my_event = Event.find(:first)
  # =&gt; Events (id: 7)
  Event.delete(my_event.id)
  # =&gt; DELETE /events/7

  # Let's assume a request to events/5/cancel.xml
  Event.delete(params[:id])
  # =&gt; DELETE /events/5
</pre>

<p class="source_link" id="M000993-show-link"><a onclick="toggle('M000993-source'); toggleText('M000993-link'); return false;" href="#" id="M000993-link">Show source...</a></p><div class="source" id="M000993-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 491</span>
491:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span> = {})
492:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span>))
493:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000989"><br/></a>
<div class="method_block"><h3>
<a href='#M000989'>


element_path

(id, prefix_options = {}, query_options = nil)

</a>
</h3>
<p>
Gets the element path for the given ID in <tt><a
href="Base.html#M000997">id</a></tt>. If the <tt>query_options</tt>
parameter is omitted, <a href="../Rails.html">Rails</a> will split from the
<a href="Base.html#M000986">prefix</a> options.
</p>
<h4>Options</h4>
<table>
<tr><td valign="top"><tt>prefix_options</tt>:</td><td>A <a href="Base.html#M001002">hash</a> to add a <a
href="Base.html#M000986">prefix</a> to the request for nested URL&#8216;s
(e.g., <tt>:account_id =&gt; 19</tt> would yield a URL like
<tt>/accounts/19/purchases.xml</tt>).

</td></tr>
<tr><td valign="top"><tt>query_options</tt>:</td><td>A <a href="Base.html#M001002">hash</a> to add items to the query string for
the request.

</td></tr>
</table>
<h4>Examples</h4>
<pre>
  Post.element_path(1)
  # =&gt; /posts/1.xml

  Comment.element_path(1, :post_id =&gt; 5)
  # =&gt; /posts/5/comments/1.xml

  Comment.element_path(1, :post_id =&gt; 5, :active =&gt; 1)
  # =&gt; /posts/5/comments/1.xml?active=1

  Comment.element_path(1, {:post_id =&gt; 5}, {:active =&gt; 1})
  # =&gt; /posts/5/comments/1.xml?active=1
</pre>

<p class="source_link" id="M000989-show-link"><a onclick="toggle('M000989-source'); toggleText('M000989-link'); return false;" href="#" id="M000989-link">Show source...</a></p><div class="source" id="M000989-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 352</span>
352:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">prefix_options</span> = {}, <span class="ruby-identifier">query_options</span> = <span class="ruby-keyword kw">nil</span>)
353:         <span class="ruby-identifier">prefix_options</span>, <span class="ruby-identifier">query_options</span> = <span class="ruby-identifier">split_options</span>(<span class="ruby-identifier">prefix_options</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">query_options</span>.<span class="ruby-identifier">nil?</span>
354:         <span class="ruby-node">&quot;#{prefix(prefix_options)}#{collection_name}/#{id}.#{format.extension}#{query_string(query_options)}&quot;</span>
355:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000994"><br/></a>
<div class="method_block"><h3>
<a href='#M000994'>


exists?

(id, options = {})

</a>
</h3>
<p>
Asserts the existence of a resource, returning <tt>true</tt> if the
resource is found.
</p>
<h4>Examples</h4>
<pre>
  Note.create(:title =&gt; 'Hello, world.', :body =&gt; 'Nothing more for now...')
  Note.exists?(1)
  # =&gt; true

  Note.exists(1349)
  # =&gt; false
</pre>

<p class="source_link" id="M000994-show-link"><a onclick="toggle('M000994-source'); toggleText('M000994-link'); return false;" href="#" id="M000994-link">Show source...</a></p><div class="source" id="M000994-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 504</span>
504:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span> = {})
505:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>
506:           <span class="ruby-identifier">prefix_options</span>, <span class="ruby-identifier">query_options</span> = <span class="ruby-identifier">split_options</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:params</span>])
507:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">prefix_options</span>, <span class="ruby-identifier">query_options</span>)
508:           <span class="ruby-identifier">response</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">head</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">headers</span>)
509:           <span class="ruby-identifier">response</span>.<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-value">200</span>
510:         <span class="ruby-keyword kw">end</span>
511:         <span class="ruby-comment cmt"># id &amp;&amp; !find_single(id, options).nil?</span>
512:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">ResourceNotFound</span>
513:         <span class="ruby-keyword kw">false</span>
514:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000992"><br/></a>
<div class="method_block"><h3>
<a href='#M000992'>


find

(*arguments)

</a>
</h3>
<p>
Core method for finding resources. Used similarly to Active Record&#8216;s
<a href="Base.html#M000992">find</a> method.
</p>
<h4>Arguments</h4>
<p>
The first argument is considered to be the scope of the query. That is, how
many resources are returned from the request. It can be one of the
following.
</p>
<table>
<tr><td valign="top">+:one+:</td><td>Returns a single resource.

</td></tr>
<tr><td valign="top">+:first+:</td><td>Returns the first resource found.

</td></tr>
<tr><td valign="top">+:all+:</td><td>Returns every resource that matches the request.

</td></tr>
</table>
<h4>Options</h4>
<table>
<tr><td valign="top"><tt>from</tt>:</td><td>Sets the path or custom method that resources will be fetched from.

</td></tr>
<tr><td valign="top"><tt>params</tt>:</td><td>Sets query and <a href="Base.html#M000986">prefix</a> (nested URL)
parameters.

</td></tr>
</table>
<h4>Examples</h4>
<pre>
  Person.find(1)
  # =&gt; GET /people/1.xml

  Person.find(:all)
  # =&gt; GET /people.xml

  Person.find(:all, :params =&gt; { :title =&gt; &quot;CEO&quot; })
  # =&gt; GET /people.xml?title=CEO

  Person.find(:first, :from =&gt; :managers)
  # =&gt; GET /people/managers.xml

  Person.find(:all, :from =&gt; &quot;/companies/1/people.xml&quot;)
  # =&gt; GET /companies/1/people.xml

  Person.find(:one, :from =&gt; :leader)
  # =&gt; GET /people/leader.xml

  Person.find(:all, :from =&gt; :developers, :params =&gt; { :language =&gt; 'ruby' })
  # =&gt; GET /people/developers.xml?language=ruby

  Person.find(:one, :from =&gt; &quot;/companies/1/manager.xml&quot;)
  # =&gt; GET /companies/1/manager.xml

  StreetAddress.find(1, :params =&gt; { :person_id =&gt; 1 })
  # =&gt; GET /people/1/street_addresses/1.xml
</pre>

<p class="source_link" id="M000992-show-link"><a onclick="toggle('M000992-source'); toggleText('M000992-link'); return false;" href="#" id="M000992-link">Show source...</a></p><div class="source" id="M000992-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 460</span>
460:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
461:         <span class="ruby-identifier">scope</span>   = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-value">0</span>)
462:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-value">0</span>) <span class="ruby-operator">||</span> {}
463: 
464:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">scope</span>
465:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:all</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_every</span>(<span class="ruby-identifier">options</span>)
466:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:first</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_every</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">first</span>
467:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:one</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_one</span>(<span class="ruby-identifier">options</span>)
468:           <span class="ruby-keyword kw">else</span>             <span class="ruby-identifier">find_single</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">options</span>)
469:         <span class="ruby-keyword kw">end</span>
470:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000983"><br/></a>
<div class="method_block"><h3>
<a href='#M000983'>


format=

(mime_type_reference_or_format)

</a>
</h3>
<p>
Sets the format that attributes are sent and received in from a mime type
reference. Example:
</p>
<pre>
  Person.format = :json
  Person.find(1) # =&gt; GET /people/1.json

  Person.format = ActiveResource::Formats::XmlFormat
  Person.find(1) # =&gt; GET /people/1.xml
</pre>
<p>
Default format is :xml.
</p>

<p class="source_link" id="M000983-show-link"><a onclick="toggle('M000983-source'); toggleText('M000983-link'); return false;" href="#" id="M000983-link">Show source...</a></p><div class="source" id="M000983-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 253</span>
253:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format=</span>(<span class="ruby-identifier">mime_type_reference_or_format</span>)
254:         <span class="ruby-identifier">format</span> = <span class="ruby-identifier">mime_type_reference_or_format</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>) <span class="ruby-operator">?</span> 
255:           <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Formats</span>[<span class="ruby-identifier">mime_type_reference_or_format</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">mime_type_reference_or_format</span>
256: 
257:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;format&quot;</span>, <span class="ruby-identifier">format</span>)
258:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">format</span> = <span class="ruby-identifier">format</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">site</span>
259:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000985"><br/></a>
<div class="method_block"><h3>
<a href='#M000985'>


headers

()

</a>
</h3>

<p class="source_link" id="M000985-show-link"><a onclick="toggle('M000985-source'); toggleText('M000985-link'); return false;" href="#" id="M000985-link">Show source...</a></p><div class="source" id="M000985-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 280</span>
280:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">headers</span>
281:         <span class="ruby-ivar">@headers</span> <span class="ruby-operator">||=</span> {}
282:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000995"><br/></a>
<div class="method_block"><h3>
<a href='#M000995'>


new

(attributes = {})

</a>
</h3>
<p>
Constructor method for <a href="Base.html#M000995">new</a> resources; the
optional <tt>attributes</tt> parameter takes a <tt>Hash</tt> of attributes
for the <a href="Base.html#M000995">new</a> resource.
</p>
<h4>Examples</h4>
<pre>
  my_course = Course.new
  my_course.name = &quot;Western Civilization&quot;
  my_course.lecturer = &quot;Don Trotter&quot;
  my_course.save

  my_other_course = Course.new(:name =&gt; &quot;Philosophy: Reason and Being&quot;, :lecturer =&gt; &quot;Ralph Cling&quot;)
  my_other_course.save
</pre>

<p class="source_link" id="M000995-show-link"><a onclick="toggle('M000995-source'); toggleText('M000995-link'); return false;" href="#" id="M000995-link">Show source...</a></p><div class="source" id="M000995-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 604</span>
604:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = {})
605:       <span class="ruby-ivar">@attributes</span>     = {}
606:       <span class="ruby-ivar">@prefix_options</span> = {}
607:       <span class="ruby-identifier">load</span>(<span class="ruby-identifier">attributes</span>)
608:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000981"><br/></a>
<div class="method_block"><h3>
<a href='#M000981'>


password

()

</a>
</h3>
<p>
Gets the <a href="Base.html#M000981">password</a> for REST HTTP
authentication
</p>

<p class="source_link" id="M000981-show-link"><a onclick="toggle('M000981-source'); toggleText('M000981-link'); return false;" href="#" id="M000981-link">Show source...</a></p><div class="source" id="M000981-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 229</span>
229:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">password</span>
230:         <span class="ruby-comment cmt"># Not using superclass_delegating_reader. See +site+ for explanation</span>
231:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@password</span>)
232:           <span class="ruby-ivar">@password</span>
233:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">superclass</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Object</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">password</span>
234:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">password</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
235:         <span class="ruby-keyword kw">end</span>
236:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000982"><br/></a>
<div class="method_block"><h3>
<a href='#M000982'>


password=

(password)

</a>
</h3>
<p>
Sets the <a href="Base.html#M000981">password</a> for REST HTTP
authentication
</p>

<p class="source_link" id="M000982-show-link"><a onclick="toggle('M000982-source'); toggleText('M000982-link'); return false;" href="#" id="M000982-link">Show source...</a></p><div class="source" id="M000982-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 239</span>
239:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">password=</span>(<span class="ruby-identifier">password</span>)
240:         <span class="ruby-ivar">@connection</span> = <span class="ruby-keyword kw">nil</span>
241:         <span class="ruby-ivar">@password</span> = <span class="ruby-identifier">password</span>
242:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000986"><br/></a>
<div class="method_block"><h3>
<a href='#M000986'>


prefix

(options={})

</a>
</h3>
<p>
Gets the <a href="Base.html#M000986">prefix</a> for a resource&#8216;s
nested URL (e.g., <tt>prefix/collectionname/1.xml</tt>) This method is
regenerated at runtime based on what the <a
href="Base.html#M000986">prefix</a> is set to.
</p>

<p class="source_link" id="M000986-show-link"><a onclick="toggle('M000986-source'); toggleText('M000986-link'); return false;" href="#" id="M000986-link">Show source...</a></p><div class="source" id="M000986-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 293</span>
293:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prefix</span>(<span class="ruby-identifier">options</span>={})
294:         <span class="ruby-identifier">default</span> = <span class="ruby-identifier">site</span>.<span class="ruby-identifier">path</span>
295:         <span class="ruby-identifier">default</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">default</span>[<span class="ruby-value">-1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'/'</span>
296:         <span class="ruby-comment cmt"># generate the actual method based on the current site path</span>
297:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">default</span>
298:         <span class="ruby-identifier">prefix</span>(<span class="ruby-identifier">options</span>)
299:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000988"><br/></a>
<div class="method_block"><h3>
<a href='#M000988'>


prefix=

(value = '/')

</a>
</h3>
<p>
Sets the <a href="Base.html#M000986">prefix</a> for a resource&#8216;s
nested URL (e.g., <tt>prefix/collectionname/1.xml</tt>). Default value is
<tt>site.path</tt>.
</p>

<p class="source_link" id="M000988-show-link"><a onclick="toggle('M000988-source'); toggleText('M000988-link'); return false;" href="#" id="M000988-link">Show source...</a></p><div class="source" id="M000988-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 310</span>
310:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prefix=</span>(<span class="ruby-identifier">value</span> = <span class="ruby-value str">'/'</span>)
311:         <span class="ruby-comment cmt"># Replace :placeholders with '#{embedded options[:lookups]}'</span>
312:         <span class="ruby-identifier">prefix_call</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/:\w+/</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;\#{options[#{key}]}&quot;</span> }
313: 
314:         <span class="ruby-comment cmt"># Redefine the new methods.</span>
315:         <span class="ruby-identifier">code</span> = <span class="ruby-value str">&quot;def prefix_source() \&quot;\#{value}\&quot; end\ndef prefix(options={}) \&quot;\#{prefix_call}\&quot; end\n&quot;</span>
316:         <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-identifier">instance_eval</span> <span class="ruby-identifier">code</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span> }
317:       <span class="ruby-keyword kw">rescue</span>
318:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Couldn't set prefix: #{$!}\n  #{code}&quot;</span>
319:         <span class="ruby-identifier">raise</span>
320:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000987"><br/></a>
<div class="method_block"><h3>
<a href='#M000987'>


prefix_source

()

</a>
</h3>
<p>
An attribute reader for the source string for the resource path <a
href="Base.html#M000986">prefix</a>. This method is regenerated at runtime
based on what the <a href="Base.html#M000986">prefix</a> is set to.
</p>

<p class="source_link" id="M000987-show-link"><a onclick="toggle('M000987-source'); toggleText('M000987-link'); return false;" href="#" id="M000987-link">Show source...</a></p><div class="source" id="M000987-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 303</span>
303:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prefix_source</span>
304:         <span class="ruby-identifier">prefix</span> <span class="ruby-comment cmt"># generate #prefix and #prefix_source methods first</span>
305:         <span class="ruby-identifier">prefix_source</span>
306:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000977"><br/></a>
<div class="method_block"><h3>
<a href='#M000977'>


site

()

</a>
</h3>
<p>
Gets the URI of the REST resources to map for this class. The <a
href="Base.html#M000977">site</a> variable is required <a
href="../ActiveResource.html">ActiveResource</a>&#8216;s mapping to work.
</p>

<p class="source_link" id="M000977-show-link"><a onclick="toggle('M000977-source'); toggleText('M000977-link'); return false;" href="#" id="M000977-link">Show source...</a></p><div class="source" id="M000977-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 176</span>
176:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site</span>
177:         <span class="ruby-comment cmt"># Not using superclass_delegating_reader because don't want subclasses to modify superclass instance</span>
178:         <span class="ruby-comment cmt">#</span>
179:         <span class="ruby-comment cmt"># With superclass_delegating_reader</span>
180:         <span class="ruby-comment cmt">#</span>
181:         <span class="ruby-comment cmt">#   Parent.site = 'http://anonymous@test.com'</span>
182:         <span class="ruby-comment cmt">#   Subclass.site # =&gt; 'http://anonymous@test.com'</span>
183:         <span class="ruby-comment cmt">#   Subclass.site.user = 'david'</span>
184:         <span class="ruby-comment cmt">#   Parent.site # =&gt; 'http://david@test.com'</span>
185:         <span class="ruby-comment cmt">#</span>
186:         <span class="ruby-comment cmt"># Without superclass_delegating_reader (expected behaviour)</span>
187:         <span class="ruby-comment cmt">#</span>
188:         <span class="ruby-comment cmt">#   Parent.site = 'http://anonymous@test.com'</span>
189:         <span class="ruby-comment cmt">#   Subclass.site # =&gt; 'http://anonymous@test.com'</span>
190:         <span class="ruby-comment cmt">#   Subclass.site.user = 'david' # =&gt; TypeError: can't modify frozen object</span>
191:         <span class="ruby-comment cmt">#</span>
192:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@site</span>)
193:           <span class="ruby-ivar">@site</span>
194:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">superclass</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Object</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">site</span>
195:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">site</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
196:         <span class="ruby-keyword kw">end</span>
197:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000978"><br/></a>
<div class="method_block"><h3>
<a href='#M000978'>


site=

(site)

</a>
</h3>
<p>
Sets the URI of the REST resources to map for this class to the value in
the <tt><a href="Base.html#M000977">site</a></tt> argument. The <a
href="Base.html#M000977">site</a> variable is required <a
href="../ActiveResource.html">ActiveResource</a>&#8216;s mapping to work.
</p>

<p class="source_link" id="M000978-show-link"><a onclick="toggle('M000978-source'); toggleText('M000978-link'); return false;" href="#" id="M000978-link">Show source...</a></p><div class="source" id="M000978-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 201</span>
201:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site=</span>(<span class="ruby-identifier">site</span>)
202:         <span class="ruby-ivar">@connection</span> = <span class="ruby-keyword kw">nil</span>
203:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">site</span>.<span class="ruby-identifier">nil?</span>
204:           <span class="ruby-ivar">@site</span> = <span class="ruby-keyword kw">nil</span>
205:         <span class="ruby-keyword kw">else</span>
206:           <span class="ruby-ivar">@site</span> = <span class="ruby-identifier">create_site_uri_from</span>(<span class="ruby-identifier">site</span>)
207:           <span class="ruby-ivar">@user</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-ivar">@site</span>.<span class="ruby-identifier">user</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@site</span>.<span class="ruby-identifier">user</span>
208:           <span class="ruby-ivar">@password</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-ivar">@site</span>.<span class="ruby-identifier">password</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@site</span>.<span class="ruby-identifier">password</span>
209:         <span class="ruby-keyword kw">end</span>
210:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000979"><br/></a>
<div class="method_block"><h3>
<a href='#M000979'>


user

()

</a>
</h3>
<p>
Gets the <a href="Base.html#M000979">user</a> for REST HTTP authentication
</p>

<p class="source_link" id="M000979-show-link"><a onclick="toggle('M000979-source'); toggleText('M000979-link'); return false;" href="#" id="M000979-link">Show source...</a></p><div class="source" id="M000979-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 213</span>
213:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user</span>
214:         <span class="ruby-comment cmt"># Not using superclass_delegating_reader. See +site+ for explanation</span>
215:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@user</span>)
216:           <span class="ruby-ivar">@user</span>
217:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">superclass</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Object</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">user</span>
218:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">freeze</span>
219:         <span class="ruby-keyword kw">end</span>
220:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000980"><br/></a>
<div class="method_block"><h3>
<a href='#M000980'>


user=

(user)

</a>
</h3>
<p>
Sets the <a href="Base.html#M000979">user</a> for REST HTTP authentication
</p>

<p class="source_link" id="M000980-show-link"><a onclick="toggle('M000980-source'); toggleText('M000980-link'); return false;" href="#" id="M000980-link">Show source...</a></p><div class="source" id="M000980-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 223</span>
223:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">user=</span>(<span class="ruby-identifier">user</span>)
224:         <span class="ruby-ivar">@connection</span> = <span class="ruby-keyword kw">nil</span>
225:         <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">user</span>
226:       <span class="ruby-keyword kw">end</span></pre></div>
</div>


<h1>Public Instance Methods</h1>


<a class="small" name="M001000"><br/></a>
<div class="method_block"><h3>
<a href='#M001000'>


==

(other)

</a>
</h3>
<p>
Test for equality. Resource are equal if and only if <tt>other</tt> is the
same object or is an instance of the same class, is not +<a
href="Base.html#M000996">new?</a>+, and has the same <tt><a
href="Base.html#M000997">id</a></tt>.
</p>
<h4>Examples</h4>
<pre>
  ryan = Person.create(:name =&gt; 'Ryan')
  jamie = Person.create(:name =&gt; 'Jamie')

  ryan == jamie
  # =&gt; false (Different name attribute and id)

  ryan_again = Person.new(:name =&gt; 'Ryan')
  ryan == ryan_again
  # =&gt; false (ryan_again is new?)

  ryans_clone = Person.create(:name =&gt; 'Ryan')
  ryan == ryans_clone
  # =&gt; false (Different id attributes)

  ryans_twin = Person.find(ryan.id)
  ryan == ryans_twin
  # =&gt; true
</pre>

<p class="source_link" id="M001000-show-link"><a onclick="toggle('M001000-source'); toggleText('M001000-link'); return false;" href="#" id="M001000-link">Show source...</a></p><div class="source" id="M001000-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 666</span>
666:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
667:       <span class="ruby-identifier">other</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">||</span> (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">other</span>.<span class="ruby-identifier">new?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span>)
668:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001005"><br/></a>
<div class="method_block"><h3>
<a href='#M001005'>


destroy

()

</a>
</h3>
<p>
Deletes the resource from the remote service.
</p>
<h4>Examples</h4>
<pre>
  my_id = 3
  my_person = Person.find(my_id)
  my_person.destroy
  Person.find(my_id)
  # =&gt; 404 (Resource Not Found)

  new_person = Person.create(:name =&gt; 'James')
  new_id = new_person.id
  # =&gt; 7
  new_person.destroy
  Person.find(new_id)
  # =&gt; 404 (Resource Not Found)
</pre>

<p class="source_link" id="M001005-show-link"><a onclick="toggle('M001005-source'); toggleText('M001005-link'); return false;" href="#" id="M001005-link">Show source...</a></p><div class="source" id="M001005-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 740</span>
740:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>
741:       <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">element_path</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">headers</span>)
742:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001003"><br/></a>
<div class="method_block"><h3>
<a href='#M001003'>


dup

()

</a>
</h3>
<p>
Duplicate the current resource without saving it.
</p>
<h4>Examples</h4>
<pre>
  my_invoice = Invoice.create(:customer =&gt; 'That Company')
  next_invoice = my_invoice.dup
  next_invoice.new?
  # =&gt; true

  next_invoice.save
  next_invoice == my_invoice
  # =&gt; false (different id attributes)

  my_invoice.customer
  # =&gt; That Company
  next_invoice.customer
  # =&gt; That Company
</pre>

<p class="source_link" id="M001003-show-link"><a onclick="toggle('M001003-source'); toggleText('M001003-link'); return false;" href="#" id="M001003-link">Show source...</a></p><div class="source" id="M001003-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 697</span>
697:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dup</span>
698:       <span class="ruby-identifier">returning</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">resource</span><span class="ruby-operator">|</span>
699:         <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">attributes</span>     = <span class="ruby-ivar">@attributes</span>
700:         <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">prefix_options</span> = <span class="ruby-ivar">@prefix_options</span>
701:       <span class="ruby-keyword kw">end</span>
702:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001001"><br/></a>
<div class="method_block"><h3>
<a href='#M001001'>


eql?

(other)

</a>
</h3>
<p>
Tests for equality (delegates to ==).
</p>

<p class="source_link" id="M001001-show-link"><a onclick="toggle('M001001-source'); toggleText('M001001-link'); return false;" href="#" id="M001001-link">Show source...</a></p><div class="source" id="M001001-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 671</span>
671:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>)
672:       <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
673:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001006"><br/></a>
<div class="method_block"><h3>
<a href='#M001006'>


exists?

()

</a>
</h3>
<p>
Evaluates to <tt>true</tt> if this resource is not +<a
href="Base.html#M000996">new?</a>+ and is found on the remote service.
Using this method, you can check for resources that may have been deleted
between the object&#8216;s instantiation and actions on it.
</p>
<h4>Examples</h4>
<pre>
  Person.create(:name =&gt; 'Theodore Roosevelt')
  that_guy = Person.find(:first)
  that_guy.exists?
  # =&gt; true

  that_lady = Person.new(:name =&gt; 'Paul Bean')
  that_lady.exists?
  # =&gt; false

  guys_id = that_guy.id
  Person.delete(guys_id)
  that_guy.exists?
  # =&gt; false
</pre>

<p class="source_link" id="M001006-show-link"><a onclick="toggle('M001006-source'); toggleText('M001006-link'); return false;" href="#" id="M001006-link">Show source...</a></p><div class="source" id="M001006-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 763</span>
763:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>
764:       <span class="ruby-operator">!</span><span class="ruby-identifier">new?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:params</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">prefix_options</span>)
765:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001002"><br/></a>
<div class="method_block"><h3>
<a href='#M001002'>


hash

()

</a>
</h3>
<p>
Delegates to <a href="Base.html#M000997">id</a> in order to allow two
resources of the same type and <a href="Base.html#M000997">id</a> to work
with something like:
</p>
<pre>
  [Person.find(1), Person.find(2)] &amp; [Person.find(1), Person.find(4)] # =&gt; [Person.find(1)]
</pre>

<p class="source_link" id="M001002-show-link"><a onclick="toggle('M001002-source'); toggleText('M001002-link'); return false;" href="#" id="M001002-link">Show source...</a></p><div class="source" id="M001002-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 677</span>
677:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
678:       <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
679:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000997"><br/></a>
<div class="method_block"><h3>
<a href='#M000997'>


id

()

</a>
</h3>
<p>
Get the <tt><a href="Base.html#M000997">id</a></tt> attribute of the
resource.
</p>

<p class="source_link" id="M000997-show-link"><a onclick="toggle('M000997-source'); toggleText('M000997-link'); return false;" href="#" id="M000997-link">Show source...</a></p><div class="source" id="M000997-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 630</span>
630:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id</span>
631:       <span class="ruby-identifier">attributes</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>]
632:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000998"><br/></a>
<div class="method_block"><h3>
<a href='#M000998'>


id=

(id)

</a>
</h3>
<p>
Set the <tt><a href="Base.html#M000997">id</a></tt> attribute of the
resource.
</p>

<p class="source_link" id="M000998-show-link"><a onclick="toggle('M000998-source'); toggleText('M000998-link'); return false;" href="#" id="M000998-link">Show source...</a></p><div class="source" id="M000998-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 635</span>
635:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id=</span>(<span class="ruby-identifier">id</span>)
636:       <span class="ruby-identifier">attributes</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>] = <span class="ruby-identifier">id</span>
637:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001009"><br/></a>
<div class="method_block"><h3>
<a href='#M001009'>


load

(attributes)

</a>
</h3>
<p>
A method to manually <a href="Base.html#M001009">load</a> attributes from a
<a href="Base.html#M001002">hash</a>. Recursively loads collections of
resources. This method is called in initialize and <a
href="Base.html#M000991">create</a> when a <tt>Hash</tt> of attributes is
provided.
</p>
<h4>Examples</h4>
<pre>
  my_attrs = {:name =&gt; 'J&amp;J Textiles', :industry =&gt; 'Cloth and textiles'}

  the_supplier = Supplier.find(:first)
  the_supplier.name
  # =&gt; 'J&amp;M Textiles'
  the_supplier.load(my_attrs)
  the_supplier.name('J&amp;J Textiles')

  # These two calls are the same as Supplier.new(my_attrs)
  my_supplier = Supplier.new
  my_supplier.load(my_attrs)

  # These three calls are the same as Supplier.create(my_attrs)
  your_supplier = Supplier.new
  your_supplier.load(my_attrs)
  your_supplier.save
</pre>

<p class="source_link" id="M001009-show-link"><a onclick="toggle('M001009-source'); toggleText('M001009-link'); return false;" href="#" id="M001009-link">Show source...</a></p><div class="source" id="M001009-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 835</span>
835:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load</span>(<span class="ruby-identifier">attributes</span>)
836:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;expected an attributes Hash, got #{attributes.inspect}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
837:       <span class="ruby-ivar">@prefix_options</span>, <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">split_options</span>(<span class="ruby-identifier">attributes</span>)
838:       <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
839:         <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] =
840:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">value</span>
841:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
842:               <span class="ruby-identifier">resource</span> = <span class="ruby-identifier">find_or_create_resource_for_collection</span>(<span class="ruby-identifier">key</span>)
843:               <span class="ruby-identifier">value</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attrs</span><span class="ruby-operator">|</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attrs</span>) }
844:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
845:               <span class="ruby-identifier">resource</span> = <span class="ruby-identifier">find_or_create_resource_for</span>(<span class="ruby-identifier">key</span>)
846:               <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>)
847:             <span class="ruby-keyword kw">else</span>
848:               <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-identifier">value</span>
849:           <span class="ruby-keyword kw">end</span>
850:       <span class="ruby-keyword kw">end</span>
851:       <span class="ruby-keyword kw">self</span>
852:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000996"><br/></a>
<div class="method_block"><h3>
<a href='#M000996'>


new?

()

</a>
</h3>
<p>
A method to determine if the resource a <a href="Base.html#M000995">new</a>
object (i.e., it has not been POSTed to the remote service yet).
</p>
<h4>Examples</h4>
<pre>
  not_new = Computer.create(:brand =&gt; 'Apple', :make =&gt; 'MacBook', :vendor =&gt; 'MacMall')
  not_new.new?
  # =&gt; false

  is_new = Computer.new(:brand =&gt; 'IBM', :make =&gt; 'Thinkpad', :vendor =&gt; 'IBM')
  is_new.new?
  # =&gt; true

  is_new.save
  is_new.new?
  # =&gt; false
</pre>

<p class="source_link" id="M000996-show-link"><a onclick="toggle('M000996-source'); toggleText('M000996-link'); return false;" href="#" id="M000996-link">Show source...</a></p><div class="source" id="M000996-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 625</span>
625:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new?</span>
626:       <span class="ruby-identifier">id</span>.<span class="ruby-identifier">nil?</span>
627:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001008"><br/></a>
<div class="method_block"><h3>
<a href='#M001008'>


reload

()

</a>
</h3>
<p>
A method to <a href="Base.html#M001008">reload</a> the attributes of this
object from the remote web service.
</p>
<h4>Examples</h4>
<pre>
  my_branch = Branch.find(:first)
  my_branch.name
  # =&gt; Wislon Raod

  # Another client fixes the typo...

  my_branch.name
  # =&gt; Wislon Raod
  my_branch.reload
  my_branch.name
  # =&gt; Wilson Road
</pre>

<p class="source_link" id="M001008-show-link"><a onclick="toggle('M001008-source'); toggleText('M001008-link'); return false;" href="#" id="M001008-link">Show source...</a></p><div class="source" id="M001008-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 810</span>
810:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload</span>
811:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">load</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:params</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@prefix_options</span>).<span class="ruby-identifier">attributes</span>)
812:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001010"><br/></a>
<div class="method_block"><h3>
<a href='#M001010'>


respond_to?

(method, include_priv = false)

</a>
</h3>
<p>
A method to determine if an object responds to a message (e.g., a method
call). In Active Resource, a <tt>Person</tt> object with a <tt>name</tt>
attribute can answer <tt>true</tt> to
<tt>my_person.respond_to?(&quot;name&quot;)</tt>,
<tt>my_person.respond_to?(&quot;name=&quot;)</tt>, and
<tt>my_person.respond_to?(&quot;name?&quot;)</tt>.
</p>

<p class="source_link" id="M001010-show-link"><a onclick="toggle('M001010-source'); toggleText('M001010-link'); return false;" href="#" id="M001010-link">Show source...</a></p><div class="source" id="M001010-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 860</span>
860:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">include_priv</span> = <span class="ruby-keyword kw">false</span>)
861:       <span class="ruby-identifier">method_name</span> = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">to_s</span>
862:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">nil?</span>
863:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span>
864:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">method_name</span>)
865:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> 
866:       <span class="ruby-keyword kw">elsif</span> [<span class="ruby-value str">'?'</span>,<span class="ruby-value str">'='</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">method_name</span>.<span class="ruby-identifier">last</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">method_name</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">-1</span>))
867:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
868:       <span class="ruby-keyword kw">end</span>
869:       <span class="ruby-comment cmt"># super must be called at the end of the method, because the inherited respond_to?</span>
870:       <span class="ruby-comment cmt"># would return true for generated readers, even if the attribute wasn't present</span>
871:       <span class="ruby-keyword kw">super</span>
872:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001004"><br/></a>
<div class="method_block"><h3>
<a href='#M001004'>


save

()

</a>
</h3>
<p>
A method to <a href="Base.html#M001004">save</a> (<tt>POST</tt>) or <a
href="Base.html#M001012">update</a> (<tt>PUT</tt>) a resource. It delegates
to <tt><a href="Base.html#M000991">create</a></tt> if a <a
href="Base.html#M000995">new</a> object, <tt><a
href="Base.html#M001012">update</a></tt> if it is existing. If the response
to the <a href="Base.html#M001004">save</a> includes a body, it will be
assumed that this body is XML for the final object as it looked after the
<a href="Base.html#M001004">save</a> (which would include attributes like
<tt>created_at</tt> that weren&#8216;t part of the original submit).
</p>
<h4>Examples</h4>
<pre>
  my_company = Company.new(:name =&gt; 'RoleModel Software', :owner =&gt; 'Ken Auer', :size =&gt; 2)
  my_company.new?
  # =&gt; true
  my_company.save
  # =&gt; POST /companies/ (create)

  my_company.new?
  # =&gt; false
  my_company.size = 10
  my_company.save
  # =&gt; PUT /companies/1 (update)
</pre>

<p class="source_link" id="M001004-show-link"><a onclick="toggle('M001004-source'); toggleText('M001004-link'); return false;" href="#" id="M001004-link">Show source...</a></p><div class="source" id="M001004-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 721</span>
721:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>
722:       <span class="ruby-identifier">new?</span> <span class="ruby-value">? </span><span class="ruby-identifier">create</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">update</span>
723:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000999"><br/></a>
<div class="method_block"><h3>
<a href='#M000999'>


to_param

()

</a>
</h3>
<p>
Allows <a href="../ActiveResource.html">ActiveResource</a> objects to be
used as parameters in ActionPack URL generation.
</p>

<p class="source_link" id="M000999-show-link"><a onclick="toggle('M000999-source'); toggleText('M000999-link'); return false;" href="#" id="M000999-link">Show source...</a></p><div class="source" id="M000999-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 640</span>
640:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_param</span>
641:       <span class="ruby-identifier">id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>
642:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001007"><br/></a>
<div class="method_block"><h3>
<a href='#M001007'>


to_xml

(options={})

</a>
</h3>
<p>
A method to convert the the resource to an XML string.
</p>
<h4>Options</h4>
<p>
The <tt>options</tt> parameter is handed off to the <tt><a
href="Base.html#M001007">to_xml</a></tt> method on each attribute, so it
has the same options as the <tt><a href="Base.html#M001007">to_xml</a></tt>
methods in ActiveSupport.
</p>
<table>
<tr><td valign="top">indent:</td><td>Set the indent level for the XML output (default is +2+).

</td></tr>
<tr><td valign="top">dasherize:</td><td>Boolean option to determine whether or not element names should replace
underscores with dashes (default is <tt>false</tt>).

</td></tr>
<tr><td valign="top">skip_instruct:</td><td>Toggle skipping the +instruct!+ call on the XML builder that generates the
XML declaration (default is <tt>false</tt>).

</td></tr>
</table>
<h4>Examples</h4>
<pre>
  my_group = SubsidiaryGroup.find(:first)
  my_group.to_xml
  # =&gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  #    &lt;subsidiary_group&gt; [...] &lt;/subsidiary_group&gt;

  my_group.to_xml(:dasherize =&gt; true)
  # =&gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  #    &lt;subsidiary-group&gt; [...] &lt;/subsidiary-group&gt;

  my_group.to_xml(:skip_instruct =&gt; true)
  # =&gt; &lt;subsidiary_group&gt; [...] &lt;/subsidiary_group&gt;
</pre>

<p class="source_link" id="M001007-show-link"><a onclick="toggle('M001007-source'); toggleText('M001007-link'); return false;" href="#" id="M001007-link">Show source...</a></p><div class="source" id="M001007-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 792</span>
792:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">options</span>={})
793:       <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">to_xml</span>({<span class="ruby-identifier">:root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">element_name</span>}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>))
794:     <span class="ruby-keyword kw">end</span></pre></div>
</div>


<h1>Protected Instance Methods</h1>


<a class="small" name="M001017"><br/></a>
<div class="method_block"><h3>
<a href='#M001017'>


collection_path

(options = nil)

</a>
</h3>

<p class="source_link" id="M001017-show-link"><a onclick="toggle('M001017-source'); toggleText('M001017-link'); return false;" href="#" id="M001017-link">Show source...</a></p><div class="source" id="M001017-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 910</span>
910:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collection_path</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
911:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">collection_path</span>(<span class="ruby-identifier">options</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefix_options</span>)
912:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001011"><br/></a>
<div class="method_block"><h3>
<a href='#M001011'>


connection

(refresh = false)

</a>
</h3>

<p class="source_link" id="M001011-show-link"><a onclick="toggle('M001011-source'); toggleText('M001011-link'); return false;" href="#" id="M001011-link">Show source...</a></p><div class="source" id="M001011-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 876</span>
876:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>(<span class="ruby-identifier">refresh</span> = <span class="ruby-keyword kw">false</span>)
877:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection</span>(<span class="ruby-identifier">refresh</span>)
878:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001013"><br/></a>
<div class="method_block"><h3>
<a href='#M001013'>


create

()

</a>
</h3>
<p>
Create (i.e., <a href="Base.html#M001004">save</a> to the remote service)
the <a href="Base.html#M000995">new</a> resource.
</p>

<p class="source_link" id="M001013-show-link"><a onclick="toggle('M001013-source'); toggleText('M001013-link'); return false;" href="#" id="M001013-link">Show source...</a></p><div class="source" id="M001013-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 888</span>
888:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>
889:         <span class="ruby-identifier">returning</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">post</span>(<span class="ruby-identifier">collection_path</span>, <span class="ruby-identifier">to_xml</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">headers</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>
890:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">id_from_response</span>(<span class="ruby-identifier">response</span>)
891:           <span class="ruby-identifier">load_attributes_from_response</span>(<span class="ruby-identifier">response</span>)
892:         <span class="ruby-keyword kw">end</span>
893:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001016"><br/></a>
<div class="method_block"><h3>
<a href='#M001016'>


element_path

(options = nil)

</a>
</h3>

<p class="source_link" id="M001016-show-link"><a onclick="toggle('M001016-source'); toggleText('M001016-link'); return false;" href="#" id="M001016-link">Show source...</a></p><div class="source" id="M001016-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 906</span>
906:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
907:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefix_options</span>)
908:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001015"><br/></a>
<div class="method_block"><h3>
<a href='#M001015'>


id_from_response

(response)

</a>
</h3>
<p>
Takes a response from a typical <a href="Base.html#M000991">create</a> post
and pulls the ID out
</p>

<p class="source_link" id="M001015-show-link"><a onclick="toggle('M001015-source'); toggleText('M001015-link'); return false;" href="#" id="M001015-link">Show source...</a></p><div class="source" id="M001015-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 902</span>
902:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id_from_response</span>(<span class="ruby-identifier">response</span>)
903:         <span class="ruby-identifier">response</span>[<span class="ruby-value str">'Location'</span>][<span class="ruby-regexp re">/\/([^\/]*?)(\.\w+)?$/</span>, <span class="ruby-value">1</span>]
904:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001014"><br/></a>
<div class="method_block"><h3>
<a href='#M001014'>


load_attributes_from_response

(response)

</a>
</h3>

<p class="source_link" id="M001014-show-link"><a onclick="toggle('M001014-source'); toggleText('M001014-link'); return false;" href="#" id="M001014-link">Show source...</a></p><div class="source" id="M001014-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 895</span>
895:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_attributes_from_response</span>(<span class="ruby-identifier">response</span>)
896:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">response</span>[<span class="ruby-value str">'Content-Length'</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;0&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
897:           <span class="ruby-identifier">load</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">format</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>))
898:         <span class="ruby-keyword kw">end</span>
899:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001012"><br/></a>
<div class="method_block"><h3>
<a href='#M001012'>


update

()

</a>
</h3>
<p>
Update the resource on the remote service.
</p>

<p class="source_link" id="M001012-show-link"><a onclick="toggle('M001012-source'); toggleText('M001012-link'); return false;" href="#" id="M001012-link">Show source...</a></p><div class="source" id="M001012-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activeresource/lib/active_resource/base.rb, line 881</span>
881:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>
882:         <span class="ruby-identifier">returning</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">put</span>(<span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">prefix_options</span>), <span class="ruby-identifier">to_xml</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">headers</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">response</span><span class="ruby-operator">|</span>
883:           <span class="ruby-identifier">load_attributes_from_response</span>(<span class="ruby-identifier">response</span>)
884:         <span class="ruby-keyword kw">end</span>
885:       <span class="ruby-keyword kw">end</span></pre></div>
</div>





</div><div class="clear" id="footer">Generated on Jan 21, 2008 / Allison 2 &copy; 2007 <a href="http://cloudbur.st">Cloudburst, LLC</a></div></div></body></html>