<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Class: ActionMailer::Base</title><link type="text/css" href="../.././rdoc-style.css" media="screen" rel="stylesheet"/><script type="text/javascript">
// Allison template
// Copyright 2007, 2008 Cloudburst, LLC. Licensed under the AFL 3. See the included LICENSE file.

var href_base = '../.././rdoc-style.css'.replace(/(.*\/).*/, '$1'); // inline js is good for something  

function $(id) {
    if (document.getElementById)
      elem = document.getElementById(id);
    else if ( document.all )
      elem = eval("document.all." + id);
    else
      return false;
    return elem;
}

  function toggle(id) {
    elem = $(id);
    elemStyle = elem.style;   
    if (elemStyle.display == "block") {
      elemStyle.display = "none"
    } else {
      elemStyle.display = "block"
    }
    return true;
  }

  function toggleText(id) {
    elem = $(id)
    if (m = elem.innerHTML.match(/(Hide)(.*)/)) {
      elem.innerHTML = "Show" + m[2];
    } else if (m = elem.innerHTML.match(/(Show)(.*)/)) {
      elem.innerHTML = "Hide" + m[2];
    }
    return true;
  }

function span(s, klass) {
  return '<span class="' + klass + '">' + s + '</span>';
}
  
function highlightSymbols() {
  pres = document.getElementsByTagName('pre');
  for(var i = 0; i < pres.length; i++) {
    pre = pres[i];
    spans = pre.getElementsByTagName('span');
    for(var k = 0; k < spans.length; k++) {
      span = spans[k];
      if (span.className.match(/ruby-identifier/)) {
        if (span.innerHTML.match(/^:/)) {
          span.className += " ruby-symbol";
        }
      }
    }
  }
}

 function hasClass(obj) {
     var result = false;
     if (obj.getAttributeNode("class") != null) {
         result = obj.getAttributeNode("class").value;
     }
     return result;
  }   

 function stripe() {
    var even = true;
    var color = "#e4ebed";
    var tables = document.getElementsByTagName('table');
    if (tables.length == 0) { return; }
    for (var h = 0; h < tables.length; h++) {
        var trs = tables[h].getElementsByTagName("tr");
        for (var i = 0; i < trs.length; i++) {
          var tds = trs[i].getElementsByTagName("td");
            for (var j = 0; j < tds.length; j++) {       
              if (hasClass(tds[j]) != "first") {                
              var mytd = tds[j];
              if (even) {
                mytd.style.backgroundColor = color;
              }         
            }
          }
          even =  ! even;
      }
    }
  }
  
function ajaxGet(url) {
  url = (href_base + url).replace('/./', '/')
  var req = false;

  if (window.ActiveXObject) {
    try {
      // stupid hack because IE7 disables local Ajax with the native xmlhttprequest object
      // for security purposes. Yet ActiveX still works. Thanks, Microsoft. I hate you. Die.
      req = new ActiveXObject("MSXML2.XMLHTTP.3.0");
    } catch (e) {
      try {
        /* IE 6 and maybe 5, don't know, don't care */
        req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          req = false;
        }
      }
    }
  }
    
  /* real browsers */
  if (!req && window.XMLHttpRequest) {
    try {
      req = new XMLHttpRequest();
    } catch (e) {
      req = false;
    }
  } 
  
  if (req) {
    req.open('GET', url, false);
    req.send(null);
    return req.responseText;
  } else {
    return "Ajax error";  
  }
}


function addEvent(elm, evType, fn, useCapture) {
	if (elm.addEventListener) {
	  elm.addEventListener(evType, fn, useCapture);  
  	return true;
	} else if (elm.attachEvent) {
  	var r = elm.attachEvent('on' + evType, fn);  
	  return r;  
	} else {
  	elm['on' + evType] = fn;
	}
}

function insertIndices() {
  pages = ["class", "file", "method"]
  for (x in pages) { 
    $(pages[x]).innerHTML += ajaxGet('fr_' + pages[x] + '_index.html').replace(/(href=")/g, '$1' + href_base);
  }
  /* mouseoverify method links */
  links = $('method').getElementsByTagName('a');
  for (var x = 0; x < links.length; x++) {
    if (m = links[x].innerHTML.match(/(.*)\s\((.*)\)/)) {
      links[x].innerHTML = m[1] + '<br>';
      links[x].title = m[2];
    }
  }
  /* this is stupid */
  $('class').style.display = "block";
  $('file').style.display = "block";
  
  /* has to be here because IE7 does not guarantee the onLoad callback order */
  abbreviateIndicesInner(["class", "file"], 25, "a");
  /* same, linkTitle() depends on the class link list */
  linkTitle();
}

function abbreviateIndices() {
  var ids = ["defined_in", "child_of", "includes", "requires", "method", "methods"];
  abbreviateIndicesInner(ids, 25, 'a');
  abbreviateIndicesInner(ids, 25, 'span');
}

function abbreviateIndicesInner(indices, amount, tag) {
  for (var x = 0; x < indices.length; x++) { 
    var the_index = $(indices[x]);
    if (the_index) {
      links = the_index.getElementsByTagName(tag);
      for (var y = 0; y < links.length; y++) {
        var link = links[y];
        if (link.getElementsByTagName('span').length == 0 && link.getElementsByTagName('a').length == 0) {
          // avoid nesting
          link.innerHTML = link.innerHTML.replace(/<br>|\n/gi, '');
          link.title = link.innerHTML;
          link.innerHTML = abbreviate(link.innerHTML, amount) + '<br>';
        }
      }
    }
  }
}

function linkTitle() {
  
  /* grab the correct title element from the index */
  var index_page = ajaxGet('index.html');
  title_text = index_page.match(/<title>(.*)<\/title>/m)[1];
  document.title = title_text + " - " + document.title;
  var p = $('header').getElementsByTagName('p')[0]
  if (p.innerHTML.match(/^\s*$/)) {
    p.innerHTML = title_text;
  } else {
    p.innerHTML = title_text + ": " + p.innerHTML;
  }
  
  /* set the link properly */
  title_link = index_page.match(/<a\s+href="(.*?)"/)[1];
  var element = $('title');
  var item_type = "";
  var item_name = "";
  if (m = element.innerHTML.match(/(Class:|Module:|File:)\s*(.*)/)) {
    item_type = m[1];
    item_name = m[2];
  } else {
    item_name = element.innerHTML;
  }
  element.innerHTML = '<a href="' + href_base + title_link + '">' + item_type + " " + abbreviate(item_name, 45) + '</a>';
  element.getElementsByTagName('a')[0].title = item_name
  
  /* breadcrumb navigation */
  items = item_name.split("::");
  items_new = item_name.split("::");
  file_links = $('class').getElementsByTagName('a');
  for (var x = 0; x < items.length - 1; x++ ){
    var item = items[x];
    link = ("/classes/" + items.slice(0,x).join("/") + "/" + item + ".html").replace('//', '/');
    regex = new RegExp(RegExp.escape(link) + '$');
    for (var y = 0; y < file_links.length; y++) {
      if (file_links[y].href.match(regex)) {
         items_new[x] = '<a href="' + href_base + link + '">' + item + '</a>';
         break;
      }
    }  
  }
  $('item_name').innerHTML = item_type + ' ' + items_new.join(" :: ");
}

function abbreviate(s, size) {
  while (s.length > size) {
    var old_s = s;
    s = s.replace(/\s|\n/mg, '');
    s = s.replace(/([A-Z])[a-z]+/m, '$1');
    if (!s || old_s == s) {
      return "..." + s.substring(s.length - size, s.length);
    }
  }
  return s;
}

function disableSubmit(event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  if (keyCode == 13) {
    return false;
  } else {
    return true;
  }
}
  
function filterList(id, s, event) {
  
  /* some weak escaping */
  s = s.replace(/[^\w\d\.\_\-\/\:\=\[\]\?\!]/g, '');
  s = RegExp.escape(s);
  
  var show_all = false;
  if (s.match(/^\s*$/)) {
    show_all = true;
  }
  
  links = $(id).getElementsByTagName('a')
  regex = new RegExp(s, 'i');
  
  for (var x = 0; x < links.length; x++) {
    var link = links[x];
    if (show_all) {
      link.style.display = 'inline';
    } else {
       if (link.innerHTML.match(regex)) {        
         link.style.display = 'inline';
       } else {
         link.style.display = 'none';
       }
    }
  }
  return true;
}

RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

function hacks() {
  // show the spacer if necessary, 
  divs = document.getElementsByTagName('div');
  for(var x = 0; x < divs.length; x++) {
    if (divs[x].className && divs[x].className.match(/top/)) {
      document.getElementById('spacer').style.display = 'block';
    }
  }
  // remove extra colons from tables
  tds = document.getElementsByTagName('td');
  for(var x = 0; x < tds.length; x++) {
    str = tds[x].innerHTML
    if (str.charAt(str.length - 1) == ":") {
      tds[x].innerHTML = str.slice(0, str.length - 1)
    }
  }
}

addEvent(window, 'load', insertIndices, false);
addEvent(window, 'load', abbreviateIndices, false);
addEvent(window, 'load', stripe, false);
addEvent(window, 'load', highlightSymbols, false);
addEvent(window, 'load', hacks, false);
</script></head><body><div id="container"><div class="curve" id="preheader_curve_0"></div><div class="curve" id="preheader_curve_1"></div><div class="curve" id="preheader_curve_2"></div><div class="curve" id="preheader_curve_3"></div><div class="curve" id="preheader_curve_4"></div><div class="curve" id="preheader_curve_5"></div><div id="header"><p>
</p><span><h1 id="title">
Class: ActionMailer::Base
</h1></span>
</div><div class="clear"></div><div id="left">
<div class="navigation darker top" id="child_of"><h3>Child of</h3><span>

<a href='../Object.html'>
Object
</a>
</span></div>

<div class="navigation darker top" id="defined_in"><h3>Defined in</h3>

<a href="../../files/vendor/rails/actionmailer/lib/action_mailer/base_rb.html">vendor/rails/actionmailer/lib/action_mailer/base.rb</a>

</div>

<div class="navigation top" id="includes"><h3>Includes</h3>


AdvAttrAccessor<br/>




PartContainer<br/>




<a href='../ActionController/UrlWriter.html'>
ActionController::UrlWriter<br/>
</a>


</div>


<div class="navigation top" id="methods"><h3>Methods</h3>


<a href='#M001036'>
controller_name<br/>
</a>




<a href='#M001037'>
controller_path<br/>
</a>




<a href='#M001039'>
deliver<br/>
</a>




<a href='#M001042'>
deliver!<br/>
</a>




<a href='#M001035'>
mailer_name<br/>
</a>




<a href='#M001033'>
mailer_name<br/>
</a>




<a href='#M001034'>
mailer_name=<br/>
</a>




<a href='#M001038'>
receive<br/>
</a>




<a href='#M001040'>
register_template_extension<br/>
</a>




<a href='#M001041'>
template_root=<br/>
</a>


</div>
<div id="spacer"></div><div class="navigation darker index" id="class_wrapper"><div class="list_header"><h3>All classes</h3></div><div class="list_header_link"><a onclick="toggle('class'); toggleText('class_link'); return false;" href="#" id="class_link">Hide...</a></div><div class="clear"></div><div id="class"><form><label for="filter_class">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('class', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_class"></input></form></div></div><div class="navigation darker index" id="file_wrapper"><div class="list_header"><h3>All files</h3></div><div class="list_header_link"><a onclick="toggle('file'); toggleText('file_link'); return false;" href="#" id="file_link">Hide...</a></div><div class="clear"></div><div id="file"><form><label for="filter_file">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('file', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_file"></input></form></div></div><div class="navigation darker index" id="method_wrapper"><div class="list_header"><h3>All methods</h3></div><div class="list_header_link"><a onclick="toggle('method'); toggleText('method_link'); return false;" href="#" id="method_link">Show...</a></div><div class="clear"></div><div id="method"><form><label for="filter_method">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('method', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_method"></input></form></div></div></div><div id="content">
<h1 id="item_name">Class: ActionMailer::Base</h1>

<div id="description"><p>
ActionMailer allows you to send email from your application using a mailer
model and views.
</p>
<h1>Mailer Models</h1>
<p>
To use ActionMailer, you need to create a mailer model.
</p>
<pre>
  $ script/generate mailer Notifier
</pre>
<p>
The generated model inherits from <a
href="Base.html">ActionMailer::Base</a>. Emails are defined by creating
methods within the model which are then used to set variables to be used in
the mail template, to change options on the mail, or to add attachments.
</p>
<p>
Examples:
</p>
<pre>
 class Notifier &lt; ActionMailer::Base
   def signup_notification(recipient)
     recipients recipient.email_address_with_name
     from       &quot;system@example.com&quot;
     subject    &quot;New account information&quot;
     body       :account =&gt; recipient
   end
 end
</pre>
<p>
Mailer methods have the following configuration methods available.
</p>
<ul>
<li><tt>recipients</tt> - Takes one or more email addresses. These addresses
are where your email will be delivered to. Sets the <tt>To:</tt> header.

</li>
<li><tt>subject</tt> - The subject of your email. Sets the <tt>Subject:</tt>
header.

</li>
<li><tt>from</tt> - Who the email you are sending is from. Sets the
<tt>From:</tt> header.

</li>
<li><tt>cc</tt> - Takes one or more email addresses. These addresses will <a
href="Base.html#M001038">receive</a> a carbon copy of your email. Sets the
<tt>Cc:</tt> header.

</li>
<li><tt>bcc</tt> - Takes one or more email address. These addresses will <a
href="Base.html#M001038">receive</a> a blind carbon copy of your email.
Sets the <tt>Bcc</tt> header.

</li>
<li><tt>sent_on</tt> - The date on which the message was sent. If not set, the
header wil be set by the delivery agent.

</li>
<li><tt>content_type</tt> - Specify the content type of the message. Defaults
to <tt>text/plain</tt>.

</li>
<li><tt>headers</tt> - Specify additional headers to be set for the message,
e.g. <tt>headers &#8216;X-Mail-Count&#8217; =&gt; 107370</tt>.

</li>
</ul>
<p>
The <tt>body</tt> method has special behavior. It takes a hash which
generates an instance variable named after each key in the hash containing
the value that that key points to.
</p>
<p>
So, for example, <tt>body &quot;account&quot; =&gt; recipient</tt> would
result in an instance variable <tt>@account</tt> with the value of
<tt>recipient</tt> being accessible in the view.
</p>
<h1>Mailer views</h1>
<p>
Like ActionController, each mailer class has a corresponding view directory
in which each method of the class looks for a template with its name. To
define a template to be used with a mailing, create an <tt>.erb</tt> file
with the same name as the method in your mailer model. For example, in the
mailer defined above, the template at
<tt>app/views/notifier/signup_notification.erb</tt> would be used to
generate the email.
</p>
<p>
Variables defined in the model are accessible as instance variables in the
view.
</p>
<p>
Emails by default are sent in plain text, so a sample view for our model
example might look like this:
</p>
<pre>
  Hi &lt;%= @account.name %&gt;,
  Thanks for joining our service! Please check back often.
</pre>
<p>
You can even use Action Pack helpers in these views. For example:
</p>
<pre>
  You got a new note!
  &lt;%= truncate(note.body, 25) %&gt;
</pre>
<h1>Generating URLs for mailer views</h1>
<p>
If your view includes URLs from the application, you need to use url_for in
the mailing method instead of the view. Unlike controllers from Action
Pack, the mailer instance doesn&#8216;t have any context about the incoming
request. That&#8216;s why you need to jump this little hoop and supply all
the details needed for the URL. Example:
</p>
<pre>
   def signup_notification(recipient)
     recipients recipient.email_address_with_name
     from       &quot;system@example.com&quot;
     subject    &quot;New account information&quot;
     body       :account =&gt; recipient,
                :home_page =&gt; url_for(:host =&gt; &quot;example.com&quot;, :controller =&gt; &quot;welcome&quot;, :action =&gt; &quot;greeting&quot;)
   end
</pre>
<p>
You can now access @home_page in the template and get <a
href="http://example.com/welcome/greeting">example.com/welcome/greeting</a>.
</p>
<h1>Sending mail</h1>
<p>
Once a mailer action and template are defined, you can <a
href="Base.html#M001039">deliver</a> your message or create it and save it
for delivery later:
</p>
<pre>
  Notifier.deliver_signup_notification(david) # sends the email
  mail = Notifier.create_signup_notification(david)  # =&gt; a tmail object
  Notifier.deliver(mail)
</pre>
<p>
You never instantiate your mailer class. Rather, your delivery instance
methods are automatically wrapped in class methods that start with the word
<tt>deliver_</tt> followed by the name of the mailer method that you would
like to <a href="Base.html#M001039">deliver</a>. The
<tt>signup_notification</tt> method defined above is delivered by invoking
<tt>Notifier.deliver_signup_notification</tt>.
</p>
<h1>HTML email</h1>
<p>
To send mail as HTML, make sure your view (the <tt>.erb</tt> file)
generates HTML and set the content type to html.
</p>
<pre>
  class MyMailer &lt; ActionMailer::Base
    def signup_notification(recipient)
      recipients recipient.email_address_with_name
      subject    &quot;New account information&quot;
      body       &quot;account&quot; =&gt; recipient
      from       &quot;system@example.com&quot;
      content_type &quot;text/html&quot;   #    Here's where the magic happens
    end
  end
</pre>
<h1>Multipart email</h1>
<p>
You can explicitly specify multipart messages:
</p>
<pre>
  class ApplicationMailer &lt; ActionMailer::Base
    def signup_notification(recipient)
      recipients      recipient.email_address_with_name
      subject         &quot;New account information&quot;
      from            &quot;system@example.com&quot;

      part :content_type =&gt; &quot;text/html&quot;,
        :body =&gt; render_message(&quot;signup-as-html&quot;, :account =&gt; recipient)

      part &quot;text/plain&quot; do |p|
        p.body = render_message(&quot;signup-as-plain&quot;, :account =&gt; recipient)
        p.transfer_encoding = &quot;base64&quot;
      end
    end
  end
</pre>
<p>
Multipart messages can also be used implicitly because ActionMailer will
automatically detect and use multipart templates, where each template is
named after the name of the action, followed by the content type. Each such
detected template will be added as separate part to the message.
</p>
<p>
For example, if the following templates existed:
</p>
<ul>
<li>signup_notification.text.plain.erb

</li>
<li>signup_notification.text.html.erb

</li>
<li>signup_notification.text.xml.builder

</li>
<li>signup_notification.text.x-yaml.erb

</li>
</ul>
<p>
Each would be rendered and added as a separate part to the message, with
the corresponding content type. The same body hash is passed to each
template.
</p>
<h1>Attachments</h1>
<p>
Attachments can be added by using the <tt>attachment</tt> method.
</p>
<p>
Example:
</p>
<pre>
  class ApplicationMailer &lt; ActionMailer::Base
    # attachments
    def signup_notification(recipient)
      recipients      recipient.email_address_with_name
      subject         &quot;New account information&quot;
      from            &quot;system@example.com&quot;

      attachment :content_type =&gt; &quot;image/jpeg&quot;,
        :body =&gt; File.read(&quot;an-image.jpg&quot;)

      attachment &quot;application/pdf&quot; do |a|
        a.body = generate_your_pdf_here()
      end
    end
  end
</pre>
<h1>Configuration options</h1>
<p>
These options are specified on the class level, like
<tt>ActionMailer::Base.template_root = &quot;/my/templates&quot;</tt>
</p>
<ul>
<li><tt>template_root</tt> - template root determines the base from which
template references will be made.

</li>
<li><tt>logger</tt> - the logger is used for generating information on the
mailing run if available. Can be set to nil for no logging. Compatible with
both Ruby&#8216;s own <a href="../Logger.html">Logger</a> and Log4r
loggers.

</li>
<li><tt>smtp_settings</tt> - Allows detailed configuration for :smtp delivery
method:

<ul>
<li><tt>:address</tt> Allows you to use a remote mail server. Just change it
from its default &quot;localhost&quot; setting.

</li>
<li><tt>:port</tt> On the off chance that your mail server doesn&#8216;t run on
port 25, you can change it.

</li>
<li><tt>:domain</tt> If you need to specify a HELO domain, you can do it here.

</li>
<li><tt>:user_name</tt> If your mail server requires authentication, set the
username in this setting.

</li>
<li><tt>:password</tt> If your mail server requires authentication, set the
password in this setting.

</li>
<li><tt>:authentication</tt> If your mail server requires authentication, you
need to specify the authentication type here. This is a symbol and one of
:plain, :login, :cram_md5

</li>
</ul>
</li>
<li><tt>sendmail_settings</tt> - Allows you to override options for the
:sendmail delivery method

<ul>
<li><tt>:location</tt> The location of the sendmail executable, defaults to
&quot;/usr/sbin/sendmail&quot;

</li>
<li><tt>:arguments</tt> The command line arguments

</li>
</ul>
</li>
<li><tt>raise_delivery_errors</tt> - whether or not errors should be raised if
the email fails to be delivered.

</li>
<li><tt>delivery_method</tt> - Defines a delivery method. Possible values are
:smtp (default), :sendmail, and :test.

</li>
<li><tt>perform_deliveries</tt> - Determines whether deliver_* methods are
actually carried out. By default they are, but this can be turned off to
help functional testing.

</li>
<li><tt>deliveries</tt> - Keeps an array of all the emails sent out through the
Action Mailer with delivery_method :test. Most useful for unit and
functional testing.

</li>
<li><tt>default_charset</tt> - The default charset used for the body and to
encode the subject. Defaults to UTF-8. You can also pick a different
charset from inside a method with <tt>@charset</tt>.

</li>
<li><tt>default_content_type</tt> - The default content type used for the main
part of the message. Defaults to &quot;text/plain&quot;. You can also pick
a different content type from inside a method with <tt>@content_type</tt>.

</li>
<li><tt>default_mime_version</tt> - The default mime version used for the
message. Defaults to &quot;1.0&quot;. You can also pick a different value
from inside a method with <tt>@mime_version</tt>.

</li>
<li><tt>default_implicit_parts_order</tt> - When a message is built implicitly
(i.e. multiple parts are assembled from templates which specify the content
type in their filenames) this variable controls how the parts are ordered.
Defaults to [&quot;text/html&quot;, &quot;text/enriched&quot;,
&quot;text/plain&quot;]. Items that appear first in the array have higher
priority in the mail client and appear last in the mime encoded message.
You can also pick a different order from inside a method with
<tt>@implicit_parts_order</tt>.

</li>
</ul>
</div>




<p></p>




<h1>Attributes</h1><p><table><tr><th>Name</th><th>Read/write?</th></tr>
<tr>
<td class="highlight">mail</td>




<td class="normal">R</td>
</tr>
<tr>
<td class="highlight">mailer_name</td>




<td class="normal">W</td>
</tr>
</table></p>


<h1>Public Class Methods</h1>


<a class="small" name="M001039"><br/></a>
<div class="method_block"><h3>
<a href='#M001039'>


deliver

(mail)

</a>
</h3>
<p>
Deliver the given mail object directly. This can be used to <a
href="Base.html#M001039">deliver</a> a preconstructed mail object, like:
</p>
<pre>
  email = MyMailer.create_some_mail(parameters)
  email.set_some_obscure_header &quot;frobnicate&quot;
  MyMailer.deliver(email)
</pre>

<p class="source_link" id="M001039-show-link"><a onclick="toggle('M001039-source'); toggleText('M001039-link'); return false;" href="#" id="M001039-link">Show source...</a></p><div class="source" id="M001039-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 382</span>
382:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deliver</span>(<span class="ruby-identifier">mail</span>)
383:         <span class="ruby-identifier">new</span>.<span class="ruby-identifier">deliver!</span>(<span class="ruby-identifier">mail</span>)
384:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001035"><br/></a>
<div class="method_block"><h3>
<a href='#M001035'>


mailer_name

()

</a>
</h3>

<p class="source_link" id="M001035-show-link"><a onclick="toggle('M001035-source'); toggleText('M001035-link'); return false;" href="#" id="M001035-link">Show source...</a></p><div class="source" id="M001035-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 341</span>
341:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mailer_name</span>
342:         <span class="ruby-ivar">@mailer_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">underscore</span>
343:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001038"><br/></a>
<div class="method_block"><h3>
<a href='#M001038'>


receive

(raw_email)

</a>
</h3>
<p>
Receives a raw email, parses it into an email object, decodes it,
instantiates a new mailer, and passes the email object to the mailer
object&#8216;s <a href="Base.html#M001038">receive</a> method. If you want
your mailer to be able to process incoming messages, you&#8216;ll need to
implement a <a href="Base.html#M001038">receive</a> method that accepts the
email object as a parameter:
</p>
<pre>
  class MyMailer &lt; ActionMailer::Base
    def receive(mail)
      ...
    end
  end
</pre>

<p class="source_link" id="M001038-show-link"><a onclick="toggle('M001038-source'); toggleText('M001038-link'); return false;" href="#" id="M001038-link">Show source...</a></p><div class="source" id="M001038-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 369</span>
369:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">receive</span>(<span class="ruby-identifier">raw_email</span>)
370:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;Received mail:\n #{raw_email}&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">nil?</span>
371:         <span class="ruby-identifier">mail</span> = <span class="ruby-constant">TMail</span><span class="ruby-operator">::</span><span class="ruby-constant">Mail</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">raw_email</span>)
372:         <span class="ruby-identifier">mail</span>.<span class="ruby-identifier">base64_decode</span>
373:         <span class="ruby-identifier">new</span>.<span class="ruby-identifier">receive</span>(<span class="ruby-identifier">mail</span>)
374:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001040"><br/></a>
<div class="method_block"><h3>
<a href='#M001040'>


register_template_extension

(extension)

</a>
</h3>
<p>
Register a template extension so mailer templates written in a templating
language other than rhtml or rxml are supported. To use this, include in
your template-language plugin&#8216;s init code or on a per-application
basis, this can be invoked from config/environment.rb:
</p>
<pre>
  ActionMailer::Base.register_template_extension('haml')
</pre>

<p class="source_link" id="M001040-show-link"><a onclick="toggle('M001040-source'); toggleText('M001040-link'); return false;" href="#" id="M001040-link">Show source...</a></p><div class="source" id="M001040-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 393</span>
393:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_template_extension</span>(<span class="ruby-identifier">extension</span>)
394:         <span class="ruby-identifier">template_extensions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">extension</span>
395:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001041"><br/></a>
<div class="method_block"><h3>
<a href='#M001041'>


template_root=

(root)

</a>
</h3>

<p class="source_link" id="M001041-show-link"><a onclick="toggle('M001041-source'); toggleText('M001041-link'); return false;" href="#" id="M001041-link">Show source...</a></p><div class="source" id="M001041-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 397</span>
397:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">template_root=</span>(<span class="ruby-identifier">root</span>)
398:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-identifier">:template_root</span>, <span class="ruby-identifier">root</span>)
399:         <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">TemplateFinder</span>.<span class="ruby-identifier">process_view_paths</span>(<span class="ruby-identifier">root</span>)
400:       <span class="ruby-keyword kw">end</span></pre></div>
</div>


<h1>Public Instance Methods</h1>


<a class="small" name="M001036"><br/></a>
<div class="method_block"><h3>
<a href='#M001036'>


controller_name

(value = nil)

</a>
</h3>
<p>
Alias for <a href="Base.html#M001033">mailer_name</a>
</p>

</div>

<a class="small" name="M001037"><br/></a>
<div class="method_block"><h3>
<a href='#M001037'>


controller_path

(value = nil)

</a>
</h3>
<p>
Alias for <a href="Base.html#M001033">mailer_name</a>
</p>

</div>

<a class="small" name="M001042"><br/></a>
<div class="method_block"><h3>
<a href='#M001042'>


deliver!

(mail = @mail)

</a>
</h3>
<p>
Delivers a TMail::Mail object. By default, it delivers the cached mail
object (from the create! method). If no cached mail object exists, and no
alternate has been given as the parameter, this will fail.
</p>

<p class="source_link" id="M001042-show-link"><a onclick="toggle('M001042-source'); toggleText('M001042-link'); return false;" href="#" id="M001042-link">Show source...</a></p><div class="source" id="M001042-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 469</span>
469:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deliver!</span>(<span class="ruby-identifier">mail</span> = <span class="ruby-ivar">@mail</span>)
470:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;no mail object available for delivery!&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">mail</span>
471:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">nil?</span>
472:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>  <span class="ruby-node">&quot;Sent mail to #{recipients.to_a.join(', ')}&quot;</span>
473:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;\n#{mail.encoded}&quot;</span>
474:       <span class="ruby-keyword kw">end</span>
475: 
476:       <span class="ruby-keyword kw">begin</span>
477:         <span class="ruby-identifier">__send__</span>(<span class="ruby-node">&quot;perform_delivery_#{delivery_method}&quot;</span>, <span class="ruby-identifier">mail</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">perform_deliveries</span>
478:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>  <span class="ruby-comment cmt"># Net::SMTP errors or sendmail pipe errors</span>
479:         <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">raise_delivery_errors</span>
480:       <span class="ruby-keyword kw">end</span>
481: 
482:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">mail</span>
483:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001033"><br/></a>
<div class="method_block"><h3>
<a href='#M001033'>


mailer_name

(value = nil)

</a>
</h3>
<p>
Override the mailer name, which defaults to an inflected version of the
mailer&#8216;s class name. If you want to use a template in a non-standard
location, you can use this to specify that location.
</p>

<p class="source_link" id="M001033-show-link"><a onclick="toggle('M001033-source'); toggleText('M001033-link'); return false;" href="#" id="M001033-link">Show source...</a></p><div class="source" id="M001033-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 323</span>
323:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mailer_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>)
324:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>
325:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">mailer_name</span> = <span class="ruby-identifier">value</span>
326:       <span class="ruby-keyword kw">else</span>
327:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">mailer_name</span>
328:       <span class="ruby-keyword kw">end</span>
329:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001034"><br/></a>
<div class="method_block"><h3>
<a href='#M001034'>


mailer_name=

(value)

</a>
</h3>

<p class="source_link" id="M001034-show-link"><a onclick="toggle('M001034-source'); toggleText('M001034-link'); return false;" href="#" id="M001034-link">Show source...</a></p><div class="source" id="M001034-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionmailer/lib/action_mailer/base.rb, line 331</span>
331:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mailer_name=</span>(<span class="ruby-identifier">value</span>)
332:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">mailer_name</span> = <span class="ruby-identifier">value</span>
333:     <span class="ruby-keyword kw">end</span></pre></div>
</div>





</div><div class="clear" id="footer">Generated on Jan 21, 2008 / Allison 2 &copy; 2007 <a href="http://cloudbur.st">Cloudburst, LLC</a></div></div></body></html>