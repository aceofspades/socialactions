<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Class: ActiveRecord::Base</title><link type="text/css" href="../.././rdoc-style.css" media="screen" rel="stylesheet"/><script type="text/javascript">
// Allison template
// Copyright 2007, 2008 Cloudburst, LLC. Licensed under the AFL 3. See the included LICENSE file.

var href_base = '../.././rdoc-style.css'.replace(/(.*\/).*/, '$1'); // inline js is good for something  

function $(id) {
    if (document.getElementById)
      elem = document.getElementById(id);
    else if ( document.all )
      elem = eval("document.all." + id);
    else
      return false;
    return elem;
}

  function toggle(id) {
    elem = $(id);
    elemStyle = elem.style;   
    if (elemStyle.display == "block") {
      elemStyle.display = "none"
    } else {
      elemStyle.display = "block"
    }
    return true;
  }

  function toggleText(id) {
    elem = $(id)
    if (m = elem.innerHTML.match(/(Hide)(.*)/)) {
      elem.innerHTML = "Show" + m[2];
    } else if (m = elem.innerHTML.match(/(Show)(.*)/)) {
      elem.innerHTML = "Hide" + m[2];
    }
    return true;
  }

function span(s, klass) {
  return '<span class="' + klass + '">' + s + '</span>';
}
  
function highlightSymbols() {
  pres = document.getElementsByTagName('pre');
  for(var i = 0; i < pres.length; i++) {
    pre = pres[i];
    spans = pre.getElementsByTagName('span');
    for(var k = 0; k < spans.length; k++) {
      span = spans[k];
      if (span.className.match(/ruby-identifier/)) {
        if (span.innerHTML.match(/^:/)) {
          span.className += " ruby-symbol";
        }
      }
    }
  }
}

 function hasClass(obj) {
     var result = false;
     if (obj.getAttributeNode("class") != null) {
         result = obj.getAttributeNode("class").value;
     }
     return result;
  }   

 function stripe() {
    var even = true;
    var color = "#e4ebed";
    var tables = document.getElementsByTagName('table');
    if (tables.length == 0) { return; }
    for (var h = 0; h < tables.length; h++) {
        var trs = tables[h].getElementsByTagName("tr");
        for (var i = 0; i < trs.length; i++) {
          var tds = trs[i].getElementsByTagName("td");
            for (var j = 0; j < tds.length; j++) {       
              if (hasClass(tds[j]) != "first") {                
              var mytd = tds[j];
              if (even) {
                mytd.style.backgroundColor = color;
              }         
            }
          }
          even =  ! even;
      }
    }
  }
  
function ajaxGet(url) {
  url = (href_base + url).replace('/./', '/')
  var req = false;

  if (window.ActiveXObject) {
    try {
      // stupid hack because IE7 disables local Ajax with the native xmlhttprequest object
      // for security purposes. Yet ActiveX still works. Thanks, Microsoft. I hate you. Die.
      req = new ActiveXObject("MSXML2.XMLHTTP.3.0");
    } catch (e) {
      try {
        /* IE 6 and maybe 5, don't know, don't care */
        req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          req = false;
        }
      }
    }
  }
    
  /* real browsers */
  if (!req && window.XMLHttpRequest) {
    try {
      req = new XMLHttpRequest();
    } catch (e) {
      req = false;
    }
  } 
  
  if (req) {
    req.open('GET', url, false);
    req.send(null);
    return req.responseText;
  } else {
    return "Ajax error";  
  }
}


function addEvent(elm, evType, fn, useCapture) {
	if (elm.addEventListener) {
	  elm.addEventListener(evType, fn, useCapture);  
  	return true;
	} else if (elm.attachEvent) {
  	var r = elm.attachEvent('on' + evType, fn);  
	  return r;  
	} else {
  	elm['on' + evType] = fn;
	}
}

function insertIndices() {
  pages = ["class", "file", "method"]
  for (x in pages) { 
    $(pages[x]).innerHTML += ajaxGet('fr_' + pages[x] + '_index.html').replace(/(href=")/g, '$1' + href_base);
  }
  /* mouseoverify method links */
  links = $('method').getElementsByTagName('a');
  for (var x = 0; x < links.length; x++) {
    if (m = links[x].innerHTML.match(/(.*)\s\((.*)\)/)) {
      links[x].innerHTML = m[1] + '<br>';
      links[x].title = m[2];
    }
  }
  /* this is stupid */
  $('class').style.display = "block";
  $('file').style.display = "block";
  
  /* has to be here because IE7 does not guarantee the onLoad callback order */
  abbreviateIndicesInner(["class", "file"], 25, "a");
  /* same, linkTitle() depends on the class link list */
  linkTitle();
}

function abbreviateIndices() {
  var ids = ["defined_in", "child_of", "includes", "requires", "method", "methods"];
  abbreviateIndicesInner(ids, 25, 'a');
  abbreviateIndicesInner(ids, 25, 'span');
}

function abbreviateIndicesInner(indices, amount, tag) {
  for (var x = 0; x < indices.length; x++) { 
    var the_index = $(indices[x]);
    if (the_index) {
      links = the_index.getElementsByTagName(tag);
      for (var y = 0; y < links.length; y++) {
        var link = links[y];
        if (link.getElementsByTagName('span').length == 0 && link.getElementsByTagName('a').length == 0) {
          // avoid nesting
          link.innerHTML = link.innerHTML.replace(/<br>|\n/gi, '');
          link.title = link.innerHTML;
          link.innerHTML = abbreviate(link.innerHTML, amount) + '<br>';
        }
      }
    }
  }
}

function linkTitle() {
  
  /* grab the correct title element from the index */
  var index_page = ajaxGet('index.html');
  title_text = index_page.match(/<title>(.*)<\/title>/m)[1];
  document.title = title_text + " - " + document.title;
  var p = $('header').getElementsByTagName('p')[0]
  if (p.innerHTML.match(/^\s*$/)) {
    p.innerHTML = title_text;
  } else {
    p.innerHTML = title_text + ": " + p.innerHTML;
  }
  
  /* set the link properly */
  title_link = index_page.match(/<a\s+href="(.*?)"/)[1];
  var element = $('title');
  var item_type = "";
  var item_name = "";
  if (m = element.innerHTML.match(/(Class:|Module:|File:)\s*(.*)/)) {
    item_type = m[1];
    item_name = m[2];
  } else {
    item_name = element.innerHTML;
  }
  element.innerHTML = '<a href="' + href_base + title_link + '">' + item_type + " " + abbreviate(item_name, 45) + '</a>';
  element.getElementsByTagName('a')[0].title = item_name
  
  /* breadcrumb navigation */
  items = item_name.split("::");
  items_new = item_name.split("::");
  file_links = $('class').getElementsByTagName('a');
  for (var x = 0; x < items.length - 1; x++ ){
    var item = items[x];
    link = ("/classes/" + items.slice(0,x).join("/") + "/" + item + ".html").replace('//', '/');
    regex = new RegExp(RegExp.escape(link) + '$');
    for (var y = 0; y < file_links.length; y++) {
      if (file_links[y].href.match(regex)) {
         items_new[x] = '<a href="' + href_base + link + '">' + item + '</a>';
         break;
      }
    }  
  }
  $('item_name').innerHTML = item_type + ' ' + items_new.join(" :: ");
}

function abbreviate(s, size) {
  while (s.length > size) {
    var old_s = s;
    s = s.replace(/\s|\n/mg, '');
    s = s.replace(/([A-Z])[a-z]+/m, '$1');
    if (!s || old_s == s) {
      return "..." + s.substring(s.length - size, s.length);
    }
  }
  return s;
}

function disableSubmit(event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  if (keyCode == 13) {
    return false;
  } else {
    return true;
  }
}
  
function filterList(id, s, event) {
  
  /* some weak escaping */
  s = s.replace(/[^\w\d\.\_\-\/\:\=\[\]\?\!]/g, '');
  s = RegExp.escape(s);
  
  var show_all = false;
  if (s.match(/^\s*$/)) {
    show_all = true;
  }
  
  links = $(id).getElementsByTagName('a')
  regex = new RegExp(s, 'i');
  
  for (var x = 0; x < links.length; x++) {
    var link = links[x];
    if (show_all) {
      link.style.display = 'inline';
    } else {
       if (link.innerHTML.match(regex)) {        
         link.style.display = 'inline';
       } else {
         link.style.display = 'none';
       }
    }
  }
  return true;
}

RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

function hacks() {
  // show the spacer if necessary, 
  divs = document.getElementsByTagName('div');
  for(var x = 0; x < divs.length; x++) {
    if (divs[x].className && divs[x].className.match(/top/)) {
      document.getElementById('spacer').style.display = 'block';
    }
  }
  // remove extra colons from tables
  tds = document.getElementsByTagName('td');
  for(var x = 0; x < tds.length; x++) {
    str = tds[x].innerHTML
    if (str.charAt(str.length - 1) == ":") {
      tds[x].innerHTML = str.slice(0, str.length - 1)
    }
  }
}

addEvent(window, 'load', insertIndices, false);
addEvent(window, 'load', abbreviateIndices, false);
addEvent(window, 'load', stripe, false);
addEvent(window, 'load', highlightSymbols, false);
addEvent(window, 'load', hacks, false);
</script></head><body><div id="container"><div class="curve" id="preheader_curve_0"></div><div class="curve" id="preheader_curve_1"></div><div class="curve" id="preheader_curve_2"></div><div class="curve" id="preheader_curve_3"></div><div class="curve" id="preheader_curve_4"></div><div class="curve" id="preheader_curve_5"></div><div id="header"><p>
</p><span><h1 id="title">
Class: ActiveRecord::Base
</h1></span>
</div><div class="clear"></div><div id="left">
<div class="navigation darker top" id="child_of"><h3>Child of</h3><span>

<a href='../Object.html'>
Object
</a>
</span></div>

<div class="navigation darker top" id="defined_in"><h3>Defined in</h3>

<a href="../../files/vendor/rails/activerecord/lib/active_record/base_rb.html">vendor/rails/activerecord/lib/active_record/base.rb</a>


<a href="../../files/vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter_rb.html">vendor/rails/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb</a>


<a href="../../files/vendor/rails/activerecord/lib/active_record/connection_adapters/sqlite_adapter_rb.html">vendor/rails/activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb</a>


<a href="../../files/vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter_rb.html">vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb</a>


<a href="../../files/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification_rb.html">vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb</a>


<a href="../../files/vendor/rails/activerecord/lib/active_record/connection_adapters/sqlite3_adapter_rb.html">vendor/rails/activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb</a>

</div>



<div class="navigation top" id="methods"><h3>Methods</h3>


<a href='#M001621'>
==<br/>
</a>




<a href='#M001576'>
===<br/>
</a>




<a href='#M001611'>
[]<br/>
</a>




<a href='#M001612'>
[]=<br/>
</a>




<a href='#M001578'>
abstract_class?<br/>
</a>




<a href='#M001585'>
aggregate_mapping<br/>
</a>




<a href='#M001554'>
attr_accessible<br/>
</a>




<a href='#M001553'>
attr_protected<br/>
</a>




<a href='#M001555'>
attr_readonly<br/>
</a>




<a href='#M001616'>
attribute_for_inspect<br/>
</a>




<a href='#M001619'>
attribute_names<br/>
</a>




<a href='#M001617'>
attribute_present?<br/>
</a>




<a href='#M001614'>
attributes<br/>
</a>




<a href='#M001613'>
attributes=<br/>
</a>




<a href='#M001615'>
attributes_before_type_cast<br/>
</a>




<a href='#M001577'>
base_class<br/>
</a>




<a href='#M001600'>
becomes<br/>
</a>




<a href='#M001574'>
benchmark<br/>
</a>




<a href='#M001593'>
cache_key<br/>
</a>




<a href='#M001582'>
class_of_active_record_descendant<br/>
</a>




<a href='#M001631'>
clear_active_connections!<br/>
</a>




<a href='#M001632'>
clear_reloadable_connections!<br/>
</a>




<a href='#M001599'>
clone<br/>
</a>




<a href='#M001620'>
column_for_attribute<br/>
</a>




<a href='#M001569'>
column_names<br/>
</a>




<a href='#M001567'>
columns<br/>
</a>




<a href='#M001568'>
columns_hash<br/>
</a>




<a href='#M001581'>
compute_type<br/>
</a>




<a href='#M001635'>
connected?<br/>
</a>




<a href='#M001630'>
connection<br/>
</a>




<a href='#M001633'>
connection<br/>
</a>




<a href='#M001570'>
content_columns<br/>
</a>




<a href='#M001549'>
count_by_sql<br/>
</a>




<a href='#M001542'>
create<br/>
</a>




<a href='#M001606'>
decrement<br/>
</a>




<a href='#M001607'>
decrement!<br/>
</a>




<a href='#M001552'>
decrement_counter<br/>
</a>




<a href='#M001544'>
delete<br/>
</a>




<a href='#M001548'>
delete_all<br/>
</a>




<a href='#M001572'>
descends_from_active_record?<br/>
</a>




<a href='#M001598'>
destroy<br/>
</a>




<a href='#M001545'>
destroy<br/>
</a>




<a href='#M001547'>
destroy_all<br/>
</a>




<a href='#M001622'>
eql?<br/>
</a>




<a href='#M001634'>
establish_connection<br/>
</a>




<a href='#M001541'>
exists?<br/>
</a>




<a href='#M001586'>
expand_hash_conditions_for_aggregates<br/>
</a>




<a href='#M001539'>
find<br/>
</a>




<a href='#M001540'>
find_by_sql<br/>
</a>




<a href='#M001624'>
freeze<br/>
</a>




<a href='#M001625'>
frozen?<br/>
</a>




<a href='#M001618'>
has_attribute?<br/>
</a>




<a href='#M001623'>
hash<br/>
</a>




<a href='#M001591'>
id<br/>
</a>




<a href='#M001594'>
id=<br/>
</a>




<a href='#M001604'>
increment<br/>
</a>




<a href='#M001605'>
increment!<br/>
</a>




<a href='#M001551'>
increment_counter<br/>
</a>




<a href='#M001561'>
inheritance_column<br/>
</a>




<a href='#M001573'>
inspect<br/>
</a>




<a href='#M001628'>
inspect<br/>
</a>




<a href='#M001590'>
new<br/>
</a>




<a href='#M001595'>
new_record?<br/>
</a>




<a href='#M001560'>
primary_key<br/>
</a>




<a href='#M001627'>
readonly!<br/>
</a>




<a href='#M001626'>
readonly?<br/>
</a>




<a href='#M001556'>
readonly_attributes<br/>
</a>




<a href='#M001610'>
reload<br/>
</a>




<a href='#M001636'>
remove_connection<br/>
</a>




<a href='#M001629'>
require_mysql<br/>
</a>




<a href='#M001571'>
reset_column_information<br/>
</a>




<a href='#M001589'>
sanitize_sql_array<br/>
</a>




<a href='#M001584'>
sanitize_sql_for_assignment<br/>
</a>




<a href='#M001583'>
sanitize_sql_for_conditions<br/>
</a>




<a href='#M001588'>
sanitize_sql_hash_for_assignment<br/>
</a>




<a href='#M001587'>
sanitize_sql_hash_for_conditions<br/>
</a>




<a href='#M001596'>
save<br/>
</a>




<a href='#M001597'>
save!<br/>
</a>




<a href='#M001557'>
serialize<br/>
</a>




<a href='#M001558'>
serialized_attributes<br/>
</a>




<a href='#M001564'>
set_inheritance_column<br/>
</a>




<a href='#M001563'>
set_primary_key<br/>
</a>




<a href='#M001565'>
set_sequence_name<br/>
</a>




<a href='#M001562'>
set_table_name<br/>
</a>




<a href='#M001575'>
silence<br/>
</a>




<a href='#M001566'>
table_exists?<br/>
</a>




<a href='#M001559'>
table_name<br/>
</a>




<a href='#M001592'>
to_param<br/>
</a>




<a href='#M001608'>
toggle<br/>
</a>




<a href='#M001609'>
toggle!<br/>
</a>




<a href='#M001543'>
update<br/>
</a>




<a href='#M001546'>
update_all<br/>
</a>




<a href='#M001601'>
update_attribute<br/>
</a>




<a href='#M001602'>
update_attributes<br/>
</a>




<a href='#M001603'>
update_attributes!<br/>
</a>




<a href='#M001550'>
update_counters<br/>
</a>




<a href='#M001580'>
with_exclusive_scope<br/>
</a>




<a href='#M001579'>
with_scope<br/>
</a>


</div>
<div id="spacer"></div><div class="navigation darker index" id="class_wrapper"><div class="list_header"><h3>All classes</h3></div><div class="list_header_link"><a onclick="toggle('class'); toggleText('class_link'); return false;" href="#" id="class_link">Hide...</a></div><div class="clear"></div><div id="class"><form><label for="filter_class">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('class', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_class"></input></form></div></div><div class="navigation darker index" id="file_wrapper"><div class="list_header"><h3>All files</h3></div><div class="list_header_link"><a onclick="toggle('file'); toggleText('file_link'); return false;" href="#" id="file_link">Hide...</a></div><div class="clear"></div><div id="file"><form><label for="filter_file">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('file', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_file"></input></form></div></div><div class="navigation darker index" id="method_wrapper"><div class="list_header"><h3>All methods</h3></div><div class="list_header_link"><a onclick="toggle('method'); toggleText('method_link'); return false;" href="#" id="method_link">Show...</a></div><div class="clear"></div><div id="method"><form><label for="filter_method">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('method', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_method"></input></form></div></div></div><div id="content">
<h1 id="item_name">Class: ActiveRecord::Base</h1>

<div id="description"><p>
Active Record objects don&#8216;t specify their <a
href="Base.html#M001614">attributes</a> directly, but rather infer them
from the table definition with which they&#8216;re linked. Adding,
removing, and changing <a href="Base.html#M001614">attributes</a> and their
type is done directly in the database. Any change is instantly reflected in
the Active Record objects. The mapping that binds a given Active Record
class to a certain database table will happen automatically in most common
cases, but can be overwritten for the uncommon ones.
</p>
<p>
See the mapping rules in <a href="Base.html#M001559">table_name</a> and the
full example in <a href="../../files/README.html">files/README.html</a> for
more insight.
</p>
<h2>Creation</h2>
<p>
Active Records accept constructor parameters either in a <a
href="Base.html#M001623">hash</a> or as a block. The <a
href="Base.html#M001623">hash</a> method is especially useful when
you&#8216;re receiving the data from somewhere else, like an HTTP request.
It works like this:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;, :occupation =&gt; &quot;Code Artist&quot;)
  user.name # =&gt; &quot;David&quot;
</pre>
<p>
You can also use block initialization:
</p>
<pre>
  user = User.new do |u|
    u.name = &quot;David&quot;
    u.occupation = &quot;Code Artist&quot;
  end
</pre>
<p>
And of course you can just <a href="Base.html#M001542">create</a> a bare
object and specify the <a href="Base.html#M001614">attributes</a> after the
fact:
</p>
<pre>
  user = User.new
  user.name = &quot;David&quot;
  user.occupation = &quot;Code Artist&quot;
</pre>
<h2>Conditions</h2>
<p>
Conditions can either be specified as a string, array, or <a
href="Base.html#M001623">hash</a> representing the WHERE-part of an SQL
statement. The array form is to be used when the condition input is tainted
and requires sanitization. The string form can be used for statements that
don&#8216;t involve tainted data. The <a href="Base.html#M001623">hash</a>
form works much like the array form, except only equality and range is
possible. Examples:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def self.authenticate_unsafely(user_name, password)
      find(:first, :conditions =&gt; &quot;user_name = '#{user_name}' AND password = '#{password}'&quot;)
    end

    def self.authenticate_safely(user_name, password)
      find(:first, :conditions =&gt; [ &quot;user_name = ? AND password = ?&quot;, user_name, password ])
    end

    def self.authenticate_safely_simply(user_name, password)
      find(:first, :conditions =&gt; { :user_name =&gt; user_name, :password =&gt; password })
    end
  end
</pre>
<p>
The <tt>authenticate_unsafely</tt> method inserts the parameters directly
into the query and is thus susceptible to SQL-injection attacks if the
<tt>user_name</tt> and <tt>password</tt> parameters come directly from an
HTTP request. The <tt>authenticate_safely</tt> and
<tt>authenticate_safely_simply</tt> both will sanitize the
<tt>user_name</tt> and <tt>password</tt> before inserting them in the
query, which will ensure that an attacker can&#8216;t escape the query and
fake the login (or worse).
</p>
<p>
When using multiple parameters in the conditions, it can easily become hard
to read exactly what the fourth or fifth question mark is supposed to
represent. In those cases, you can resort to named bind variables instead.
That&#8216;s done by replacing the question marks with symbols and
supplying a <a href="Base.html#M001623">hash</a> with values for the
matching symbol keys:
</p>
<pre>
  Company.find(:first, :conditions =&gt; [
    &quot;id = :id AND name = :name AND division = :division AND created_at &gt; :accounting_date&quot;,
    { :id =&gt; 3, :name =&gt; &quot;37signals&quot;, :division =&gt; &quot;First&quot;, :accounting_date =&gt; '2005-01-01' }
  ])
</pre>
<p>
Similarly, a simple <a href="Base.html#M001623">hash</a> without a
statement will generate conditions based on equality with the SQL AND
operator. For instance:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :first_name =&gt; &quot;Harvey&quot;, :status =&gt; 1 })
  Student.find(:all, :conditions =&gt; params[:student])
</pre>
<p>
A range may be used in the <a href="Base.html#M001623">hash</a> to use the
SQL BETWEEN operator:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :grade =&gt; 9..12 })
</pre>
<h2>Overwriting default accessors</h2>
<p>
All column values are automatically available through basic accessors on
the Active Record object, but sometimes you want to specialize this
behavior. This can be done by overwriting the default accessors (using the
same name as the attribute) and calling read_attribute(attr_name) and
write_attribute(attr_name, value) to actually change things. Example:
</p>
<pre>
  class Song &lt; ActiveRecord::Base
    # Uses an integer of seconds to hold the length of the song

    def length=(minutes)
      write_attribute(:length, minutes * 60)
    end

    def length
      read_attribute(:length) / 60
    end
  end
</pre>
<p>
You can alternatively use self[:attribute]=(value) and self[:attribute]
instead of write_attribute(:attribute, value) and
read_attribute(:attribute) as a shorter form.
</p>
<h2>Attribute query methods</h2>
<p>
In addition to the basic accessors, query methods are also automatically
available on the Active Record object. Query methods allow you to test
whether an attribute value is present.
</p>
<p>
For example, an Active Record User with the <tt>name</tt> attribute has a
<tt>name?</tt> method that you can call to determine whether the user has a
name:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;)
  user.name? # =&gt; true

  anonymous = User.new(:name =&gt; &quot;&quot;)
  anonymous.name? # =&gt; false
</pre>
<h2>Accessing <a href="Base.html#M001614">attributes</a> before they have been typecasted</h2>
<p>
Sometimes you want to be able to read the raw attribute data without having
the column-determined typecast run its course first. That can be done by
using the &lt;attribute&gt;_before_type_cast accessors that all <a
href="Base.html#M001614">attributes</a> have. For example, if your Account
model has a balance attribute, you can call
account.balance_before_type_cast or account.id_before_type_cast.
</p>
<p>
This is especially useful in validation situations where the user might
supply a string for an integer field and you want to display the original
string back in an error message. Accessing the attribute normally would
typecast the string to 0, which isn&#8216;t what you want.
</p>
<h2>Dynamic attribute-based finders</h2>
<p>
Dynamic attribute-based finders are a cleaner way of getting (and/or
creating) objects by simple queries without turning to SQL. They work by
appending the name of an attribute to <tt>find_by_</tt> or
<tt>find_all_by_</tt>, so you get finders like Person.find_by_user_name,
Person.find_all_by_last_name, Payment.find_by_transaction_id. So instead of
writing <tt>Person.find(:first, :conditions =&gt; [&quot;user_name =
?&quot;, user_name])</tt>, you just do
<tt>Person.find_by_user_name(user_name)</tt>. And instead of writing
<tt>Person.find(:all, :conditions =&gt; [&quot;last_name = ?&quot;,
last_name])</tt>, you just do
<tt>Person.find_all_by_last_name(last_name)</tt>.
</p>
<p>
It&#8216;s also possible to use multiple <a
href="Base.html#M001614">attributes</a> in the same <a
href="Base.html#M001539">find</a> by separating them with
&quot;<em>and</em>&quot;, so you get finders like
<tt>Person.find_by_user_name_and_password</tt> or even
<tt>Payment.find_by_purchaser_and_state_and_country</tt>. So instead of
writing <tt>Person.find(:first, :conditions =&gt; [&quot;user_name = ? AND
password = ?&quot;, user_name, password])</tt>, you just do
<tt>Person.find_by_user_name_and_password(user_name, password)</tt>.
</p>
<p>
It&#8216;s even possible to use all the additional parameters to <a
href="Base.html#M001539">find</a>. For example, the full interface for
Payment.find_all_by_amount is actually Payment.find_all_by_amount(amount,
options). And the full interface to Person.find_by_user_name is actually
Person.find_by_user_name(user_name, options). So you could call
<tt>Payment.find_all_by_amount(50, :order =&gt;
&quot;created_on&quot;)</tt>.
</p>
<p>
The same dynamic finder style can be used to <a
href="Base.html#M001542">create</a> the object if it doesn&#8216;t already
exist. This dynamic finder is called with <tt>find_or_create_by_</tt> and
will return the object if it already exists and otherwise creates it, then
returns it. Example:
</p>
<pre>
  # No 'Summer' tag exists
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.create(:name =&gt; &quot;Summer&quot;)

  # Now the 'Summer' tag does exist
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.find_by_name(&quot;Summer&quot;)
</pre>
<p>
Use the <tt>find_or_initialize_by_</tt> finder if you want to return a <a
href="Base.html#M001590">new</a> record without saving it first. Example:
</p>
<pre>
  # No 'Winter' tag exists
  winter = Tag.find_or_initialize_by_name(&quot;Winter&quot;)
  winter.new_record? # true
</pre>
<p>
To <a href="Base.html#M001539">find</a> by a subset of the <a
href="Base.html#M001614">attributes</a> to be used for instantiating a <a
href="Base.html#M001590">new</a> object, pass a <a
href="Base.html#M001623">hash</a> instead of a list of parameters. For
example:
</p>
<pre>
  Tag.find_or_create_by_name(:name =&gt; &quot;rails&quot;, :creator =&gt; current_user)
</pre>
<p>
That will either <a href="Base.html#M001539">find</a> an existing tag named
&quot;rails&quot;, or <a href="Base.html#M001542">create</a> a <a
href="Base.html#M001590">new</a> one while setting the user that created
it.
</p>
<h2>Saving arrays, hashes, and other non-mappable objects in text <a href="Base.html#M001567">columns</a></h2>
<p>
Active Record can <a href="Base.html#M001557">serialize</a> any object in
text <a href="Base.html#M001567">columns</a> using YAML. To do so, you must
specify this with a call to the class method <tt><a
href="Base.html#M001557">serialize</a></tt>. This makes it possible to
store arrays, hashes, and other non-mappable objects without doing any
additional work. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences
  end

  user = User.create(:preferences =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large })
  User.find(user.id).preferences # =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large }
</pre>
<p>
You can also specify a class option as the second parameter that&#8216;ll
raise an exception if a serialized object is retrieved as a descendent of a
class not in the hierarchy. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences, Hash
  end

  user = User.create(:preferences =&gt; %w( one two three ))
  User.find(user.id).preferences    # raises SerializationTypeMismatch
</pre>
<h2>Single table inheritance</h2>
<p>
Active Record allows inheritance by storing the name of the class in a
column that by default is named &quot;type&quot; (can be changed by
overwriting <tt><a
href="Base.html#M001561">Base.inheritance_column</a></tt>). This means that
an inheritance looking like this:
</p>
<pre>
  class Company &lt; ActiveRecord::Base; end
  class Firm &lt; Company; end
  class Client &lt; Company; end
  class PriorityClient &lt; Client; end
</pre>
<p>
When you do Firm.create(:name =&gt; &quot;37signals&quot;), this record
will be saved in the companies table with type = &quot;Firm&quot;. You can
then fetch this row again using Company.find(:first, &quot;name =
&#8216;37signals&#8217;&quot;) and it will return a Firm object.
</p>
<p>
If you don&#8216;t have a type column defined in your table, single-table
inheritance won&#8216;t be triggered. In that case, it&#8216;ll work just
like normal subclasses with no special magic for differentiating between
them or reloading the right type with <a href="Base.html#M001539">find</a>.
</p>
<p>
Note, all the <a href="Base.html#M001614">attributes</a> for all the cases
are kept in the same table. Read more: <a
href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html">www.martinfowler.com/eaaCatalog/singleTableInheritance.html</a>
</p>
<h2>Connection to multiple databases in different models</h2>
<p>
Connections are usually created through <a
href="Base.html#M001634">ActiveRecord::Base.establish_connection</a> and
retrieved by <a href="Base.html#M001630">ActiveRecord::Base.connection</a>.
All classes inheriting from <a href="Base.html">ActiveRecord::Base</a> will
use this <a href="Base.html#M001630">connection</a>. But you can also set a
class-specific <a href="Base.html#M001630">connection</a>. For example, if
Course is an <a href="Base.html">ActiveRecord::Base</a>, but resides in a
different database, you can just say Course.establish_connection and Course
*and all its subclasses* will use this <a
href="Base.html#M001630">connection</a> instead.
</p>
<p>
This feature is implemented by keeping a <a
href="Base.html#M001630">connection</a> pool in <a
href="Base.html">ActiveRecord::Base</a> that is a Hash indexed by the
class. If a <a href="Base.html#M001630">connection</a> is requested, the
retrieve_connection method will go up the class-hierarchy until a <a
href="Base.html#M001630">connection</a> is found in the <a
href="Base.html#M001630">connection</a> pool.
</p>
<h2>Exceptions</h2>
<ul>
<li><tt><a href="ActiveRecordError.html">ActiveRecordError</a></tt> &#8212;
generic error class and superclass of all other errors raised by Active
Record

</li>
<li><tt><a href="AdapterNotSpecified.html">AdapterNotSpecified</a></tt> &#8212;
the configuration <a href="Base.html#M001623">hash</a> used in <tt><a
href="Base.html#M001634">establish_connection</a></tt> didn&#8216;t include
an <tt>:adapter</tt> key.

</li>
<li><tt><a href="AdapterNotFound.html">AdapterNotFound</a></tt> &#8212; the
<tt>:adapter</tt> key used in <tt><a
href="Base.html#M001634">establish_connection</a></tt> specified a
non-existent adapter (or a bad spelling of an existing one).

</li>
<li><tt><a href="AssociationTypeMismatch.html">AssociationTypeMismatch</a></tt>
&#8212; the object assigned to the association wasn&#8216;t of the type
specified in the association definition.

</li>
<li><tt><a
href="SerializationTypeMismatch.html">SerializationTypeMismatch</a></tt>
&#8212; the serialized object wasn&#8216;t of the class specified as the
second parameter.

</li>
<li><tt><a
href="ConnectionNotEstablished.html">ConnectionNotEstablished</a></tt>
&#8212; no <a href="Base.html#M001630">connection</a> has been established.
Use <tt><a href="Base.html#M001634">establish_connection</a></tt> before
querying.

</li>
<li><tt><a href="RecordNotFound.html">RecordNotFound</a></tt> &#8212; no record
responded to the <a href="Base.html#M001539">find</a>* method. Either the
row with the given ID doesn&#8216;t exist or the row didn&#8216;t meet the
additional restrictions.

</li>
<li><tt><a href="StatementInvalid.html">StatementInvalid</a></tt> &#8212; the
database server rejected the SQL statement. The precise error is added in
the message. Either the record with the given ID doesn&#8216;t exist or the
record didn&#8216;t meet the additional restrictions.

</li>
<li><tt>MultiparameterAssignmentErrors</tt> &#8212; collection of errors that
occurred during a mass assignment using the +<a
href="Base.html#M001613">attributes=</a>+ method. The <tt>errors</tt>
property of this exception contains an array of
<tt>AttributeAssignmentError</tt> objects that should be inspected to
determine which <a href="Base.html#M001614">attributes</a> triggered the
errors.

</li>
<li><tt>AttributeAssignmentError</tt> &#8212; an error occurred while doing a
mass assignment through the +<a href="Base.html#M001613">attributes=</a>+
method. You can <a href="Base.html#M001573">inspect</a> the
<tt>attribute</tt> property of the exception object to determine which
attribute triggered the error.

</li>
</ul>
<p>
<b>Note</b>: The <a href="Base.html#M001614">attributes</a> listed are
class-level <a href="Base.html#M001614">attributes</a> (accessible from
both the class and instance level). So it&#8216;s possible to assign a
logger to the class through Base.logger= which will then be used by all
instances in the current object space.
</p>
</div>




<p></p>


<h1>Constants</h1><p><table><tr><th>Name</th><th>Value</th></tr>
<tr>
<td class="highlight">VALID_FIND_OPTIONS</td>

<td class="normal">[ :conditions, :include, :joins, :limit, :offset,                                :order, :select, :readonly, :group, :from, :lock ]</td>



</tr>
</table></p>

<h1>Aliases</h1><p><table><tr><th>Old name</th><th>New name</th></tr>
<tr>


<td class="highlight">set_table_name</td>

<td class="normal">table_name=</td>

</tr>
<tr>


<td class="highlight">set_primary_key</td>

<td class="normal">primary_key=</td>

</tr>
<tr>


<td class="highlight">set_inheritance_column</td>

<td class="normal">inheritance_column=</td>

</tr>
<tr>


<td class="highlight">set_sequence_name</td>

<td class="normal">sequence_name=</td>

</tr>
<tr>


<td class="highlight">sanitize_sql_for_conditions</td>

<td class="normal">sanitize_sql</td>

</tr>
<tr>


<td class="highlight">sanitize_sql_hash_for_conditions</td>

<td class="normal">sanitize_sql_hash</td>

</tr>
<tr>


<td class="highlight">sanitize_sql</td>

<td class="normal">sanitize_conditions</td>

</tr>
</table></p>

<h1>Attributes</h1><p><table><tr><th>Name</th><th>Read/write?</th></tr>
<tr>
<td class="highlight">abstract_class</td>




<td class="normal">RW</td>
</tr>
</table></p>


<h1>Public Class Methods</h1>


<a class="small" name="M001576"><br/></a>
<div class="method_block"><h3>
<a href='#M001576'>


===

(object)

</a>
</h3>
<p>
Overwrite the default class equality method to provide support for
association proxies.
</p>

<p class="source_link" id="M001576-show-link"><a onclick="toggle('M001576-source'); toggleText('M001576-link'); return false;" href="#" id="M001576-link">Show source...</a></p><div class="source" id="M001576-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1221</span>
1221:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span>(<span class="ruby-identifier">object</span>)
1222:         <span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword kw">self</span>)
1223:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001578"><br/></a>
<div class="method_block"><h3>
<a href='#M001578'>


abstract_class?

()

</a>
</h3>
<p>
Returns whether this class is a base AR class. If A is a base class and B
descends from A, then B.base_class will return B.
</p>

<p class="source_link" id="M001578-show-link"><a onclick="toggle('M001578-source'); toggleText('M001578-link'); return false;" href="#" id="M001578-link">Show source...</a></p><div class="source" id="M001578-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1237</span>
1237:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abstract_class?</span>
1238:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@abstract_class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@abstract_class</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
1239:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001554"><br/></a>
<div class="method_block"><h3>
<a href='#M001554'>


attr_accessible

(*attributes)

</a>
</h3>
<p>
Similar to the <a href="Base.html#M001553">attr_protected</a> macro, this
protects <a href="Base.html#M001614">attributes</a> of your model from
mass-assignment, such as <tt><a href="Base.html#M001590">new</a>(<a
href="Base.html#M001614">attributes</a>)</tt> and <tt><a
href="Base.html#M001613">attributes=</a>(<a
href="Base.html#M001614">attributes</a>)</tt> however, it does it in the
opposite way. This locks all <a href="Base.html#M001614">attributes</a> and
only allows access to the <a href="Base.html#M001614">attributes</a>
specified. Assignment to <a href="Base.html#M001614">attributes</a> not in
this list will be ignored and need to be set using the direct writer
methods instead. This is meant to protect sensitive <a
href="Base.html#M001614">attributes</a> from being overwritten by URL/form
hackers. If you&#8216;d rather start from an all-open default and restrict
<a href="Base.html#M001614">attributes</a> as needed, have a look at <a
href="Base.html#M001553">attr_protected</a>.
</p>
<h4>Options</h4>
<p>
<tt>*<a href="Base.html#M001614">attributes</a></tt> A comma separated list
of symbols that represent <a href="Base.html#M001567">columns</a>
<em>not</em> to be protected
</p>
<h4>Examples</h4>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_accessible :name, :nickname
  end

  customer = Customer.new(:name =&gt; &quot;David&quot;, :nickname =&gt; &quot;Dave&quot;, :credit_rating =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { :name =&gt; &quot;Jolly fellow&quot;, :credit_rating =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>

<p class="source_link" id="M001554-show-link"><a onclick="toggle('M001554-source'); toggleText('M001554-link'); return false;" href="#" id="M001554-link">Show source...</a></p><div class="source" id="M001554-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 870</span>
870:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_accessible</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
871:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_accessible&quot;</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">accessible_attributes</span> <span class="ruby-operator">||</span> []))
872:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001553"><br/></a>
<div class="method_block"><h3>
<a href='#M001553'>


attr_protected

(*attributes)

</a>
</h3>
<p>
Attributes named in this macro are protected from mass-assignment, such as
<tt><a href="Base.html#M001590">new</a>(<a
href="Base.html#M001614">attributes</a>)</tt> and <tt><a
href="Base.html#M001613">attributes=</a>(<a
href="Base.html#M001614">attributes</a>)</tt>. Their assignment will simply
be ignored. Instead, you can use the direct writer methods to do
assignment. This is meant to protect sensitive <a
href="Base.html#M001614">attributes</a> from being overwritten by URL/form
hackers. Example:
</p>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_protected :credit_rating
  end

  customer = Customer.new(&quot;name&quot; =&gt; David, &quot;credit_rating&quot; =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { &quot;description&quot; =&gt; &quot;Jolly fellow&quot;, &quot;credit_rating&quot; =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>
<p>
To start from an all-closed default and enable <a
href="Base.html#M001614">attributes</a> as needed, have a look at <a
href="Base.html#M001554">attr_accessible</a>.
</p>

<p class="source_link" id="M001553-show-link"><a onclick="toggle('M001553-source'); toggleText('M001553-link'); return false;" href="#" id="M001553-link">Show source...</a></p><div class="source" id="M001553-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 836</span>
836:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_protected</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
837:         <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_protected&quot;</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">protected_attributes</span> <span class="ruby-operator">||</span> []))
838:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001555"><br/></a>
<div class="method_block"><h3>
<a href='#M001555'>


attr_readonly

(*attributes)

</a>
</h3>
<p>
Attributes listed as readonly can be set for a <a
href="Base.html#M001590">new</a> record, but will be ignored in database
updates afterwards.
</p>

<p class="source_link" id="M001555-show-link"><a onclick="toggle('M001555-source'); toggleText('M001555-link'); return false;" href="#" id="M001555-link">Show source...</a></p><div class="source" id="M001555-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 880</span>
880:        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_readonly</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
881:          <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_readonly&quot;</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)) <span class="ruby-operator">+</span> (<span class="ruby-identifier">readonly_attributes</span> <span class="ruby-operator">||</span> []))
882:        <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001577"><br/></a>
<div class="method_block"><h3>
<a href='#M001577'>


base_class

()

</a>
</h3>
<p>
Returns the base AR subclass that this class descends from. If A extends
AR::Base, A.base_class will return A. If B descends from A through some
arbitrarily deep hierarchy, B.base_class will return A.
</p>

<p class="source_link" id="M001577-show-link"><a onclick="toggle('M001577-source'); toggleText('M001577-link'); return false;" href="#" id="M001577-link">Show source...</a></p><div class="source" id="M001577-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1228</span>
1228:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base_class</span>
1229:         <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-keyword kw">self</span>)
1230:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001574"><br/></a>
<div class="method_block"><h3>
<a href='#M001574'>


benchmark

(title, log_level = Logger::DEBUG, use_silence = true) {|| ...}

</a>
</h3>
<p>
Log and <a href="Base.html#M001574">benchmark</a> multiple statements in a
single block. Example:
</p>
<pre>
  Project.benchmark(&quot;Creating project&quot;) do
    project = Project.create(&quot;name&quot; =&gt; &quot;stuff&quot;)
    project.create_manager(&quot;name&quot; =&gt; &quot;David&quot;)
    project.milestones &lt;&lt; Milestone.find(:all)
  end
</pre>
<p>
The <a href="Base.html#M001574">benchmark</a> is only recorded if the
current level of the logger is less than or equal to the
<tt>log_level</tt>, which makes it easy to include benchmarking statements
in production software that will remain inexpensive because the <a
href="Base.html#M001574">benchmark</a> will only be conducted if the log
level is low enough.
</p>
<p>
The logging of the multiple statements is turned off unless
<tt>use_silence</tt> is set to false.
</p>

<p class="source_link" id="M001574-show-link"><a onclick="toggle('M001574-source'); toggleText('M001574-link'); return false;" href="#" id="M001574-link">Show source...</a></p><div class="source" id="M001574-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1201</span>
1201:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">benchmark</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">log_level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-identifier">use_silence</span> = <span class="ruby-keyword kw">true</span>)
1202:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">log_level</span>
1203:           <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">nil</span>
1204:           <span class="ruby-identifier">seconds</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">realtime</span> { <span class="ruby-identifier">result</span> = <span class="ruby-identifier">use_silence</span> <span class="ruby-value">? </span><span class="ruby-identifier">silence</span> { <span class="ruby-keyword kw">yield</span> } <span class="ruby-operator">:</span> <span class="ruby-keyword kw">yield</span> }
1205:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">log_level</span>, <span class="ruby-node">&quot;#{title} (#{'%.5f' % seconds})&quot;</span>)
1206:           <span class="ruby-identifier">result</span>
1207:         <span class="ruby-keyword kw">else</span>
1208:           <span class="ruby-keyword kw">yield</span>
1209:         <span class="ruby-keyword kw">end</span>
1210:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001631"><br/></a>
<div class="method_block"><h3>
<a href='#M001631'>


clear_active_connections!

()

</a>
</h3>
<p>
Clears the cache which maps classes to connections.
</p>

<p class="source_link" id="M001631-show-link"><a onclick="toggle('M001631-source'); toggleText('M001631-link'); return false;" href="#" id="M001631-link">Show source...</a></p><div class="source" id="M001631-source"><pre>    <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 84</span>
84:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_active_connections!</span>
85:         <span class="ruby-identifier">clear_cache!</span>(<span class="ruby-ivar">@@active_connections</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
86:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">disconnect!</span>
87:         <span class="ruby-keyword kw">end</span>
88:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001632"><br/></a>
<div class="method_block"><h3>
<a href='#M001632'>


clear_reloadable_connections!

()

</a>
</h3>
<p>
Clears the cache which maps classes
</p>

<p class="source_link" id="M001632-show-link"><a onclick="toggle('M001632-source'); toggleText('M001632-link'); return false;" href="#" id="M001632-link">Show source...</a></p><div class="source" id="M001632-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 91</span>
 91:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_reloadable_connections!</span>
 92:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@@allow_concurrency</span>
 93:           <span class="ruby-comment cmt"># With concurrent connections @@active_connections is</span>
 94:           <span class="ruby-comment cmt"># a hash keyed by thread id.</span>
 95:           <span class="ruby-ivar">@@active_connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thread_id</span>, <span class="ruby-identifier">conns</span><span class="ruby-operator">|</span>
 96:             <span class="ruby-identifier">conns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
 97:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">requires_reloading?</span>
 98:                 <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">disconnect!</span>
 99:                 <span class="ruby-ivar">@@active_connections</span>[<span class="ruby-identifier">thread_id</span>].<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">name</span>)
100:               <span class="ruby-keyword kw">end</span>
101:             <span class="ruby-keyword kw">end</span>
102:           <span class="ruby-keyword kw">end</span>
103:         <span class="ruby-keyword kw">else</span>
104:           <span class="ruby-ivar">@@active_connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
105:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">requires_reloading?</span>
106:               <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">disconnect!</span>
107:               <span class="ruby-ivar">@@active_connections</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">name</span>)
108:             <span class="ruby-keyword kw">end</span>
109:           <span class="ruby-keyword kw">end</span>
110:         <span class="ruby-keyword kw">end</span>
111:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001569"><br/></a>
<div class="method_block"><h3>
<a href='#M001569'>


column_names

()

</a>
</h3>
<p>
Returns an array of column names as strings.
</p>

<p class="source_link" id="M001569-show-link"><a onclick="toggle('M001569-source'); toggleText('M001569-link'); return false;" href="#" id="M001569-link">Show source...</a></p><div class="source" id="M001569-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1109</span>
1109:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_names</span>
1110:         <span class="ruby-ivar">@column_names</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> }
1111:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001567"><br/></a>
<div class="method_block"><h3>
<a href='#M001567'>


columns

()

</a>
</h3>
<p>
Returns an array of column objects for the table associated with this
class.
</p>

<p class="source_link" id="M001567-show-link"><a onclick="toggle('M001567-source'); toggleText('M001567-link'); return false;" href="#" id="M001567-link">Show source...</a></p><div class="source" id="M001567-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1095</span>
1095:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns</span>
1096:         <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@columns</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@columns</span>
1097:           <span class="ruby-ivar">@columns</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-node">&quot;#{name} Columns&quot;</span>)
1098:           <span class="ruby-ivar">@columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">primary</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">primary_key</span> }
1099:         <span class="ruby-keyword kw">end</span>
1100:         <span class="ruby-ivar">@columns</span>
1101:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001568"><br/></a>
<div class="method_block"><h3>
<a href='#M001568'>


columns_hash

()

</a>
</h3>
<p>
Returns a <a href="Base.html#M001623">hash</a> of column objects for the
table associated with this class.
</p>

<p class="source_link" id="M001568-show-link"><a onclick="toggle('M001568-source'); toggleText('M001568-link'); return false;" href="#" id="M001568-link">Show source...</a></p><div class="source" id="M001568-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1104</span>
1104:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns_hash</span>
1105:         <span class="ruby-ivar">@columns_hash</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">column</span>; <span class="ruby-identifier">hash</span> }
1106:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001635"><br/></a>
<div class="method_block"><h3>
<a href='#M001635'>


connected?

()

</a>
</h3>
<p>
Returns true if a <a href="Base.html#M001630">connection</a> that&#8216;s
accessible to this class has already been opened.
</p>

<p class="source_link" id="M001635-show-link"><a onclick="toggle('M001635-source'); toggleText('M001635-link'); return false;" href="#" id="M001635-link">Show source...</a></p><div class="source" id="M001635-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 268</span>
268:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">connected?</span>
269:       <span class="ruby-identifier">active_connections</span>[<span class="ruby-identifier">active_connection_name</span>] <span class="ruby-operator">?</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
270:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001630"><br/></a>
<div class="method_block"><h3>
<a href='#M001630'>


connection

()

</a>
</h3>
<p>
Returns the <a href="Base.html#M001630">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M001630">connection</a> to do database work unrelated to
any of the specific Active Records.
</p>

<p class="source_link" id="M001630-show-link"><a onclick="toggle('M001630-source'); toggleText('M001630-link'); return false;" href="#" id="M001630-link">Show source...</a></p><div class="source" id="M001630-source"><pre>    <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 73</span>
73:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
74:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@active_connection_name</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">conn</span> = <span class="ruby-identifier">active_connections</span>[<span class="ruby-ivar">@active_connection_name</span>])
75:           <span class="ruby-identifier">conn</span>
76:         <span class="ruby-keyword kw">else</span>
77:           <span class="ruby-comment cmt"># retrieve_connection sets the cache key.</span>
78:           <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">retrieve_connection</span>
79:           <span class="ruby-identifier">active_connections</span>[<span class="ruby-ivar">@active_connection_name</span>] = <span class="ruby-identifier">conn</span>
80:         <span class="ruby-keyword kw">end</span>
81:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001570"><br/></a>
<div class="method_block"><h3>
<a href='#M001570'>


content_columns

()

</a>
</h3>
<p>
Returns an array of column objects where the primary <a
href="Base.html#M001591">id</a>, all <a
href="Base.html#M001567">columns</a> ending in &quot;_id&quot; or
&quot;_count&quot;, and <a href="Base.html#M001567">columns</a> used for
single table inheritance have been removed.
</p>

<p class="source_link" id="M001570-show-link"><a onclick="toggle('M001570-source'); toggleText('M001570-link'); return false;" href="#" id="M001570-link">Show source...</a></p><div class="source" id="M001570-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1115</span>
1115:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_columns</span>
1116:         <span class="ruby-ivar">@content_columns</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">primary</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/(_id|_count)$/</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">inheritance_column</span> }
1117:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001549"><br/></a>
<div class="method_block"><h3>
<a href='#M001549'>


count_by_sql

(sql)

</a>
</h3>
<p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part. The use of this method should be restricted to
complicated SQL queries that can&#8216;t be executed using the
ActiveRecord::Calculations class methods. Look into those before using
this.
</p>
<h4>Options</h4>
<p>
<tt>sql</tt>: An SQL statement which should return a count query from the
database, see the example below
</p>
<h4>Examples</h4>
<pre>
  Product.count_by_sql &quot;SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id&quot;
</pre>

<p class="source_link" id="M001549-show-link"><a onclick="toggle('M001549-source'); toggleText('M001549-link'); return false;" href="#" id="M001549-link">Show source...</a></p><div class="source" id="M001549-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 746</span>
746:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count_by_sql</span>(<span class="ruby-identifier">sql</span>)
747:         <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">sanitize_conditions</span>(<span class="ruby-identifier">sql</span>)
748:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Count&quot;</span>).<span class="ruby-identifier">to_i</span>
749:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001542"><br/></a>
<div class="method_block"><h3>
<a href='#M001542'>


create

(attributes = nil)

</a>
</h3>
<p>
Creates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<p>
The <tt><a href="Base.html#M001614">attributes</a></tt> parameter can be
either be a Hash or an Array of Hashes. These Hashes describe the <a
href="Base.html#M001614">attributes</a> on the objects that are to be
created.
</p>
<h4>Examples</h4>
<pre>
  # Create a single new object
  User.create(:first_name =&gt; 'Jamie')
  # Create an Array of new objects
  User.create([{:first_name =&gt; 'Jamie'}, {:first_name =&gt; 'Jeremy'}])
</pre>

<p class="source_link" id="M001542-show-link"><a onclick="toggle('M001542-source'); toggleText('M001542-link'); return false;" href="#" id="M001542-link">Show source...</a></p><div class="source" id="M001542-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>)
581:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
582:           <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attr</span>) }
583:         <span class="ruby-keyword kw">else</span>
584:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)
585:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">save</span>
586:           <span class="ruby-identifier">object</span>
587:         <span class="ruby-keyword kw">end</span>
588:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001552"><br/></a>
<div class="method_block"><h3>
<a href='#M001552'>


decrement_counter

(counter_name, id)

</a>
</h3>
<p>
Decrement a number field by one, usually representing a count.
</p>
<p>
This works the same as <a href="Base.html#M001551">increment_counter</a>
but reduces the column value by 1 instead of increasing it.
</p>
<h4>Options</h4>
<p>
<tt>counter_name</tt> The name of the field that should be decremented
<tt><a href="Base.html#M001591">id</a></tt> The <a
href="Base.html#M001591">id</a> of the object that should be decremented
</p>
<h4>Examples</h4>
<pre>
  # Decrement the post_count column for the record with an id of 5
  DiscussionBoard.decrement_counter(:post_count, 5)
</pre>

<p class="source_link" id="M001552-show-link"><a onclick="toggle('M001552-source'); toggleText('M001552-link'); return false;" href="#" id="M001552-link">Show source...</a></p><div class="source" id="M001552-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 814</span>
814:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement_counter</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">id</span>)
815:         <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counter_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>)
816:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001544"><br/></a>
<div class="method_block"><h3>
<a href='#M001544'>


delete

(id)

</a>
</h3>
<p>
Delete an object (or multiple objects) where the <tt><a
href="Base.html#M001591">id</a></tt> given matches the <a
href="Base.html#M001560">primary_key</a>. A SQL <tt>DELETE</tt> command is
executed on the database which means that no callbacks are fired off
running this. This is an efficient method of deleting records that
don&#8216;t need cleaning up after or other actions to be taken.
</p>
<p>
Objects are <em>not</em> instantiated with this method.
</p>
<h4>Options</h4>
<p>
<tt><a href="Base.html#M001591">id</a></tt> Can be either an Integer or an
Array of Integers
</p>
<h4>Examples</h4>
<pre>
  # Delete a single object
  Todo.delete(1)

  # Delete multiple objects
  todos = [1,2,3]
  Todo.delete(todos)
</pre>

<p class="source_link" id="M001544-show-link"><a onclick="toggle('M001544-source'); toggleText('M001544-link'); return false;" href="#" id="M001544-link">Show source...</a></p><div class="source" id="M001544-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 635</span>
635:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>)
636:         <span class="ruby-identifier">delete_all</span>([ <span class="ruby-node">&quot;#{connection.quote_column_name(primary_key)} IN (?)&quot;</span>, <span class="ruby-identifier">id</span> ])
637:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001548"><br/></a>
<div class="method_block"><h3>
<a href='#M001548'>


delete_all

(conditions = nil)

</a>
</h3>
<p>
Deletes the records matching <tt>conditions</tt> without instantiating the
records first, and hence not calling the <a
href="Base.html#M001545">destroy</a> method and invoking callbacks. This is
a single SQL query, much more efficient than <a
href="Base.html#M001547">destroy_all</a>.
</p>
<h4>Options</h4>
<p>
<tt>conditions</tt> Conditions are specified the same way as with <tt><a
href="Base.html#M001539">find</a></tt> method.
</p>
<h4>Example</h4>
<pre>
  Post.delete_all &quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;
</pre>
<p>
This deletes the affected posts all at once with a single DELETE query. If
you need to <a href="Base.html#M001545">destroy</a> dependent associations
or call your before_ or after_destroy callbacks, use the <tt><a
href="Base.html#M001547">destroy_all</a></tt> method instead.
</p>

<p class="source_link" id="M001548-show-link"><a onclick="toggle('M001548-source'); toggleText('M001548-link'); return false;" href="#" id="M001548-link">Show source...</a></p><div class="source" id="M001548-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 729</span>
729:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
730:         <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;DELETE FROM #{quoted_table_name} &quot;</span>
731:         <span class="ruby-identifier">add_conditions!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">:find</span>))
732:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Delete all&quot;</span>)
733:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001572"><br/></a>
<div class="method_block"><h3>
<a href='#M001572'>


descends_from_active_record?

()

</a>
</h3>
<p>
True if this isn&#8216;t a concrete subclass needing a STI type condition.
</p>

<p class="source_link" id="M001572-show-link"><a onclick="toggle('M001572-source'); toggleText('M001572-link'); return false;" href="#" id="M001572-link">Show source...</a></p><div class="source" id="M001572-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1151</span>
1151:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descends_from_active_record?</span>
1152:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
1153:           <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1154:         <span class="ruby-keyword kw">else</span>
1155:           <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">inheritance_column</span>)
1156:         <span class="ruby-keyword kw">end</span>
1157:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001545"><br/></a>
<div class="method_block"><h3>
<a href='#M001545'>


destroy

(id)

</a>
</h3>
<p>
Destroy an object (or multiple objects) that has the given <a
href="Base.html#M001591">id</a>, the object is instantiated first,
therefore all callbacks and filters are fired off before the object is
deleted. This method is less efficient than ActiveRecord#delete but allows
cleanup methods and other actions to be run.
</p>
<p>
This essentially finds the object (or multiple objects) with the given <a
href="Base.html#M001591">id</a>, creates a <a
href="Base.html#M001590">new</a> object from the <a
href="Base.html#M001614">attributes</a>, and then calls <a
href="Base.html#M001545">destroy</a> on it.
</p>
<h4>Options</h4>
<p>
<tt><a href="Base.html#M001591">id</a></tt> Can be either an Integer or an
Array of Integers
</p>
<h4>Examples</h4>
<pre>
  # Destroy a single object
  Todo.destroy(1)

  # Destroy multiple objects
  todos = [1,2,3]
  Todo.destroy(todos)
</pre>

<p class="source_link" id="M001545-show-link"><a onclick="toggle('M001545-source'); toggleText('M001545-link'); return false;" href="#" id="M001545-link">Show source...</a></p><div class="source" id="M001545-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 658</span>
658:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">id</span>)
659:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
660:           <span class="ruby-identifier">id</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">one_id</span>) }
661:         <span class="ruby-keyword kw">else</span>
662:           <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>).<span class="ruby-identifier">destroy</span>
663:         <span class="ruby-keyword kw">end</span>
664:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001547"><br/></a>
<div class="method_block"><h3>
<a href='#M001547'>


destroy_all

(conditions = nil)

</a>
</h3>
<p>
Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling the <a href="Base.html#M001545">destroy</a> method. This
means at least 2*N database queries to <a
href="Base.html#M001545">destroy</a> N records, so avoid <a
href="Base.html#M001547">destroy_all</a> if you are deleting many records.
If you want to simply <a href="Base.html#M001544">delete</a> records
without worrying about dependent associations or callbacks, use the much
faster <tt><a href="Base.html#M001548">delete_all</a></tt> method instead.
</p>
<h4>Options</h4>
<p>
<tt>conditions</tt> Conditions are specified the same way as with <tt><a
href="Base.html#M001539">find</a></tt> method.
</p>
<h4>Example</h4>
<pre>
  Person.destroy_all &quot;last_login &lt; '2004-04-04'&quot;
</pre>
<p>
This loads and destroys each person one by one, including its dependent
associations and before_ and after_destroy callbacks.
</p>

<p class="source_link" id="M001547-show-link"><a onclick="toggle('M001547-source'); toggleText('M001547-link'); return false;" href="#" id="M001547-link">Show source...</a></p><div class="source" id="M001547-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 711</span>
711:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>)
712:         <span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">destroy</span> }
713:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001634"><br/></a>
<div class="method_block"><h3>
<a href='#M001634'>


establish_connection

(spec = nil)

</a>
</h3>
<p>
Establishes the <a href="Base.html#M001630">connection</a> to the database.
Accepts a <a href="Base.html#M001623">hash</a> as input where the :adapter
key must be specified with the name of a database adapter (in lower-case)
example for regular databases (MySQL, Postgresql, etc):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter  =&gt; &quot;mysql&quot;,
    :host     =&gt; &quot;localhost&quot;,
    :username =&gt; &quot;myuser&quot;,
    :password =&gt; &quot;mypass&quot;,
    :database =&gt; &quot;somedatabase&quot;
  )
</pre>
<p>
Example for SQLite database:
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter =&gt; &quot;sqlite&quot;,
    :database  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
Also accepts keys as strings (for parsing from yaml for example):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    &quot;adapter&quot; =&gt; &quot;sqlite&quot;,
    &quot;database&quot;  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
The exceptions <a href="AdapterNotSpecified.html">AdapterNotSpecified</a>,
<a href="AdapterNotFound.html">AdapterNotFound</a> and ArgumentError may be
returned on an error.
</p>

<p class="source_link" id="M001634-show-link"><a onclick="toggle('M001634-source'); toggleText('M001634-link'); return false;" href="#" id="M001634-link">Show source...</a></p><div class="source" id="M001634-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 204</span>
204:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">spec</span> = <span class="ruby-keyword kw">nil</span>)
205:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">spec</span>
206:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
207:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">RAILS_ENV</span>
208:           <span class="ruby-identifier">establish_connection</span>(<span class="ruby-constant">RAILS_ENV</span>)
209:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ConnectionSpecification</span>
210:           <span class="ruby-identifier">clear_active_connection_name</span>
211:           <span class="ruby-ivar">@active_connection_name</span> = <span class="ruby-identifier">name</span>
212:           <span class="ruby-ivar">@@defined_connections</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">spec</span>
213:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span>, <span class="ruby-constant">String</span>
214:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_s</span>]
215:             <span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">configuration</span>)
216:           <span class="ruby-keyword kw">else</span>
217:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span>, <span class="ruby-node">&quot;#{spec} database is not configured&quot;</span>
218:           <span class="ruby-keyword kw">end</span>
219:         <span class="ruby-keyword kw">else</span>
220:           <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">symbolize_keys</span>
221:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:adapter</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotSpecified</span>, <span class="ruby-value str">&quot;database configuration does not specify adapter&quot;</span> <span class="ruby-keyword kw">end</span>
222: 
223:           <span class="ruby-keyword kw">begin</span>
224:             <span class="ruby-identifier">require</span> <span class="ruby-value str">'rubygems'</span>
225:             <span class="ruby-identifier">gem</span> <span class="ruby-node">&quot;activerecord-#{spec[:adapter]}-adapter&quot;</span>
226:             <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;active_record/connection_adapters/#{spec[:adapter]}_adapter&quot;</span>
227:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
228:             <span class="ruby-keyword kw">begin</span>
229:               <span class="ruby-identifier">require</span> <span class="ruby-node">&quot;active_record/connection_adapters/#{spec[:adapter]}_adapter&quot;</span>
230:             <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
231:               <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Please install the #{spec[:adapter]} adapter: `gem install activerecord-#{spec[:adapter]}-adapter` (#{$!})&quot;</span>
232:             <span class="ruby-keyword kw">end</span>
233:           <span class="ruby-keyword kw">end</span>
234: 
235:           <span class="ruby-identifier">adapter_method</span> = <span class="ruby-node">&quot;#{spec[:adapter]}_connection&quot;</span>
236:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">adapter_method</span>)
237:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">AdapterNotFound</span>, <span class="ruby-node">&quot;database configuration specifies nonexistent #{spec[:adapter]} adapter&quot;</span>
238:           <span class="ruby-keyword kw">end</span>
239: 
240:           <span class="ruby-identifier">remove_connection</span>
241:           <span class="ruby-identifier">establish_connection</span>(<span class="ruby-constant">ConnectionSpecification</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">adapter_method</span>))
242:       <span class="ruby-keyword kw">end</span>
243:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001541"><br/></a>
<div class="method_block"><h3>
<a href='#M001541'>


exists?

(id_or_conditions)

</a>
</h3>
<p>
Checks whether a record exists in the database that matches conditions
given. These conditions can either be a single integer representing a
primary key <a href="Base.html#M001591">id</a> to be found, or a condition
to be matched like using ActiveRecord#find.
</p>
<p>
The <tt>id_or_conditions</tt> parameter can be an Integer or a String if
you want to search the primary key column of the table for a matching <a
href="Base.html#M001591">id</a>, or if you&#8216;re looking to match
against a condition you can use an Array or a Hash.
</p>
<p>
Possible gotcha: You can&#8216;t pass in a condition as a string e.g.
&quot;name = &#8216;Jamie&#8217;&quot;, this would be sanitized and then
queried against the primary key column as &quot;<a
href="Base.html#M001591">id</a> = &#8216;name = \&#8217;Jamie&quot;
</p>
<h4>Examples</h4>
<pre>
  Person.exists?(5)
  Person.exists?('5')
  Person.exists?(:name =&gt; &quot;David&quot;)
  Person.exists?(['name LIKE ?', &quot;%#{query}%&quot;])
</pre>

<p class="source_link" id="M001541-show-link"><a onclick="toggle('M001541-source'); toggleText('M001541-link'); return false;" href="#" id="M001541-link">Show source...</a></p><div class="source" id="M001541-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 558</span>
558:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">id_or_conditions</span>)
559:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(
560:           <span class="ruby-identifier">construct_finder_sql</span>(
561:             <span class="ruby-identifier">:select</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{quoted_table_name}.#{primary_key}&quot;</span>, 
562:             <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">expand_id_conditions</span>(<span class="ruby-identifier">id_or_conditions</span>), 
563:             <span class="ruby-identifier">:limit</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
564:           ), 
565:           <span class="ruby-node">&quot;#{name} Exists&quot;</span>
566:         ).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
567:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001539"><br/></a>
<div class="method_block"><h3>
<a href='#M001539'>


find

(*args)

</a>
</h3>
<p>
Find operates with four different retrieval approaches:
</p>
<ul>
<li>Find by <a href="Base.html#M001591">id</a>: This can either be a specific
<a href="Base.html#M001591">id</a> (1), a list of ids (1, 5, 6), or an
array of ids ([5, 6, 10]). If no record can be found for all of the listed
ids, then <a href="RecordNotFound.html">RecordNotFound</a> will be raised.

</li>
<li>Find first: This will return the first record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, nil is returned.

</li>
<li>Find last: This will return the last record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can be matched, nil is returned.

</li>
<li>Find all: This will return all the records matched by the options used. If
no records are found, an empty array is returned.

</li>
</ul>
<p>
All approaches accept an options <a href="Base.html#M001623">hash</a> as
their last parameter. The options are:
</p>
<ul>
<li><tt>:conditions</tt>: An SQL fragment like &quot;administrator = 1&quot; or
[ &quot;user_name = ?&quot;, username ]. See conditions in the intro.

</li>
<li><tt>:order</tt>: An SQL fragment like &quot;created_at DESC, name&quot;.

</li>
<li><tt>:group</tt>: An attribute name by which the result should be grouped.
Uses the GROUP BY SQL-clause.

</li>
<li><tt>:limit</tt>: An integer determining the limit on the number of rows
that should be returned.

</li>
<li><tt>:offset</tt>: An integer determining the offset from where the rows
should be fetched. So at 5, it would skip rows 0 through 4.

</li>
<li><tt>:joins</tt>: Either an SQL fragment for additional joins like
&quot;LEFT JOIN comments ON comments.post_id = <a
href="Base.html#M001591">id</a>&quot; (rarely needed) or named associations
in the same form used for the :include option, which will perform an INNER
JOIN on the associated table(s). If the value is a string, then the records
will be returned read-only since they will have <a
href="Base.html#M001614">attributes</a> that do not correspond to the
table&#8216;s <a href="Base.html#M001567">columns</a>. Pass :readonly =&gt;
false to override.

</li>
<li><tt>:include</tt>: Names associations that should be loaded alongside using
LEFT OUTER JOINs. The symbols named refer to already defined associations.
See eager loading under Associations.

</li>
<li><tt>:select</tt>: By default, this is * as in SELECT * FROM, but can be
changed if you, for example, want to do a join but not include the joined
<a href="Base.html#M001567">columns</a>.

</li>
<li><tt>:from</tt>: By default, this is the table name of the class, but can be
changed to an alternate table name (or even the name of a database view).

</li>
<li><tt>:readonly</tt>: Mark the returned records read-only so they cannot be
saved or updated.

</li>
<li><tt>:lock</tt>: An SQL fragment like &quot;FOR UPDATE&quot; or &quot;LOCK
IN SHARE MODE&quot;. :lock =&gt; true gives <a
href="Base.html#M001630">connection</a>&#8216;s default exclusive lock,
usually &quot;FOR UPDATE&quot;.

</li>
</ul>
<p>
Examples for <a href="Base.html#M001539">find</a> by <a
href="Base.html#M001591">id</a>:
</p>
<pre>
  Person.find(1)       # returns the object for ID = 1
  Person.find(1, 2, 6) # returns an array for objects with IDs in (1, 2, 6)
  Person.find([7, 17]) # returns an array for objects with IDs in (7, 17)
  Person.find([1])     # returns an array for the object with ID = 1
  Person.find(1, :conditions =&gt; &quot;administrator = 1&quot;, :order =&gt; &quot;created_on DESC&quot;)
</pre>
<p>
Note that returned records may not be in the same order as the ids you
provide since database rows are unordered. Give an explicit :order to
ensure the results are sorted.
</p>
<p>
Examples for <a href="Base.html#M001539">find</a> first:
</p>
<pre>
  Person.find(:first) # returns the first object fetched by SELECT * FROM people
  Person.find(:first, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:first, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)
</pre>
<p>
Examples for <a href="Base.html#M001539">find</a> last:
</p>
<pre>
  Person.find(:last) # returns the last object fetched by SELECT * FROM people
  Person.find(:last, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:last, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)
</pre>
<p>
Examples for <a href="Base.html#M001539">find</a> all:
</p>
<pre>
  Person.find(:all) # returns an array of objects for all the rows fetched by SELECT * FROM people
  Person.find(:all, :conditions =&gt; [ &quot;category IN (?)&quot;, categories], :limit =&gt; 50)
  Person.find(:all, :offset =&gt; 10, :limit =&gt; 10)
  Person.find(:all, :include =&gt; [ :account, :friends ])
  Person.find(:all, :group =&gt; &quot;category&quot;)
</pre>
<p>
Example for <a href="Base.html#M001539">find</a> with a lock. Imagine two
concurrent transactions: each will read person.visits == 2, add 1 to it,
and <a href="Base.html#M001596">save</a>, resulting in two saves of
person.visits = 3. By locking the row, the second transaction has to wait
until the first is finished; we get the expected person.visits == 4.
</p>
<pre>
  Person.transaction do
    person = Person.find(1, :lock =&gt; true)
    person.visits += 1
    person.save!
  end
</pre>

<p class="source_link" id="M001539-show-link"><a onclick="toggle('M001539-source'); toggleText('M001539-link'); return false;" href="#" id="M001539-link">Show source...</a></p><div class="source" id="M001539-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 502</span>
502:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
503:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
504:         <span class="ruby-identifier">validate_find_options</span>(<span class="ruby-identifier">options</span>)
505:         <span class="ruby-identifier">set_readonly_option!</span>(<span class="ruby-identifier">options</span>)
506: 
507:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
508:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:first</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_initial</span>(<span class="ruby-identifier">options</span>)
509:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:last</span>  <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_last</span>(<span class="ruby-identifier">options</span>)
510:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:all</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">find_every</span>(<span class="ruby-identifier">options</span>)
511:           <span class="ruby-keyword kw">else</span>             <span class="ruby-identifier">find_from_ids</span>(<span class="ruby-identifier">args</span>, <span class="ruby-identifier">options</span>)
512:         <span class="ruby-keyword kw">end</span>
513:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001540"><br/></a>
<div class="method_block"><h3>
<a href='#M001540'>


find_by_sql

(sql)

</a>
</h3>
<p>
Executes a custom sql query against your database and returns all the
results. The results will be returned as an array with <a
href="Base.html#M001567">columns</a> requested encapsulated as <a
href="Base.html#M001614">attributes</a> of the model you call this method
from. If you call +Product.find_by_sql+ then the results will be returned
in a Product object with the <a href="Base.html#M001614">attributes</a> you
specified in the SQL query.
</p>
<p>
If you call a complicated SQL query which spans multiple tables the <a
href="Base.html#M001567">columns</a> specified by the SELECT will be <a
href="Base.html#M001614">attributes</a> of the model, whether or not they
are <a href="Base.html#M001567">columns</a> of the corresponding table.
</p>
<p>
The <tt>sql</tt> parameter is a full sql query as a string. It will be
called as is, there will be no database agnostic conversions performed.
This should be a last resort because using, for example, MySQL specific
terms will lock you to using that particular database engine or require you
to change your call if you switch engines
</p>
<h4>Examples</h4>
<pre>
  # A simple sql query spanning multiple tables
  Post.find_by_sql &quot;SELECT p.title, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;title&quot;=&gt;&quot;Ruby Meetup&quot;, &quot;first_name&quot;=&gt;&quot;Quentin&quot;}&gt;, ...]

  # You can use the same string replacement techniques as you can with ActiveRecord#find
  Post.find_by_sql [&quot;SELECT title FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;first_name&quot;=&gt;&quot;The Cheap Man Buys Twice&quot;}&gt;, ...]
</pre>

<p class="source_link" id="M001540-show-link"><a onclick="toggle('M001540-source'); toggleText('M001540-link'); return false;" href="#" id="M001540-link">Show source...</a></p><div class="source" id="M001540-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 538</span>
538:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_by_sql</span>(<span class="ruby-identifier">sql</span>)
539:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">sanitize_sql</span>(<span class="ruby-identifier">sql</span>), <span class="ruby-node">&quot;#{name} Load&quot;</span>).<span class="ruby-identifier">collect!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instantiate</span>(<span class="ruby-identifier">record</span>) }
540:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001551"><br/></a>
<div class="method_block"><h3>
<a href='#M001551'>


increment_counter

(counter_name, id)

</a>
</h3>
<p>
Increment a number field by one, usually representing a count.
</p>
<p>
This is used for caching aggregate values, so that they don&#8216;t need to
be computed every time. For example, a DiscussionBoard may cache post_count
and comment_count otherwise every time the board is shown it would have to
run an SQL query to <a href="Base.html#M001539">find</a> how many posts and
comments there are.
</p>
<h4>Options</h4>
<p>
<tt>counter_name</tt> The name of the field that should be incremented
<tt><a href="Base.html#M001591">id</a></tt> The <a
href="Base.html#M001591">id</a> of the object that should be incremented
</p>
<h4>Examples</h4>
<pre>
  # Increment the post_count column for the record with an id of 5
  DiscussionBoard.increment_counter(:post_count, 5)
</pre>

<p class="source_link" id="M001551-show-link"><a onclick="toggle('M001551-source'); toggleText('M001551-link'); return false;" href="#" id="M001551-link">Show source...</a></p><div class="source" id="M001551-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 797</span>
797:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment_counter</span>(<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">id</span>)
798:         <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counter_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
799:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001561"><br/></a>
<div class="method_block"><h3>
<a href='#M001561'>


inheritance_column

()

</a>
</h3>
<p>
Defines the column name for use with single table inheritance &#8212; can
be set in subclasses like so: self.inheritance_column = &quot;type_id&quot;
</p>

<p class="source_link" id="M001561-show-link"><a onclick="toggle('M001561-source'); toggleText('M001561-link'); return false;" href="#" id="M001561-link">Show source...</a></p><div class="source" id="M001561-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 990</span>
990:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inheritance_column</span>
991:         <span class="ruby-ivar">@inheritance_column</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;type&quot;</span>.<span class="ruby-identifier">freeze</span>
992:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001573"><br/></a>
<div class="method_block"><h3>
<a href='#M001573'>


inspect

()

</a>
</h3>
<p>
Returns a string like &#8216;Post <a
href="Base.html#M001591">id</a>:integer, title:string, body:text&#8216;
</p>

<p class="source_link" id="M001573-show-link"><a onclick="toggle('M001573-source'); toggleText('M001573-link'); return false;" href="#" id="M001573-link">Show source...</a></p><div class="source" id="M001573-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1165</span>
1165:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
1166:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
1167:           <span class="ruby-keyword kw">super</span>
1168:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">abstract_class?</span>
1169:           <span class="ruby-node">&quot;#{super}(abstract)&quot;</span>
1170:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">table_exists?</span>
1171:           <span class="ruby-identifier">attr_list</span> = <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{c.name}: #{c.type}&quot;</span> } <span class="ruby-operator">*</span> <span class="ruby-value str">', '</span>
1172:           <span class="ruby-node">&quot;#{super}(#{attr_list})&quot;</span>
1173:         <span class="ruby-keyword kw">else</span>
1174:           <span class="ruby-node">&quot;#{super}(Table doesn't exist)&quot;</span>
1175:         <span class="ruby-keyword kw">end</span>
1176:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001590"><br/></a>
<div class="method_block"><h3>
<a href='#M001590'>


new

(attributes = nil) {|self if block_given?| ...}

</a>
</h3>
<p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with <a href="Base.html#M001614">attributes</a> but
not yet saved (pass a <a href="Base.html#M001623">hash</a> with key names
matching the associated table column names). In both instances, valid
attribute keys are determined by the column names of the associated table
&#8212; hence you can&#8216;t have <a
href="Base.html#M001614">attributes</a> that aren&#8216;t part of the table
<a href="Base.html#M001567">columns</a>.
</p>

<p class="source_link" id="M001590-show-link"><a onclick="toggle('M001590-source'); toggleText('M001590-link'); return false;" href="#" id="M001590-link">Show source...</a></p><div class="source" id="M001590-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2034</span>
2034:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword kw">nil</span>)
2035:         <span class="ruby-ivar">@attributes</span> = <span class="ruby-identifier">attributes_from_column_definition</span>
2036:         <span class="ruby-ivar">@attributes_cache</span> = {}
2037:         <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">true</span>
2038:         <span class="ruby-identifier">ensure_proper_type</span>
2039:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">nil?</span>
2040:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:scope</span>, <span class="ruby-identifier">:create</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">att</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{att}=&quot;</span>, <span class="ruby-identifier">value</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:scoped?</span>, <span class="ruby-identifier">:create</span>)
2041:         <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
2042:         <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">:after_initialize</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to_without_attributes?</span>(<span class="ruby-identifier">:after_initialize</span>)
2043:         <span class="ruby-identifier">result</span>
2044:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001560"><br/></a>
<div class="method_block"><h3>
<a href='#M001560'>


primary_key

()

</a>
</h3>
<p>
Defines the primary key field &#8212; can be overridden in subclasses.
Overwriting will negate any effect of the primary_key_prefix_type setting,
though.
</p>

<p class="source_link" id="M001560-show-link"><a onclick="toggle('M001560-source'); toggleText('M001560-link'); return false;" href="#" id="M001560-link">Show source...</a></p><div class="source" id="M001560-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 972</span>
972:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">primary_key</span>
973:         <span class="ruby-identifier">reset_primary_key</span>
974:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001556"><br/></a>
<div class="method_block"><h3>
<a href='#M001556'>


readonly_attributes

()

</a>
</h3>
<p>
Returns an array of all the <a href="Base.html#M001614">attributes</a> that
have been specified as readonly.
</p>

<p class="source_link" id="M001556-show-link"><a onclick="toggle('M001556-source'); toggleText('M001556-link'); return false;" href="#" id="M001556-link">Show source...</a></p><div class="source" id="M001556-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 885</span>
885:        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly_attributes</span>
886:          <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_readonly&quot;</span>)
887:        <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001636"><br/></a>
<div class="method_block"><h3>
<a href='#M001636'>


remove_connection

(klass=self)

</a>
</h3>
<p>
Remove the <a href="Base.html#M001630">connection</a> for this class. This
will close the active <a href="Base.html#M001630">connection</a> and the
defined <a href="Base.html#M001630">connection</a> (if they exist). The
result can be used as an argument for <a
href="Base.html#M001634">establish_connection</a>, for easily
re-establishing the <a href="Base.html#M001630">connection</a>.
</p>

<p class="source_link" id="M001636-show-link"><a onclick="toggle('M001636-source'); toggleText('M001636-link'); return false;" href="#" id="M001636-link">Show source...</a></p><div class="source" id="M001636-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 276</span>
276:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">remove_connection</span>(<span class="ruby-identifier">klass</span>=<span class="ruby-keyword kw">self</span>)
277:       <span class="ruby-identifier">spec</span> = <span class="ruby-ivar">@@defined_connections</span>[<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">name</span>]
278:       <span class="ruby-identifier">konn</span> = <span class="ruby-identifier">active_connections</span>[<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">name</span>]
279:       <span class="ruby-ivar">@@defined_connections</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">spec</span> }
280:       <span class="ruby-identifier">active_connections</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">konn</span> }
281:       <span class="ruby-identifier">konn</span>.<span class="ruby-identifier">disconnect!</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">konn</span>
282:       <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">config</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">spec</span>
283:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001629"><br/></a>
<div class="method_block"><h3>
<a href='#M001629'>


require_mysql

()

</a>
</h3>

<p class="source_link" id="M001629-show-link"><a onclick="toggle('M001629-source'); toggleText('M001629-link'); return false;" href="#" id="M001629-link">Show source...</a></p><div class="source" id="M001629-source"><pre>    <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/mysql_adapter.rb, line 47</span>
47:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">require_mysql</span>
48:       <span class="ruby-comment cmt"># Include the MySQL driver if one hasn't already been loaded</span>
49:       <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-constant">Mysql</span>
50:         <span class="ruby-keyword kw">begin</span>
51:           <span class="ruby-identifier">require_library_or_gem</span> <span class="ruby-value str">'mysql'</span>
52:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cannot_require_mysql</span>
53:           <span class="ruby-comment cmt"># Use the bundled Ruby/MySQL driver if no driver is already in place</span>
54:           <span class="ruby-keyword kw">begin</span>
55:             <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>(
56:               <span class="ruby-value str">&quot;WARNING: You're using the Ruby-based MySQL library that ships with Rails. This library is not suited for production. &quot;</span> <span class="ruby-operator">+</span>
57:               <span class="ruby-value str">&quot;Please install the C-based MySQL library instead (gem install mysql).&quot;</span>
58:             ) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
59: 
60:             <span class="ruby-identifier">require</span> <span class="ruby-value str">'active_record/vendor/mysql'</span>
61:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span>
62:             <span class="ruby-identifier">raise</span> <span class="ruby-identifier">cannot_require_mysql</span>
63:           <span class="ruby-keyword kw">end</span>
64:         <span class="ruby-keyword kw">end</span>
65:       <span class="ruby-keyword kw">end</span>
66: 
67:       <span class="ruby-comment cmt"># Define Mysql::Result.all_hashes</span>
68:       <span class="ruby-constant">MysqlCompat</span>.<span class="ruby-identifier">define_all_hashes_method!</span>
69:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001571"><br/></a>
<div class="method_block"><h3>
<a href='#M001571'>


reset_column_information

()

</a>
</h3>
<p>
Resets all the cached information about <a
href="Base.html#M001567">columns</a>, which will cause them to be reloaded
on the next request.
</p>

<p class="source_link" id="M001571-show-link"><a onclick="toggle('M001571-source'); toggleText('M001571-link'); return false;" href="#" id="M001571-link">Show source...</a></p><div class="source" id="M001571-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1134</span>
1134:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_column_information</span>
1135:         <span class="ruby-identifier">generated_methods</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">name</span>) }
1136:         <span class="ruby-ivar">@column_names</span> = <span class="ruby-ivar">@columns</span> = <span class="ruby-ivar">@columns_hash</span> = <span class="ruby-ivar">@content_columns</span> = <span class="ruby-ivar">@dynamic_methods_hash</span> = <span class="ruby-ivar">@generated_methods</span> = <span class="ruby-ivar">@inheritance_column</span> = <span class="ruby-keyword kw">nil</span>
1137:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001557"><br/></a>
<div class="method_block"><h3>
<a href='#M001557'>


serialize

(attr_name, class_name = Object)

</a>
</h3>
<p>
If you have an attribute that needs to be saved to the database as an
object, and retrieved as the same object, then specify the name of that
attribute using this method and it will be handled automatically. The
serialization is done through YAML. If <tt>class_name</tt> is specified,
the serialized object must be of that class on retrieval or <tt><a
href="SerializationTypeMismatch.html">SerializationTypeMismatch</a></tt>
will be raised.
</p>
<h4>Options</h4>
<p>
<tt>attr_name</tt> The field name that should be serialized
<tt>class_name</tt> Optional, class name that the object type should be
equal to
</p>
<h4>Example</h4>
<pre>
  # Serialize a preferences attribute
  class User
    serialize :preferences
  end
</pre>

<p class="source_link" id="M001557-show-link"><a onclick="toggle('M001557-source'); toggleText('M001557-link'); return false;" href="#" id="M001557-link">Show source...</a></p><div class="source" id="M001557-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 904</span>
904:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">class_name</span> = <span class="ruby-constant">Object</span>)
905:         <span class="ruby-identifier">serialized_attributes</span>[<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">class_name</span>
906:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001558"><br/></a>
<div class="method_block"><h3>
<a href='#M001558'>


serialized_attributes

()

</a>
</h3>
<p>
Returns a <a href="Base.html#M001623">hash</a> of all the <a
href="Base.html#M001614">attributes</a> that have been specified for
serialization as keys and their class restriction as values.
</p>

<p class="source_link" id="M001558-show-link"><a onclick="toggle('M001558-source'); toggleText('M001558-link'); return false;" href="#" id="M001558-link">Show source...</a></p><div class="source" id="M001558-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 909</span>
909:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">serialized_attributes</span>
910:         <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_serialized&quot;</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">&quot;attr_serialized&quot;</span>, {})
911:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001564"><br/></a>
<div class="method_block"><h3>
<a href='#M001564'>


set_inheritance_column

(value = nil, &amp;block)

</a>
</h3>
<p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_inheritance_column do
      original_inheritance_column + &quot;_id&quot;
    end
  end
</pre>

<p class="source_link" id="M001564-show-link"><a onclick="toggle('M001564-source'); toggleText('M001564-link'); return false;" href="#" id="M001564-link">Show source...</a></p><div class="source" id="M001564-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1044</span>
1044:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_inheritance_column</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1045:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:inheritance_column</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1046:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001563"><br/></a>
<div class="method_block"><h3>
<a href='#M001563'>


set_primary_key

(value = nil, &amp;block)

</a>
</h3>
<p>
Sets the name of the primary key column to use to the given value, or (if
the value is nil or false) to the value returned by the given block.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_primary_key &quot;sysid&quot;
  end
</pre>

<p class="source_link" id="M001563-show-link"><a onclick="toggle('M001563-source'); toggleText('M001563-link'); return false;" href="#" id="M001563-link">Show source...</a></p><div class="source" id="M001563-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1028</span>
1028:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_primary_key</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1029:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:primary_key</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1030:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001565"><br/></a>
<div class="method_block"><h3>
<a href='#M001565'>


set_sequence_name

(value = nil, &amp;block)

</a>
</h3>
<p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.
</p>
<p>
If a sequence name is not explicitly set when using Oracle or Firebird, it
will default to the commonly used pattern of: #{<a
href="Base.html#M001559">table_name</a>}_seq
</p>
<p>
If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_sequence_name &quot;projectseq&quot;   # default would have been &quot;project_seq&quot;
  end
</pre>

<p class="source_link" id="M001565-show-link"><a onclick="toggle('M001565-source'); toggleText('M001565-link'); return false;" href="#" id="M001565-link">Show source...</a></p><div class="source" id="M001565-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1065</span>
1065:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_sequence_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1066:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:sequence_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1067:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001562"><br/></a>
<div class="method_block"><h3>
<a href='#M001562'>


set_table_name

(value = nil, &amp;block)

</a>
</h3>
<p>
Sets the table name to use to the given value, or (if the value is nil or
false) to the value returned by the given block.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_table_name &quot;project&quot;
  end
</pre>

<p class="source_link" id="M001562-show-link"><a onclick="toggle('M001562-source'); toggleText('M001562-link'); return false;" href="#" id="M001562-link">Show source...</a></p><div class="source" id="M001562-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1014</span>
1014:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_table_name</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1015:         <span class="ruby-identifier">define_attr_method</span> <span class="ruby-identifier">:table_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
1016:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001575"><br/></a>
<div class="method_block"><h3>
<a href='#M001575'>


silence

() {|| ...}

</a>
</h3>
<p>
Silences the logger for the duration of the block.
</p>

<p class="source_link" id="M001575-show-link"><a onclick="toggle('M001575-source'); toggleText('M001575-link'); return false;" href="#" id="M001575-link">Show source...</a></p><div class="source" id="M001575-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1213</span>
1213:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">silence</span>
1214:         <span class="ruby-identifier">old_logger_level</span>, <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">ERROR</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
1215:         <span class="ruby-keyword kw">yield</span>
1216:       <span class="ruby-keyword kw">ensure</span>
1217:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">old_logger_level</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
1218:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001566"><br/></a>
<div class="method_block"><h3>
<a href='#M001566'>


table_exists?

()

</a>
</h3>
<p>
Indicates whether the table associated with this class exists
</p>

<p class="source_link" id="M001566-show-link"><a onclick="toggle('M001566-source'); toggleText('M001566-link'); return false;" href="#" id="M001566-link">Show source...</a></p><div class="source" id="M001566-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1079</span>
1079:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_exists?</span>
1080:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:tables</span>)
1081:           <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">tables</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">table_name</span>
1082:         <span class="ruby-keyword kw">else</span>
1083:           <span class="ruby-comment cmt"># if the connection adapter hasn't implemented tables, there are two crude tests that can be</span>
1084:           <span class="ruby-comment cmt"># used - see if getting column info raises an error, or if the number of columns returned is zero</span>
1085:           <span class="ruby-keyword kw">begin</span>
1086:             <span class="ruby-identifier">reset_column_information</span>
1087:             <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
1088:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>
1089:             <span class="ruby-keyword kw">false</span>
1090:           <span class="ruby-keyword kw">end</span>
1091:         <span class="ruby-keyword kw">end</span>
1092:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001559"><br/></a>
<div class="method_block"><h3>
<a href='#M001559'>


table_name

()

</a>
</h3>
<p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from ActiveRecord.
So if the hierarchy looks like: Reply &lt; Message &lt; ActiveRecord, then
Message is used to guess the table name even when called on Reply. The
rules used to do the guess are handled by the <a
href="../Inflector.html">Inflector</a> class in Active Support, which knows
almost all common English inflections. You can add <a
href="Base.html#M001590">new</a> inflections in
config/initializers/inflections.rb.
</p>
<p>
Nested classes are given table names prefixed by the singular form of the
parent&#8216;s table name. Enclosing modules are not considered. Examples:
</p>
<pre>
  class Invoice &lt; ActiveRecord::Base; end;
  file                  class               table_name
  invoice.rb            Invoice             invoices

  class Invoice &lt; ActiveRecord::Base; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice.rb            Invoice::Lineitem   invoice_lineitems

  module Invoice; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice/lineitem.rb   Invoice::Lineitem   lineitems
</pre>
<p>
Additionally, the class-level table_name_prefix is prepended and the
table_name_suffix is appended. So if you have &quot;myapp_&quot; as a
prefix, the table name guess for an Invoice class <a
href="Base.html#M001600">becomes</a> &quot;myapp_invoices&quot;.
Invoice::Lineitem <a href="Base.html#M001600">becomes</a>
&quot;myapp_invoice_lineitems&quot;.
</p>
<p>
You can also overwrite this class method to allow for unguessable links,
such as a Mouse class with a link to a &quot;mice&quot; table. Example:
</p>
<pre>
  class Mouse &lt; ActiveRecord::Base
    set_table_name &quot;mice&quot;
  end
</pre>

<p class="source_link" id="M001559-show-link"><a onclick="toggle('M001559-source'); toggleText('M001559-link'); return false;" href="#" id="M001559-link">Show source...</a></p><div class="source" id="M001559-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 945</span>
945:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_name</span>
946:         <span class="ruby-identifier">reset_table_name</span>
947:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001543"><br/></a>
<div class="method_block"><h3>
<a href='#M001543'>


update

(id, attributes)

</a>
</h3>
<p>
Updates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<h4>Options</h4>
<p>
<tt><a href="Base.html#M001591">id</a></tt> This should be the <a
href="Base.html#M001591">id</a> or an array of ids to be updated <tt><a
href="Base.html#M001614">attributes</a></tt> This should be a Hash of <a
href="Base.html#M001614">attributes</a> to be set on the object, or an
array of Hashes.
</p>
<h4>Examples</h4>
<pre>
  # Updating one record:
  Person.update(15, {:user_name =&gt; 'Samuel', :group =&gt; 'expert'})

  # Updating multiple records:
  people = { 1 =&gt; { &quot;first_name&quot; =&gt; &quot;David&quot; }, 2 =&gt; { &quot;first_name&quot; =&gt; &quot;Jeremy&quot;} }
  Person.update(people.keys, people.values)
</pre>

<p class="source_link" id="M001543-show-link"><a onclick="toggle('M001543-source'); toggleText('M001543-link'); return false;" href="#" id="M001543-link">Show source...</a></p><div class="source" id="M001543-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 606</span>
606:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">attributes</span>)
607:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
608:           <span class="ruby-identifier">idx</span> = <span class="ruby-value">-1</span>
609:           <span class="ruby-identifier">id</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">idx</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">update</span>(<span class="ruby-identifier">one_id</span>, <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">idx</span>]) }
610:         <span class="ruby-keyword kw">else</span>
611:           <span class="ruby-identifier">object</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
612:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
613:           <span class="ruby-identifier">object</span>
614:         <span class="ruby-keyword kw">end</span>
615:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001546"><br/></a>
<div class="method_block"><h3>
<a href='#M001546'>


update_all

(updates, conditions = nil, options = {})

</a>
</h3>
<p>
Updates all records with details given if they match a set of conditions
supplied, limits and order can also be supplied.
</p>
<h4>Options</h4>
<p>
<tt>updates</tt> A String of column and value pairs that will be set on any
records that match conditions <tt>conditions</tt> An SQL fragment like
&quot;administrator = 1&quot; or [ &quot;user_name = ?&quot;, username ].
</p>
<pre>
              See conditions in the intro for more info.
</pre>
<p>
<tt>options</tt> Additional options are :limit and/or :order, see the
examples for usage.
</p>
<h4>Examples</h4>
<pre>
  # Update all billing objects with the 3 different attributes given
  Billing.update_all( &quot;category = 'authorized', approved = 1, author = 'David'&quot; )

  # Update records that match our conditions
  Billing.update_all( &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot; )

  # Update records that match our conditions but limit it to 5 ordered by date
  Billing.update_all( &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;,
                        :order =&gt; 'created_at', :limit =&gt; 5 )
</pre>

<p class="source_link" id="M001546-show-link"><a onclick="toggle('M001546-source'); toggleText('M001546-link'); return false;" href="#" id="M001546-link">Show source...</a></p><div class="source" id="M001546-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 687</span>
687:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {})
688:         <span class="ruby-identifier">sql</span>  = <span class="ruby-node">&quot;UPDATE #{quoted_table_name} SET #{sanitize_sql_for_assignment(updates)} &quot;</span>
689:         <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">:find</span>)
690:         <span class="ruby-identifier">add_conditions!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">scope</span>)
691:         <span class="ruby-identifier">add_order!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:order</span>], <span class="ruby-keyword kw">nil</span>)
692:         <span class="ruby-identifier">add_limit!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>, <span class="ruby-keyword kw">nil</span>)
693:         <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-node">&quot;#{name} Update&quot;</span>)
694:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001550"><br/></a>
<div class="method_block"><h3>
<a href='#M001550'>


update_counters

(id, counters)

</a>
</h3>
<p>
A generic &quot;counter updater&quot; implementation, intended primarily to
be used by <a href="Base.html#M001551">increment_counter</a> and <a
href="Base.html#M001552">decrement_counter</a>, but which may also be
useful on its own. It simply does a direct SQL <a
href="Base.html#M001543">update</a> for the record with the given ID,
altering the given <a href="Base.html#M001623">hash</a> of counters by the
amount given by the corresponding value:
</p>
<h4>Options</h4>
<p>
<tt><a href="Base.html#M001591">id</a></tt> The <a
href="Base.html#M001591">id</a> of the object you wish to <a
href="Base.html#M001543">update</a> a counter on <tt>counters</tt> An Array
of Hashes containing the names of the fields
</p>
<pre>
            to update as keys and the amount to update the field by as
            values
</pre>
<h4>Examples</h4>
<pre>
  # For the Post with id of 5, decrement the comment_count by 1, and
  # increment the action_count by 1
  Post.update_counters 5, :comment_count =&gt; -1, :action_count =&gt; 1
  # Executes the following SQL:
  # UPDATE posts
  #    SET comment_count = comment_count - 1,
  #        action_count = action_count + 1
  #  WHERE id = 5
</pre>

<p class="source_link" id="M001550-show-link"><a onclick="toggle('M001550-source'); toggleText('M001550-link'); return false;" href="#" id="M001550-link">Show source...</a></p><div class="source" id="M001550-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 774</span>
774:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">counters</span>)
775:         <span class="ruby-identifier">updates</span> = <span class="ruby-identifier">counters</span>.<span class="ruby-identifier">inject</span>([]) { <span class="ruby-operator">|</span><span class="ruby-identifier">list</span>, (<span class="ruby-identifier">counter_name</span>, <span class="ruby-identifier">increment</span>)<span class="ruby-operator">|</span>
776:           <span class="ruby-identifier">sign</span> = <span class="ruby-identifier">increment</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;-&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;+&quot;</span>
777:           <span class="ruby-identifier">list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{connection.quote_column_name(counter_name)} = #{connection.quote_column_name(counter_name)} #{sign} #{increment.abs}&quot;</span>
778:         }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
779:         <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-node">&quot;#{connection.quote_column_name(primary_key)} = #{quote_value(id)}&quot;</span>)
780:       <span class="ruby-keyword kw">end</span></pre></div>
</div>


<h1>Protected Class Methods</h1>


<a class="small" name="M001585"><br/></a>
<div class="method_block"><h3>
<a href='#M001585'>


aggregate_mapping

(reflection)

</a>
</h3>

<p class="source_link" id="M001585-show-link"><a onclick="toggle('M001585-source'); toggleText('M001585-link'); return false;" href="#" id="M001585-link">Show source...</a></p><div class="source" id="M001585-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1865</span>
1865:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">reflection</span>)
1866:           <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mapping</span>] <span class="ruby-operator">||</span> [<span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">reflection</span>.<span class="ruby-identifier">name</span>]
1867:           <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">mapping</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">mapping</span>]
1868:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001582"><br/></a>
<div class="method_block"><h3>
<a href='#M001582'>


class_of_active_record_descendant

(klass)

</a>
</h3>
<p>
Returns the class descending directly from ActiveRecord in the inheritance
hierarchy.
</p>

<p class="source_link" id="M001582-show-link"><a onclick="toggle('M001582-source'); toggleText('M001582-link'); return false;" href="#" id="M001582-link">Show source...</a></p><div class="source" id="M001582-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1825</span>
1825:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>)
1826:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
1827:             <span class="ruby-identifier">klass</span>
1828:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">nil?</span>
1829:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;#{name} doesn't belong in a hierarchy descending from ActiveRecord&quot;</span>
1830:           <span class="ruby-keyword kw">else</span>
1831:             <span class="ruby-identifier">class_of_active_record_descendant</span>(<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">superclass</span>)
1832:           <span class="ruby-keyword kw">end</span>
1833:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001581"><br/></a>
<div class="method_block"><h3>
<a href='#M001581'>


compute_type

(type_name)

</a>
</h3>
<p>
Returns the class type of the record using the current module as a prefix.
So descendents of MyApp::Business::Account would appear as
MyApp::Business::AccountSubclass.
</p>

<p class="source_link" id="M001581-show-link"><a onclick="toggle('M001581-source'); toggleText('M001581-link'); return false;" href="#" id="M001581-link">Show source...</a></p><div class="source" id="M001581-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1815</span>
1815:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compute_type</span>(<span class="ruby-identifier">type_name</span>)
1816:           <span class="ruby-identifier">modularized_name</span> = <span class="ruby-identifier">type_name_with_module</span>(<span class="ruby-identifier">type_name</span>)
1817:           <span class="ruby-keyword kw">begin</span>
1818:             <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">modularized_name</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
1819:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span>
1820:             <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">type_name</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
1821:           <span class="ruby-keyword kw">end</span>
1822:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001586"><br/></a>
<div class="method_block"><h3>
<a href='#M001586'>


expand_hash_conditions_for_aggregates

(attrs)

</a>
</h3>
<p>
Accepts a <a href="Base.html#M001623">hash</a> of sql conditions and
replaces those <a href="Base.html#M001614">attributes</a> that correspond
to a <tt>composed_of</tt> relationship with their expanded aggregate
attribute values. Given:
</p>
<pre>
    class Person &lt; ActiveRecord::Base
      composed_of :address, :class_name =&gt; &quot;Address&quot;,
        :mapping =&gt; [%w(address_street street), %w(address_city city)]
    end
</pre>
<p>
Then:
</p>
<pre>
    { :address =&gt; Address.new(&quot;813 abc st.&quot;, &quot;chicago&quot;) }
      # =&gt; { :address_street =&gt; &quot;813 abc st.&quot;, :address_city =&gt; &quot;chicago&quot; }
</pre>

<p class="source_link" id="M001586-show-link"><a onclick="toggle('M001586-source'); toggleText('M001586-link'); return false;" href="#" id="M001586-link">Show source...</a></p><div class="source" id="M001586-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1881</span>
1881:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
1882:           <span class="ruby-identifier">expanded_attrs</span> = {}
1883:           <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1884:             <span class="ruby-keyword kw">unless</span> (<span class="ruby-identifier">aggregation</span> = <span class="ruby-identifier">reflect_on_aggregation</span>(<span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_sym</span>)).<span class="ruby-identifier">nil?</span>
1885:               <span class="ruby-identifier">mapping</span> = <span class="ruby-identifier">aggregate_mapping</span>(<span class="ruby-identifier">aggregation</span>)
1886:               <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_attr</span>, <span class="ruby-identifier">aggregate_attr</span><span class="ruby-operator">|</span>
1887:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">aggregate_attr</span>)
1888:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>
1889:                 <span class="ruby-keyword kw">else</span>
1890:                   <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">field_attr</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">aggregate_attr</span>)
1891:                 <span class="ruby-keyword kw">end</span>
1892:               <span class="ruby-keyword kw">end</span>
1893:             <span class="ruby-keyword kw">else</span>
1894:               <span class="ruby-identifier">expanded_attrs</span>[<span class="ruby-identifier">attr</span>] = <span class="ruby-identifier">value</span>
1895:             <span class="ruby-keyword kw">end</span>
1896:           <span class="ruby-keyword kw">end</span>
1897:           <span class="ruby-identifier">expanded_attrs</span>
1898:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001589"><br/></a>
<div class="method_block"><h3>
<a href='#M001589'>


sanitize_sql_array

(ary)

</a>
</h3>
<p>
Accepts an array of conditions. The array has each value sanitized and
interpolated into the sql statement.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
</pre>

<p class="source_link" id="M001589-show-link"><a onclick="toggle('M001589-source'); toggleText('M001589-link'); return false;" href="#" id="M001589-link">Show source...</a></p><div class="source" id="M001589-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1945</span>
1945:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">ary</span>)
1946:           <span class="ruby-identifier">statement</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span> = <span class="ruby-identifier">ary</span>
1947:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">statement</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/:\w+/</span>
1948:             <span class="ruby-identifier">replace_named_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>.<span class="ruby-identifier">first</span>)
1949:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'?'</span>)
1950:             <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">values</span>)
1951:           <span class="ruby-keyword kw">else</span>
1952:             <span class="ruby-identifier">statement</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_string</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>) }
1953:           <span class="ruby-keyword kw">end</span>
1954:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001584"><br/></a>
<div class="method_block"><h3>
<a href='#M001584'>


sanitize_sql_for_assignment

(assignments)

</a>
</h3>
<p>
Accepts an array, <a href="Base.html#M001623">hash</a>, or string of sql
conditions and sanitizes them into a valid SQL fragment for a SET clause.
</p>
<pre>
  { :name =&gt; nil, :group_id =&gt; 4 }  returns &quot;name = NULL , group_id='4'&quot;
</pre>

<p class="source_link" id="M001584-show-link"><a onclick="toggle('M001584-source'); toggleText('M001584-link'); return false;" href="#" id="M001584-link">Show source...</a></p><div class="source" id="M001584-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1857</span>
1857:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
1858:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">assignments</span>
1859:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">assignments</span>)
1860:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">assignments</span>)
1861:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">assignments</span>
1862:           <span class="ruby-keyword kw">end</span>
1863:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001583"><br/></a>
<div class="method_block"><h3>
<a href='#M001583'>


sanitize_sql_for_conditions

(condition)

</a>
</h3>
<p>
Accepts an array, <a href="Base.html#M001623">hash</a>, or string of sql
conditions and sanitizes them into a valid SQL fragment for a WHERE clause.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }  returns &quot;name='foo''bar' and group_id='4'&quot;
  &quot;name='foo''bar' and group_id='4'&quot; returns &quot;name='foo''bar' and group_id='4'&quot;
</pre>

<p class="source_link" id="M001583-show-link"><a onclick="toggle('M001583-source'); toggleText('M001583-link'); return false;" href="#" id="M001583-link">Show source...</a></p><div class="source" id="M001583-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1845</span>
1845:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_for_conditions</span>(<span class="ruby-identifier">condition</span>)
1846:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">condition</span>
1847:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>; <span class="ruby-identifier">sanitize_sql_array</span>(<span class="ruby-identifier">condition</span>)
1848:             <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>;  <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">condition</span>)
1849:             <span class="ruby-keyword kw">else</span>        <span class="ruby-identifier">condition</span>
1850:           <span class="ruby-keyword kw">end</span>
1851:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001588"><br/></a>
<div class="method_block"><h3>
<a href='#M001588'>


sanitize_sql_hash_for_assignment

(attrs)

</a>
</h3>
<p>
Sanitizes a <a href="Base.html#M001623">hash</a> of attribute/value pairs
into SQL conditions for a SET clause.
</p>
<pre>
  { :status =&gt; nil, :group_id =&gt; 1 }
    # =&gt; &quot;status = NULL , group_id = 1&quot;
</pre>

<p class="source_link" id="M001588-show-link"><a onclick="toggle('M001588-source'); toggleText('M001588-link'); return false;" href="#" id="M001588-link">Show source...</a></p><div class="source" id="M001588-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1936</span>
1936:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_assignment</span>(<span class="ruby-identifier">attrs</span>)
1937:           <span class="ruby-identifier">conditions</span> = <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1938:             <span class="ruby-node">&quot;#{connection.quote_column_name(attr)} = #{quote_bound_value(value)}&quot;</span>
1939:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
1940:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001587"><br/></a>
<div class="method_block"><h3>
<a href='#M001587'>


sanitize_sql_hash_for_conditions

(attrs)

</a>
</h3>
<p>
Sanitizes a <a href="Base.html#M001623">hash</a> of attribute/value pairs
into SQL conditions for a WHERE clause.
</p>
<pre>
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }
    # =&gt; &quot;name='foo''bar' and group_id= 4&quot;
  { :status =&gt; nil, :group_id =&gt; [1,2,3] }
    # =&gt; &quot;status IS NULL and group_id IN (1,2,3)&quot;
  { :age =&gt; 13..18 }
    # =&gt; &quot;age BETWEEN 13 AND 18&quot;
  { 'other_records.id' =&gt; 7 }
    # =&gt; &quot;`other_records`.`id` = 7&quot;
</pre>
<p>
And for value objects on a composed_of relationship:
</p>
<pre>
  { :address =&gt; Address.new(&quot;123 abc st.&quot;, &quot;chicago&quot;) }
    # =&gt; &quot;address_street='123 abc st.' and address_city='chicago'&quot;
</pre>

<p class="source_link" id="M001587-show-link"><a onclick="toggle('M001587-source'); toggleText('M001587-link'); return false;" href="#" id="M001587-link">Show source...</a></p><div class="source" id="M001587-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1912</span>
1912:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sanitize_sql_hash_for_conditions</span>(<span class="ruby-identifier">attrs</span>)
1913:           <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">expand_hash_conditions_for_aggregates</span>(<span class="ruby-identifier">attrs</span>)
1914: 
1915:           <span class="ruby-identifier">conditions</span> = <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
1916:             <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">to_s</span>
1917: 
1918:             <span class="ruby-comment cmt"># Extract table name from qualified attribute names.</span>
1919:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'.'</span>)
1920:               <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value">2</span>)
1921:               <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-identifier">table_name</span>)
1922:             <span class="ruby-keyword kw">else</span>
1923:               <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">quoted_table_name</span>
1924:             <span class="ruby-keyword kw">end</span>
1925: 
1926:             <span class="ruby-node">&quot;#{table_name}.#{connection.quote_column_name(attr)} #{attribute_condition(value)}&quot;</span>
1927:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' AND '</span>)
1928: 
1929:           <span class="ruby-identifier">replace_bind_variables</span>(<span class="ruby-identifier">conditions</span>, <span class="ruby-identifier">expand_range_bind_variables</span>(<span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">values</span>))
1930:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001580"><br/></a>
<div class="method_block"><h3>
<a href='#M001580'>


with_exclusive_scope

(method_scoping = {}, &amp;block)

</a>
</h3>
<p>
Works like <a href="Base.html#M001579">with_scope</a>, but discards any
nested properties.
</p>

<p class="source_link" id="M001580-show-link"><a onclick="toggle('M001580-source'); toggleText('M001580-link'); return false;" href="#" id="M001580-link">Show source...</a></p><div class="source" id="M001580-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1770</span>
1770:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_exclusive_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1771:           <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span>, <span class="ruby-identifier">:overwrite</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1772:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001579"><br/></a>
<div class="method_block"><h3>
<a href='#M001579'>


with_scope

(method_scoping = {}, action = :merge) {|| ...}

</a>
</h3>
<p>
Scope parameters to method calls within the block. Takes a <a
href="Base.html#M001623">hash</a> of method_name =&gt; parameters <a
href="Base.html#M001623">hash</a>. method_name may be :<a
href="Base.html#M001539">find</a> or :<a
href="Base.html#M001542">create</a>. :<a href="Base.html#M001539">find</a>
parameters may include the <tt>:conditions</tt>, <tt>:joins</tt>,
<tt>:include</tt>, <tt>:offset</tt>, <tt>:limit</tt>, and
<tt>:readonly</tt> options. :<a href="Base.html#M001542">create</a>
parameters are an <a href="Base.html#M001614">attributes</a> <a
href="Base.html#M001623">hash</a>.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.create_with_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot; }, :create =&gt; { :blog_id =&gt; 1 }) do
        find(1) # =&gt; SELECT * from articles WHERE blog_id = 1 AND id = 1
        a = create(1)
        a.blog_id # =&gt; 1
      end
    end
  end
</pre>
<p>
In nested scopings, all previous parameters are overwritten by the
innermost rule, with the exception of :conditions and :include options in
:<a href="Base.html#M001539">find</a>, which are merged.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }, :create =&gt; { :blog_id =&gt; 1 }) do
        with_scope(:find =&gt; { :limit =&gt; 10})
          find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 LIMIT 10
        end
        with_scope(:find =&gt; { :conditions =&gt; &quot;author_id = 3&quot; })
          find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 AND author_id = 3 LIMIT 1
        end
      end
    end
  end
</pre>
<p>
You can ignore any previous scopings by using the <tt><a
href="Base.html#M001580">with_exclusive_scope</a></tt> method.
</p>
<pre>
  class Article &lt; ActiveRecord::Base
    def self.find_with_exclusive_scope
      with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }) do
        with_exclusive_scope(:find =&gt; { :limit =&gt; 10 })
          find(:all) # =&gt; SELECT * from articles LIMIT 10
        end
      end
    end
  end
</pre>

<p class="source_link" id="M001579-show-link"><a onclick="toggle('M001579-source'); toggleText('M001579-link'); return false;" href="#" id="M001579-link">Show source...</a></p><div class="source" id="M001579-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 1718</span>
1718:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">method_scoping</span> = {}, <span class="ruby-identifier">action</span> = <span class="ruby-identifier">:merge</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1719:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">method_scoping</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:method_scoping</span>)
1720: 
1721:           <span class="ruby-comment cmt"># Dup first and second level of hash (method and params).</span>
1722:           <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
1723:             <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = (<span class="ruby-identifier">params</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">params</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">dup</span>
1724:             <span class="ruby-identifier">hash</span>
1725:           <span class="ruby-keyword kw">end</span>
1726: 
1727:           <span class="ruby-identifier">method_scoping</span>.<span class="ruby-identifier">assert_valid_keys</span>([ <span class="ruby-identifier">:find</span>, <span class="ruby-identifier">:create</span> ])
1728: 
1729:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span> = <span class="ruby-identifier">method_scoping</span>[<span class="ruby-identifier">:find</span>]
1730:             <span class="ruby-identifier">f</span>.<span class="ruby-identifier">assert_valid_keys</span>(<span class="ruby-constant">VALID_FIND_OPTIONS</span>)
1731:             <span class="ruby-identifier">set_readonly_option!</span> <span class="ruby-identifier">f</span>
1732:           <span class="ruby-keyword kw">end</span>
1733: 
1734:           <span class="ruby-comment cmt"># Merge scopings</span>
1735:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:merge</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_scoped_methods</span>
1736:             <span class="ruby-identifier">method_scoping</span> = <span class="ruby-identifier">current_scoped_methods</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">method_scoping</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>, (<span class="ruby-identifier">method</span>, <span class="ruby-identifier">params</span>)<span class="ruby-operator">|</span>
1737:               <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>]
1738:                 <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
1739:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:find</span>
1740:                     (<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>].<span class="ruby-identifier">keys</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">keys</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
1741:                       <span class="ruby-identifier">merge</span> = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>] <span class="ruby-comment cmt"># merge if both scopes have the same key</span>
1742:                       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:conditions</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
1743:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = [<span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>]].<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">sql</span><span class="ruby-operator">|</span> <span class="ruby-value str">&quot;( %s )&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">sanitize_sql</span>(<span class="ruby-identifier">sql</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot; AND &quot;</span>)
1744:                       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:include</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">merge</span>
1745:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">merge_includes</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>], <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]).<span class="ruby-identifier">uniq</span>
1746:                       <span class="ruby-keyword kw">else</span>
1747:                         <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>][<span class="ruby-identifier">key</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">key</span>]
1748:                       <span class="ruby-keyword kw">end</span>
1749:                     <span class="ruby-keyword kw">end</span>
1750:                   <span class="ruby-keyword kw">else</span>
1751:                     <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>])
1752:                   <span class="ruby-keyword kw">end</span>
1753:                 <span class="ruby-keyword kw">else</span>
1754:                   <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">method</span>] = <span class="ruby-identifier">params</span>
1755:               <span class="ruby-keyword kw">end</span>
1756:               <span class="ruby-identifier">hash</span>
1757:             <span class="ruby-keyword kw">end</span>
1758:           <span class="ruby-keyword kw">end</span>
1759: 
1760:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">method_scoping</span>
1761: 
1762:           <span class="ruby-keyword kw">begin</span>
1763:             <span class="ruby-keyword kw">yield</span>
1764:           <span class="ruby-keyword kw">ensure</span>
1765:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scoped_methods</span>.<span class="ruby-identifier">pop</span>
1766:           <span class="ruby-keyword kw">end</span>
1767:         <span class="ruby-keyword kw">end</span></pre></div>
</div>


<h1>Public Instance Methods</h1>


<a class="small" name="M001621"><br/></a>
<div class="method_block"><h3>
<a href='#M001621'>


==

(comparison_object)

</a>
</h3>
<p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same <a href="Base.html#M001591">id</a>.
</p>

<p class="source_link" id="M001621-show-link"><a onclick="toggle('M001621-source'); toggleText('M001621-link'); return false;" href="#" id="M001621-link">Show source...</a></p><div class="source" id="M001621-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2315</span>
2315:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">comparison_object</span>)
2316:         <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-operator">||</span>
2317:           (<span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
2318:             <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span> <span class="ruby-operator">&amp;&amp;</span>
2319:             <span class="ruby-operator">!</span><span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">new_record?</span>)
2320:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001611"><br/></a>
<div class="method_block"><h3>
<a href='#M001611'>


[]

(attr_name)

</a>
</h3>
<p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)). (Alias for the
protected read_attribute method).
</p>

<p class="source_link" id="M001611-show-link"><a onclick="toggle('M001611-source'); toggleText('M001611-link'); return false;" href="#" id="M001611-link">Show source...</a></p><div class="source" id="M001611-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2232</span>
2232:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">attr_name</span>)
2233:         <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2234:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001612"><br/></a>
<div class="method_block"><h3>
<a href='#M001612'>


[]=

(attr_name, value)

</a>
</h3>
<p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>. (Alias for the protected write_attribute method).
</p>

<p class="source_link" id="M001612-show-link"><a onclick="toggle('M001612-source'); toggleText('M001612-link'); return false;" href="#" id="M001612-link">Show source...</a></p><div class="source" id="M001612-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2238</span>
2238:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
2239:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
2240:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001616"><br/></a>
<div class="method_block"><h3>
<a href='#M001616'>


attribute_for_inspect

(attr_name)

</a>
</h3>
<p>
Format <a href="Base.html#M001614">attributes</a> nicely for <a
href="Base.html#M001573">inspect</a>.
</p>

<p class="source_link" id="M001616-show-link"><a onclick="toggle('M001616-source'); toggleText('M001616-link'); return false;" href="#" id="M001616-link">Show source...</a></p><div class="source" id="M001616-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2280</span>
2280:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">attr_name</span>)
2281:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2282: 
2283:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>
2284:           <span class="ruby-node">&quot;#{value[0..50]}...&quot;</span>.<span class="ruby-identifier">inspect</span>
2285:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Date</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)
2286:           <span class="ruby-node">%(&quot;#{value.to_s(:db)}&quot;)</span>
2287:         <span class="ruby-keyword kw">else</span>
2288:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">inspect</span>
2289:         <span class="ruby-keyword kw">end</span>
2290:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001619"><br/></a>
<div class="method_block"><h3>
<a href='#M001619'>


attribute_names

()

</a>
</h3>
<p>
Returns an array of names for the <a
href="Base.html#M001614">attributes</a> available on this object sorted
alphabetically.
</p>

<p class="source_link" id="M001619-show-link"><a onclick="toggle('M001619-source'); toggleText('M001619-link'); return false;" href="#" id="M001619-link">Show source...</a></p><div class="source" id="M001619-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2305</span>
2305:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_names</span>
2306:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>
2307:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001617"><br/></a>
<div class="method_block"><h3>
<a href='#M001617'>


attribute_present?

(attribute)

</a>
</h3>
<p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>

<p class="source_link" id="M001617-show-link"><a onclick="toggle('M001617-source'); toggleText('M001617-link'); return false;" href="#" id="M001617-link">Show source...</a></p><div class="source" id="M001617-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2294</span>
2294:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute_present?</span>(<span class="ruby-identifier">attribute</span>)
2295:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attribute</span>)
2296:         <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
2297:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001614"><br/></a>
<div class="method_block"><h3>
<a href='#M001614'>


attributes

(options = nil)

</a>
</h3>
<p>
Returns a <a href="Base.html#M001623">hash</a> of all the <a
href="Base.html#M001614">attributes</a> with their names as keys and the
values of the <a href="Base.html#M001614">attributes</a> as values.
</p>

<p class="source_link" id="M001614-show-link"><a onclick="toggle('M001614-source'); toggleText('M001614-link'); return false;" href="#" id="M001614-link">Show source...</a></p><div class="source" id="M001614-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2264</span>
2264:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
2265:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2266:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">name</span>)
2267:           <span class="ruby-identifier">attrs</span>
2268:         <span class="ruby-keyword kw">end</span>
2269:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001613"><br/></a>
<div class="method_block"><h3>
<a href='#M001613'>


attributes=

(new_attributes, guard_protected_attributes = true)

</a>
</h3>
<p>
Allows you to set all the <a href="Base.html#M001614">attributes</a> at
once by passing in a <a href="Base.html#M001623">hash</a> with keys
matching the attribute names (which again matches the column names).
Sensitive <a href="Base.html#M001614">attributes</a> can be protected from
this form of mass-assignment by using the <tt><a
href="Base.html#M001553">attr_protected</a></tt> macro. Or you can
alternatively specify which <a href="Base.html#M001614">attributes</a>
<b>can</b> be accessed with the <tt><a
href="Base.html#M001554">attr_accessible</a></tt> macro. Then all the <a
href="Base.html#M001614">attributes</a> not included in that won&#8216;t be
allowed to be mass-assigned.
</p>

<p class="source_link" id="M001613-show-link"><a onclick="toggle('M001613-source'); toggleText('M001613-link'); return false;" href="#" id="M001613-link">Show source...</a></p><div class="source" id="M001613-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2247</span>
2247:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">new_attributes</span>, <span class="ruby-identifier">guard_protected_attributes</span> = <span class="ruby-keyword kw">true</span>)
2248:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">nil?</span>
2249:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">new_attributes</span>.<span class="ruby-identifier">dup</span>
2250:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">stringify_keys!</span>
2251: 
2252:         <span class="ruby-identifier">multi_parameter_attributes</span> = []
2253:         <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">remove_attributes_protected_from_mass_assignment</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">guard_protected_attributes</span>
2254: 
2255:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
2256:           <span class="ruby-identifier">k</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;(&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">multi_parameter_attributes</span> <span class="ruby-operator">&lt;&lt;</span> [ <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> ] <span class="ruby-operator">:</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">k</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;=&quot;</span>, <span class="ruby-identifier">v</span>)
2257:         <span class="ruby-keyword kw">end</span>
2258: 
2259:         <span class="ruby-identifier">assign_multiparameter_attributes</span>(<span class="ruby-identifier">multi_parameter_attributes</span>)
2260:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001615"><br/></a>
<div class="method_block"><h3>
<a href='#M001615'>


attributes_before_type_cast

()

</a>
</h3>
<p>
Returns a <a href="Base.html#M001623">hash</a> of <a
href="Base.html#M001614">attributes</a> before typecasting and
deserialization.
</p>

<p class="source_link" id="M001615-show-link"><a onclick="toggle('M001615-source'); toggleText('M001615-link'); return false;" href="#" id="M001615-link">Show source...</a></p><div class="source" id="M001615-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2272</span>
2272:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes_before_type_cast</span>
2273:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attrs</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2274:           <span class="ruby-identifier">attrs</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">read_attribute_before_type_cast</span>(<span class="ruby-identifier">name</span>)
2275:           <span class="ruby-identifier">attrs</span>
2276:         <span class="ruby-keyword kw">end</span>
2277:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001600"><br/></a>
<div class="method_block"><h3>
<a href='#M001600'>


becomes

(klass)

</a>
</h3>
<p>
Returns an instance of the specified klass with the <a
href="Base.html#M001614">attributes</a> of the current record. This is
mostly useful in relation to single-table inheritance structures where you
want a subclass to appear as the superclass. This can be used along with
record identification in Action Pack to allow, say, Client &lt; Company to
do something like render :partial =&gt; @client.becomes(Company) to render
that instance using the companies/company partial instead of
clients/client.
</p>
<p>
Note: The <a href="Base.html#M001590">new</a> instance will share a link to
the same <a href="Base.html#M001614">attributes</a> as the original class.
So any change to the <a href="Base.html#M001614">attributes</a> in either
instance will affect the other.
</p>

<p class="source_link" id="M001600-show-link"><a onclick="toggle('M001600-source'); toggleText('M001600-link'); return false;" href="#" id="M001600-link">Show source...</a></p><div class="source" id="M001600-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2150</span>
2150:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">becomes</span>(<span class="ruby-identifier">klass</span>)
2151:         <span class="ruby-identifier">returning</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">became</span><span class="ruby-operator">|</span>
2152:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes&quot;</span>, <span class="ruby-ivar">@attributes</span>)
2153:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes_cache&quot;</span>, <span class="ruby-ivar">@attributes_cache</span>)
2154:           <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@new_record&quot;</span>, <span class="ruby-identifier">new_record?</span>)
2155:         <span class="ruby-keyword kw">end</span>
2156:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001593"><br/></a>
<div class="method_block"><h3>
<a href='#M001593'>


cache_key

()

</a>
</h3>
<p>
Returns a cache key that can be used to identify this record. Examples:
</p>
<pre>
  Product.new.cache_key     # =&gt; &quot;products/new&quot;
  Product.find(5).cache_key # =&gt; &quot;products/5&quot; (updated_at not available)
  Person.find(5).cache_key  # =&gt; &quot;people/5-20071224150000&quot; (updated_at available)
</pre>

<p class="source_link" id="M001593-show-link"><a onclick="toggle('M001593-source'); toggleText('M001593-link'); return false;" href="#" id="M001593-link">Show source...</a></p><div class="source" id="M001593-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2069</span>
2069:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cache_key</span>
2070:         <span class="ruby-keyword kw">case</span> 
2071:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">new_record?</span>
2072:           <span class="ruby-node">&quot;#{self.class.name.tableize}/new&quot;</span>
2073:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">:updated_at</span>]
2074:           <span class="ruby-node">&quot;#{self.class.name.tableize}/#{id}-#{updated_at.to_s(:number)}&quot;</span>
2075:         <span class="ruby-keyword kw">else</span>
2076:           <span class="ruby-node">&quot;#{self.class.name.tableize}/#{id}&quot;</span>
2077:         <span class="ruby-keyword kw">end</span>
2078:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001599"><br/></a>
<div class="method_block"><h3>
<a href='#M001599'>


clone

()

</a>
</h3>
<p>
Returns a <a href="Base.html#M001599">clone</a> of the record that
hasn&#8216;t been assigned an <a href="Base.html#M001591">id</a> yet and is
treated as a <a href="Base.html#M001590">new</a> record. Note that this is
a &quot;shallow&quot; <a href="Base.html#M001599">clone</a>: it copies the
object&#8216;s <a href="Base.html#M001614">attributes</a> only, not its
associations. The extent of a &quot;deep&quot; <a
href="Base.html#M001599">clone</a> is application-specific and is therefore
left to the application to implement according to its need.
</p>

<p class="source_link" id="M001599-show-link"><a onclick="toggle('M001599-source'); toggleText('M001599-link'); return false;" href="#" id="M001599-link">Show source...</a></p><div class="source" id="M001599-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2135</span>
2135:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clone</span>
2136:         <span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">clone_attributes</span>(<span class="ruby-identifier">:read_attribute_before_type_cast</span>)
2137:         <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>)
2138:         <span class="ruby-identifier">record</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new</span>
2139:         <span class="ruby-identifier">record</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:instance_variable_set</span>, <span class="ruby-value str">'@attributes'</span>, <span class="ruby-identifier">attrs</span>
2140:         <span class="ruby-identifier">record</span>
2141:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001620"><br/></a>
<div class="method_block"><h3>
<a href='#M001620'>


column_for_attribute

(name)

</a>
</h3>
<p>
Returns the column object for the named attribute.
</p>

<p class="source_link" id="M001620-show-link"><a onclick="toggle('M001620-source'); toggleText('M001620-link'); return false;" href="#" id="M001620-link">Show source...</a></p><div class="source" id="M001620-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2310</span>
2310:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">name</span>)
2311:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>]
2312:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001633"><br/></a>
<div class="method_block"><h3>
<a href='#M001633'>


connection

()

</a>
</h3>
<p>
Returns the <a href="Base.html#M001630">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M001630">connection</a> to do database work that
isn&#8216;t easily done without going straight to SQL.
</p>

<p class="source_link" id="M001633-show-link"><a onclick="toggle('M001633-source'); toggleText('M001633-link'); return false;" href="#" id="M001633-link">Show source...</a></p><div class="source" id="M001633-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb, line 173</span>
173:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connection</span>
174:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection</span>
175:     <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001606"><br/></a>
<div class="method_block"><h3>
<a href='#M001606'>


decrement

(attribute, by = 1)

</a>
</h3>
<p>
Initializes the <tt>attribute</tt> to zero if nil and subtracts the value
passed as <tt>by</tt> (default is one). Only makes sense for number-based
<a href="Base.html#M001614">attributes</a>. Returns self.
</p>

<p class="source_link" id="M001606-show-link"><a onclick="toggle('M001606-source'); toggleText('M001606-link'); return false;" href="#" id="M001606-link">Show source...</a></p><div class="source" id="M001606-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2193</span>
2193:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2194:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
2195:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">by</span>
2196:         <span class="ruby-keyword kw">self</span>
2197:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001607"><br/></a>
<div class="method_block"><h3>
<a href='#M001607'>


decrement!

(attribute, by = 1)

</a>
</h3>
<p>
Decrements the <tt>attribute</tt> and saves the record. Note: Updates made
with this method aren&#8216;t subjected to validation checks
</p>

<p class="source_link" id="M001607-show-link"><a onclick="toggle('M001607-source'); toggleText('M001607-link'); return false;" href="#" id="M001607-link">Show source...</a></p><div class="source" id="M001607-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2201</span>
2201:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2202:         <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2203:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001598"><br/></a>
<div class="method_block"><h3>
<a href='#M001598'>


destroy

()

</a>
</h3>
<p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8216;t be persisted).
</p>

<p class="source_link" id="M001598-show-link"><a onclick="toggle('M001598-source'); toggleText('M001598-link'); return false;" href="#" id="M001598-link">Show source...</a></p><div class="source" id="M001598-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2118</span>
2118:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>
2119:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_record?</span>
2120:           <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;DELETE FROM \#{self.class.quoted_table_name}\nWHERE \#{connection.quote_column_name(self.class.primary_key)} = \#{quoted_id}\n&quot;</span>, <span class="ruby-node">&quot;#{self.class.name} Destroy&quot;</span>
2121:         <span class="ruby-keyword kw">end</span>
2122: 
2123:         <span class="ruby-identifier">freeze</span>
2124:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001622"><br/></a>
<div class="method_block"><h3>
<a href='#M001622'>


eql?

(comparison_object)

</a>
</h3>
<p>
Delegates to ==
</p>

<p class="source_link" id="M001622-show-link"><a onclick="toggle('M001622-source'); toggleText('M001622-link'); return false;" href="#" id="M001622-link">Show source...</a></p><div class="source" id="M001622-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2323</span>
2323:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">comparison_object</span>)
2324:         <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">comparison_object</span>)
2325:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001624"><br/></a>
<div class="method_block"><h3>
<a href='#M001624'>


freeze

()

</a>
</h3>
<p>
Freeze the <a href="Base.html#M001614">attributes</a> <a
href="Base.html#M001623">hash</a> such that associations are still
accessible, even on destroyed records.
</p>

<p class="source_link" id="M001624-show-link"><a onclick="toggle('M001624-source'); toggleText('M001624-link'); return false;" href="#" id="M001624-link">Show source...</a></p><div class="source" id="M001624-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2334</span>
2334:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">freeze</span>
2335:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">freeze</span>; <span class="ruby-keyword kw">self</span>
2336:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001625"><br/></a>
<div class="method_block"><h3>
<a href='#M001625'>


frozen?

()

</a>
</h3>
<p>
Returns <tt>true</tt> if the <a href="Base.html#M001614">attributes</a> <a
href="Base.html#M001623">hash</a> has been frozen.
</p>

<p class="source_link" id="M001625-show-link"><a onclick="toggle('M001625-source'); toggleText('M001625-link'); return false;" href="#" id="M001625-link">Show source...</a></p><div class="source" id="M001625-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2339</span>
2339:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frozen?</span>
2340:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
2341:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001618"><br/></a>
<div class="method_block"><h3>
<a href='#M001618'>


has_attribute?

(attr_name)

</a>
</h3>
<p>
Returns true if the given attribute is in the <a
href="Base.html#M001614">attributes</a> <a
href="Base.html#M001623">hash</a>
</p>

<p class="source_link" id="M001618-show-link"><a onclick="toggle('M001618-source'); toggleText('M001618-link'); return false;" href="#" id="M001618-link">Show source...</a></p><div class="source" id="M001618-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2300</span>
2300:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">attr_name</span>)
2301:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>)
2302:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001623"><br/></a>
<div class="method_block"><h3>
<a href='#M001623'>


hash

()

</a>
</h3>
<p>
Delegates to <a href="Base.html#M001591">id</a> in order to allow two
records of the same type and <a href="Base.html#M001591">id</a> to work
with something like:
</p>
<pre>
  [ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</pre>

<p class="source_link" id="M001623-show-link"><a onclick="toggle('M001623-source'); toggleText('M001623-link'); return false;" href="#" id="M001623-link">Show source...</a></p><div class="source" id="M001623-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2329</span>
2329:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>
2330:         <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
2331:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001591"><br/></a>
<div class="method_block"><h3>
<a href='#M001591'>


id

()

</a>
</h3>
<p>
A model instance&#8216;s primary key is always available as model.id
whether you name it the default &#8216;<a
href="Base.html#M001591">id</a>&#8217; or set it to something else.
</p>

<p class="source_link" id="M001591-show-link"><a onclick="toggle('M001591-source'); toggleText('M001591-link'); return false;" href="#" id="M001591-link">Show source...</a></p><div class="source" id="M001591-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2048</span>
2048:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id</span>
2049:         <span class="ruby-identifier">attr_name</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>
2050:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for_attribute</span>(<span class="ruby-identifier">attr_name</span>)
2051: 
2052:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_read_method</span>, <span class="ruby-identifier">:id</span>, <span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">column</span>)
2053:         <span class="ruby-comment cmt"># now that the method exists, call it</span>
2054:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_sym</span>
2055: 
2056:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001594"><br/></a>
<div class="method_block"><h3>
<a href='#M001594'>


id=

(value)

</a>
</h3>
<p>
Sets the primary ID.
</p>

<p class="source_link" id="M001594-show-link"><a onclick="toggle('M001594-source'); toggleText('M001594-link'); return false;" href="#" id="M001594-link">Show source...</a></p><div class="source" id="M001594-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2089</span>
2089:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id=</span>(<span class="ruby-identifier">value</span>)
2090:         <span class="ruby-identifier">write_attribute</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>, <span class="ruby-identifier">value</span>)
2091:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001604"><br/></a>
<div class="method_block"><h3>
<a href='#M001604'>


increment

(attribute, by = 1)

</a>
</h3>
<p>
Initializes the <tt>attribute</tt> to zero if nil and adds the value passed
as <tt>by</tt> (default is one). Only makes sense for number-based <a
href="Base.html#M001614">attributes</a>. Returns self.
</p>

<p class="source_link" id="M001604-show-link"><a onclick="toggle('M001604-source'); toggleText('M001604-link'); return false;" href="#" id="M001604-link">Show source...</a></p><div class="source" id="M001604-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2180</span>
2180:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2181:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
2182:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">by</span>
2183:         <span class="ruby-keyword kw">self</span>
2184:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001605"><br/></a>
<div class="method_block"><h3>
<a href='#M001605'>


increment!

(attribute, by = 1)

</a>
</h3>
<p>
Increments the <tt>attribute</tt> and saves the record. Note: Updates made
with this method aren&#8216;t subjected to validation checks
</p>

<p class="source_link" id="M001605-show-link"><a onclick="toggle('M001605-source'); toggleText('M001605-link'); return false;" href="#" id="M001605-link">Show source...</a></p><div class="source" id="M001605-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2188</span>
2188:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
2189:         <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2190:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001628"><br/></a>
<div class="method_block"><h3>
<a href='#M001628'>


inspect

()

</a>
</h3>
<p>
Returns the contents of the record as a nicely formatted string.
</p>

<p class="source_link" id="M001628-show-link"><a onclick="toggle('M001628-source'); toggleText('M001628-link'); return false;" href="#" id="M001628-link">Show source...</a></p><div class="source" id="M001628-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2355</span>
2355:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
2356:         <span class="ruby-identifier">attributes_as_nice_string</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
2357:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">new_record?</span>
2358:             <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
2359:           <span class="ruby-keyword kw">end</span>
2360:         }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>)
2361:         <span class="ruby-node">&quot;#&lt;#{self.class} #{attributes_as_nice_string}&gt;&quot;</span>
2362:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001595"><br/></a>
<div class="method_block"><h3>
<a href='#M001595'>


new_record?

()

</a>
</h3>
<p>
Returns true if this object hasn&#8216;t been saved yet &#8212; that is, a
record for the object doesn&#8216;t exist yet.
</p>

<p class="source_link" id="M001595-show-link"><a onclick="toggle('M001595-source'); toggleText('M001595-link'); return false;" href="#" id="M001595-link">Show source...</a></p><div class="source" id="M001595-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2094</span>
2094:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_record?</span>
2095:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@new_record</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@new_record</span>
2096:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001627"><br/></a>
<div class="method_block"><h3>
<a href='#M001627'>


readonly!

()

</a>
</h3>
<p>
Marks this record as read only.
</p>

<p class="source_link" id="M001627-show-link"><a onclick="toggle('M001627-source'); toggleText('M001627-link'); return false;" href="#" id="M001627-link">Show source...</a></p><div class="source" id="M001627-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2350</span>
2350:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly!</span>
2351:         <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword kw">true</span>
2352:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001626"><br/></a>
<div class="method_block"><h3>
<a href='#M001626'>


readonly?

()

</a>
</h3>
<p>
Returns <tt>true</tt> if the record is read only. Records loaded through
joins with piggy-back <a href="Base.html#M001614">attributes</a> will be
marked as read only since they cannot be saved.
</p>

<p class="source_link" id="M001626-show-link"><a onclick="toggle('M001626-source'); toggleText('M001626-link'); return false;" href="#" id="M001626-link">Show source...</a></p><div class="source" id="M001626-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2345</span>
2345:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readonly?</span>
2346:         <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@readonly</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@readonly</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
2347:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001610"><br/></a>
<div class="method_block"><h3>
<a href='#M001610'>


reload

(options = nil)

</a>
</h3>
<p>
Reloads the <a href="Base.html#M001614">attributes</a> of this object from
the database. The optional options argument is passed to <a
href="Base.html#M001539">find</a> when reloading so you may do e.g.
record.reload(:lock =&gt; true) to <a href="Base.html#M001610">reload</a>
the same record with an exclusive row lock.
</p>

<p class="source_link" id="M001610-show-link"><a onclick="toggle('M001610-source'); toggleText('M001610-link'); return false;" href="#" id="M001610-link">Show source...</a></p><div class="source" id="M001610-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2221</span>
2221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
2222:         <span class="ruby-identifier">clear_aggregation_cache</span>
2223:         <span class="ruby-identifier">clear_association_cache</span>
2224:         <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">update</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">'@attributes'</span>))
2225:         <span class="ruby-ivar">@attributes_cache</span> = {}
2226:         <span class="ruby-keyword kw">self</span>
2227:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001596"><br/></a>
<div class="method_block"><h3>
<a href='#M001596'>


save

()

</a>
</h3>
<ul>
<li>No record exists: Creates a <a href="Base.html#M001590">new</a> record with
values matching those of the object <a
href="Base.html#M001614">attributes</a>.

</li>
<li>A record does exist: Updates the record with values matching those of the
object <a href="Base.html#M001614">attributes</a>.

</li>
</ul>
<p>
Note: If your model specifies any validations then the method declaration
dynamically changes to:
</p>
<pre>
  save(perform_validation=true)
</pre>
<p>
Calling <a href="Base.html#M001596">save</a>(false) saves the model without
running validations. See <a
href="Validations.html">ActiveRecord::Validations</a> for more information.
</p>

<p class="source_link" id="M001596-show-link"><a onclick="toggle('M001596-source'); toggleText('M001596-link'); return false;" href="#" id="M001596-link">Show source...</a></p><div class="source" id="M001596-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2106</span>
2106:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>
2107:         <span class="ruby-identifier">create_or_update</span>
2108:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001597"><br/></a>
<div class="method_block"><h3>
<a href='#M001597'>


save!

()

</a>
</h3>
<p>
Attempts to <a href="Base.html#M001596">save</a> the record, but instead of
just returning false if it couldn&#8216;t happen, it raises a <a
href="RecordNotSaved.html">RecordNotSaved</a> exception
</p>

<p class="source_link" id="M001597-show-link"><a onclick="toggle('M001597-source'); toggleText('M001597-link'); return false;" href="#" id="M001597-link">Show source...</a></p><div class="source" id="M001597-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2112</span>
2112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save!</span>
2113:         <span class="ruby-identifier">create_or_update</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">RecordNotSaved</span>)
2114:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001592"><br/></a>
<div class="method_block"><h3>
<a href='#M001592'>


to_param

()

</a>
</h3>
<p>
Enables Active Record objects to be used as URL parameters in Action Pack
automatically.
</p>

<p class="source_link" id="M001592-show-link"><a onclick="toggle('M001592-source'); toggleText('M001592-link'); return false;" href="#" id="M001592-link">Show source...</a></p><div class="source" id="M001592-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2059</span>
2059:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_param</span>
2060:         <span class="ruby-comment cmt"># We can't use alias_method here, because method 'id' optimizes itself on the fly.</span>
2061:         (<span class="ruby-identifier">id</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># Be sure to stringify the id for routes</span>
2062:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001608"><br/></a>
<div class="method_block"><h3>
<a href='#M001608'>


toggle

(attribute)

</a>
</h3>
<p>
Turns an <tt>attribute</tt> that&#8216;s currently true into false and vice
versa. Returns self.
</p>

<p class="source_link" id="M001608-show-link"><a onclick="toggle('M001608-source'); toggleText('M001608-link'); return false;" href="#" id="M001608-link">Show source...</a></p><div class="source" id="M001608-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2206</span>
2206:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>)
2207:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] = <span class="ruby-operator">!</span><span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{attribute}?&quot;</span>)
2208:         <span class="ruby-keyword kw">self</span>
2209:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001609"><br/></a>
<div class="method_block"><h3>
<a href='#M001609'>


toggle!

(attribute)

</a>
</h3>
<p>
Toggles the <tt>attribute</tt> and saves the record. Note: Updates made
with this method aren&#8216;t subjected to validation checks
</p>

<p class="source_link" id="M001609-show-link"><a onclick="toggle('M001609-source'); toggleText('M001609-link'); return false;" href="#" id="M001609-link">Show source...</a></p><div class="source" id="M001609-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2213</span>
2213:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle!</span>(<span class="ruby-identifier">attribute</span>)
2214:         <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
2215:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001601"><br/></a>
<div class="method_block"><h3>
<a href='#M001601'>


update_attribute

(name, value)

</a>
</h3>
<p>
Updates a single attribute and saves the record. This is especially useful
for boolean flags on existing records. Note: This method is overwritten by
the Validation module that&#8216;ll make sure that updates made with this
method aren&#8216;t subjected to validation checks. Hence, <a
href="Base.html#M001614">attributes</a> can be updated even if the full
object isn&#8216;t valid.
</p>

<p class="source_link" id="M001601-show-link"><a onclick="toggle('M001601-source'); toggleText('M001601-link'); return false;" href="#" id="M001601-link">Show source...</a></p><div class="source" id="M001601-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2161</span>
2161:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
2162:         <span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'='</span>, <span class="ruby-identifier">value</span>)
2163:         <span class="ruby-identifier">save</span>
2164:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001602"><br/></a>
<div class="method_block"><h3>
<a href='#M001602'>


update_attributes

(attributes)

</a>
</h3>
<p>
Updates all the <a href="Base.html#M001614">attributes</a> from the
passed-in Hash and saves the record. If the object is invalid, the saving
will fail and false will be returned.
</p>

<p class="source_link" id="M001602-show-link"><a onclick="toggle('M001602-source'); toggleText('M001602-link'); return false;" href="#" id="M001602-link">Show source...</a></p><div class="source" id="M001602-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2168</span>
2168:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
2169:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
2170:         <span class="ruby-identifier">save</span>
2171:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M001603"><br/></a>
<div class="method_block"><h3>
<a href='#M001603'>


update_attributes!

(attributes)

</a>
</h3>
<p>
Updates an object just like <a
href="Base.html#M001602">Base.update_attributes</a> but calls <a
href="Base.html#M001597">save!</a> instead of <a
href="Base.html#M001596">save</a> so an exception is raised if the record
is invalid.
</p>

<p class="source_link" id="M001603-show-link"><a onclick="toggle('M001603-source'); toggleText('M001603-link'); return false;" href="#" id="M001603-link">Show source...</a></p><div class="source" id="M001603-source"><pre>      <span class="ruby-comment cmt"># File vendor/rails/activerecord/lib/active_record/base.rb, line 2174</span>
2174:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">attributes</span>)
2175:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
2176:         <span class="ruby-identifier">save!</span>
2177:       <span class="ruby-keyword kw">end</span></pre></div>
</div>





</div><div class="clear" id="footer">Generated on Jan 21, 2008 / Allison 2 &copy; 2007 <a href="http://cloudbur.st">Cloudburst, LLC</a></div></div></body></html>