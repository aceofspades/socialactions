<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>Module: ActionController::Filters::ClassMethods</title><link type="text/css" href="../../.././rdoc-style.css" media="screen" rel="stylesheet"/><script type="text/javascript">
// Allison template
// Copyright 2007, 2008 Cloudburst, LLC. Licensed under the AFL 3. See the included LICENSE file.

var href_base = '../../.././rdoc-style.css'.replace(/(.*\/).*/, '$1'); // inline js is good for something  

function $(id) {
    if (document.getElementById)
      elem = document.getElementById(id);
    else if ( document.all )
      elem = eval("document.all." + id);
    else
      return false;
    return elem;
}

  function toggle(id) {
    elem = $(id);
    elemStyle = elem.style;   
    if (elemStyle.display == "block") {
      elemStyle.display = "none"
    } else {
      elemStyle.display = "block"
    }
    return true;
  }

  function toggleText(id) {
    elem = $(id)
    if (m = elem.innerHTML.match(/(Hide)(.*)/)) {
      elem.innerHTML = "Show" + m[2];
    } else if (m = elem.innerHTML.match(/(Show)(.*)/)) {
      elem.innerHTML = "Hide" + m[2];
    }
    return true;
  }

function span(s, klass) {
  return '<span class="' + klass + '">' + s + '</span>';
}
  
function highlightSymbols() {
  pres = document.getElementsByTagName('pre');
  for(var i = 0; i < pres.length; i++) {
    pre = pres[i];
    spans = pre.getElementsByTagName('span');
    for(var k = 0; k < spans.length; k++) {
      span = spans[k];
      if (span.className.match(/ruby-identifier/)) {
        if (span.innerHTML.match(/^:/)) {
          span.className += " ruby-symbol";
        }
      }
    }
  }
}

 function hasClass(obj) {
     var result = false;
     if (obj.getAttributeNode("class") != null) {
         result = obj.getAttributeNode("class").value;
     }
     return result;
  }   

 function stripe() {
    var even = true;
    var color = "#e4ebed";
    var tables = document.getElementsByTagName('table');
    if (tables.length == 0) { return; }
    for (var h = 0; h < tables.length; h++) {
        var trs = tables[h].getElementsByTagName("tr");
        for (var i = 0; i < trs.length; i++) {
          var tds = trs[i].getElementsByTagName("td");
            for (var j = 0; j < tds.length; j++) {       
              if (hasClass(tds[j]) != "first") {                
              var mytd = tds[j];
              if (even) {
                mytd.style.backgroundColor = color;
              }         
            }
          }
          even =  ! even;
      }
    }
  }
  
function ajaxGet(url) {
  url = (href_base + url).replace('/./', '/')
  var req = false;

  if (window.ActiveXObject) {
    try {
      // stupid hack because IE7 disables local Ajax with the native xmlhttprequest object
      // for security purposes. Yet ActiveX still works. Thanks, Microsoft. I hate you. Die.
      req = new ActiveXObject("MSXML2.XMLHTTP.3.0");
    } catch (e) {
      try {
        /* IE 6 and maybe 5, don't know, don't care */
        req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          req = false;
        }
      }
    }
  }
    
  /* real browsers */
  if (!req && window.XMLHttpRequest) {
    try {
      req = new XMLHttpRequest();
    } catch (e) {
      req = false;
    }
  } 
  
  if (req) {
    req.open('GET', url, false);
    req.send(null);
    return req.responseText;
  } else {
    return "Ajax error";  
  }
}


function addEvent(elm, evType, fn, useCapture) {
	if (elm.addEventListener) {
	  elm.addEventListener(evType, fn, useCapture);  
  	return true;
	} else if (elm.attachEvent) {
  	var r = elm.attachEvent('on' + evType, fn);  
	  return r;  
	} else {
  	elm['on' + evType] = fn;
	}
}

function insertIndices() {
  pages = ["class", "file", "method"]
  for (x in pages) { 
    $(pages[x]).innerHTML += ajaxGet('fr_' + pages[x] + '_index.html').replace(/(href=")/g, '$1' + href_base);
  }
  /* mouseoverify method links */
  links = $('method').getElementsByTagName('a');
  for (var x = 0; x < links.length; x++) {
    if (m = links[x].innerHTML.match(/(.*)\s\((.*)\)/)) {
      links[x].innerHTML = m[1] + '<br>';
      links[x].title = m[2];
    }
  }
  /* this is stupid */
  $('class').style.display = "block";
  $('file').style.display = "block";
  
  /* has to be here because IE7 does not guarantee the onLoad callback order */
  abbreviateIndicesInner(["class", "file"], 25, "a");
  /* same, linkTitle() depends on the class link list */
  linkTitle();
}

function abbreviateIndices() {
  var ids = ["defined_in", "child_of", "includes", "requires", "method", "methods"];
  abbreviateIndicesInner(ids, 25, 'a');
  abbreviateIndicesInner(ids, 25, 'span');
}

function abbreviateIndicesInner(indices, amount, tag) {
  for (var x = 0; x < indices.length; x++) { 
    var the_index = $(indices[x]);
    if (the_index) {
      links = the_index.getElementsByTagName(tag);
      for (var y = 0; y < links.length; y++) {
        var link = links[y];
        if (link.getElementsByTagName('span').length == 0 && link.getElementsByTagName('a').length == 0) {
          // avoid nesting
          link.innerHTML = link.innerHTML.replace(/<br>|\n/gi, '');
          link.title = link.innerHTML;
          link.innerHTML = abbreviate(link.innerHTML, amount) + '<br>';
        }
      }
    }
  }
}

function linkTitle() {
  
  /* grab the correct title element from the index */
  var index_page = ajaxGet('index.html');
  title_text = index_page.match(/<title>(.*)<\/title>/m)[1];
  document.title = title_text + " - " + document.title;
  var p = $('header').getElementsByTagName('p')[0]
  if (p.innerHTML.match(/^\s*$/)) {
    p.innerHTML = title_text;
  } else {
    p.innerHTML = title_text + ": " + p.innerHTML;
  }
  
  /* set the link properly */
  title_link = index_page.match(/<a\s+href="(.*?)"/)[1];
  var element = $('title');
  var item_type = "";
  var item_name = "";
  if (m = element.innerHTML.match(/(Class:|Module:|File:)\s*(.*)/)) {
    item_type = m[1];
    item_name = m[2];
  } else {
    item_name = element.innerHTML;
  }
  element.innerHTML = '<a href="' + href_base + title_link + '">' + item_type + " " + abbreviate(item_name, 45) + '</a>';
  element.getElementsByTagName('a')[0].title = item_name
  
  /* breadcrumb navigation */
  items = item_name.split("::");
  items_new = item_name.split("::");
  file_links = $('class').getElementsByTagName('a');
  for (var x = 0; x < items.length - 1; x++ ){
    var item = items[x];
    link = ("/classes/" + items.slice(0,x).join("/") + "/" + item + ".html").replace('//', '/');
    regex = new RegExp(RegExp.escape(link) + '$');
    for (var y = 0; y < file_links.length; y++) {
      if (file_links[y].href.match(regex)) {
         items_new[x] = '<a href="' + href_base + link + '">' + item + '</a>';
         break;
      }
    }  
  }
  $('item_name').innerHTML = item_type + ' ' + items_new.join(" :: ");
}

function abbreviate(s, size) {
  while (s.length > size) {
    var old_s = s;
    s = s.replace(/\s|\n/mg, '');
    s = s.replace(/([A-Z])[a-z]+/m, '$1');
    if (!s || old_s == s) {
      return "..." + s.substring(s.length - size, s.length);
    }
  }
  return s;
}

function disableSubmit(event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  if (keyCode == 13) {
    return false;
  } else {
    return true;
  }
}
  
function filterList(id, s, event) {
  
  /* some weak escaping */
  s = s.replace(/[^\w\d\.\_\-\/\:\=\[\]\?\!]/g, '');
  s = RegExp.escape(s);
  
  var show_all = false;
  if (s.match(/^\s*$/)) {
    show_all = true;
  }
  
  links = $(id).getElementsByTagName('a')
  regex = new RegExp(s, 'i');
  
  for (var x = 0; x < links.length; x++) {
    var link = links[x];
    if (show_all) {
      link.style.display = 'inline';
    } else {
       if (link.innerHTML.match(regex)) {        
         link.style.display = 'inline';
       } else {
         link.style.display = 'none';
       }
    }
  }
  return true;
}

RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

function hacks() {
  // show the spacer if necessary, 
  divs = document.getElementsByTagName('div');
  for(var x = 0; x < divs.length; x++) {
    if (divs[x].className && divs[x].className.match(/top/)) {
      document.getElementById('spacer').style.display = 'block';
    }
  }
  // remove extra colons from tables
  tds = document.getElementsByTagName('td');
  for(var x = 0; x < tds.length; x++) {
    str = tds[x].innerHTML
    if (str.charAt(str.length - 1) == ":") {
      tds[x].innerHTML = str.slice(0, str.length - 1)
    }
  }
}

addEvent(window, 'load', insertIndices, false);
addEvent(window, 'load', abbreviateIndices, false);
addEvent(window, 'load', stripe, false);
addEvent(window, 'load', highlightSymbols, false);
addEvent(window, 'load', hacks, false);
</script></head><body><div id="container"><div class="curve" id="preheader_curve_0"></div><div class="curve" id="preheader_curve_1"></div><div class="curve" id="preheader_curve_2"></div><div class="curve" id="preheader_curve_3"></div><div class="curve" id="preheader_curve_4"></div><div class="curve" id="preheader_curve_5"></div><div id="header"><p>
</p><span><h1 id="title">
Module: ActionController::Filters::ClassMethods
</h1></span>
</div><div class="clear"></div><div id="left">

<div class="navigation darker top" id="defined_in"><h3>Defined in</h3>

<a href="../../../files/vendor/rails/actionpack/lib/action_controller/filters_rb.html">vendor/rails/actionpack/lib/action_controller/filters.rb</a>

</div>



<div class="navigation top" id="methods"><h3>Methods</h3>


<a href='#M000355'>
after_filter<br/>
</a>




<a href='#M000353'>
append_after_filter<br/>
</a>




<a href='#M000356'>
append_around_filter<br/>
</a>




<a href='#M000350'>
append_before_filter<br/>
</a>




<a href='#M000363'>
append_filter_to_chain<br/>
</a>




<a href='#M000358'>
around_filter<br/>
</a>




<a href='#M000352'>
before_filter<br/>
</a>




<a href='#M000370'>
condition_hash<br/>
</a>




<a href='#M000362'>
filter_chain<br/>
</a>




<a href='#M000366'>
find_filter_append_position<br/>
</a>




<a href='#M000367'>
find_filter_prepend_position<br/>
</a>




<a href='#M000368'>
find_or_create_filter<br/>
</a>




<a href='#M000354'>
prepend_after_filter<br/>
</a>




<a href='#M000357'>
prepend_around_filter<br/>
</a>




<a href='#M000351'>
prepend_before_filter<br/>
</a>




<a href='#M000364'>
prepend_filter_to_chain<br/>
</a>




<a href='#M000371'>
remove_actions_from_included_actions!<br/>
</a>




<a href='#M000360'>
skip_after_filter<br/>
</a>




<a href='#M000359'>
skip_before_filter<br/>
</a>




<a href='#M000361'>
skip_filter<br/>
</a>




<a href='#M000369'>
update_conditions<br/>
</a>




<a href='#M000365'>
update_filter_chain<br/>
</a>


</div>
<div id="spacer"></div><div class="navigation darker index" id="class_wrapper"><div class="list_header"><h3>All classes</h3></div><div class="list_header_link"><a onclick="toggle('class'); toggleText('class_link'); return false;" href="#" id="class_link">Hide...</a></div><div class="clear"></div><div id="class"><form><label for="filter_class">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('class', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_class"></input></form></div></div><div class="navigation darker index" id="file_wrapper"><div class="list_header"><h3>All files</h3></div><div class="list_header_link"><a onclick="toggle('file'); toggleText('file_link'); return false;" href="#" id="file_link">Hide...</a></div><div class="clear"></div><div id="file"><form><label for="filter_file">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('file', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_file"></input></form></div></div><div class="navigation darker index" id="method_wrapper"><div class="list_header"><h3>All methods</h3></div><div class="list_header_link"><a onclick="toggle('method'); toggleText('method_link'); return false;" href="#" id="method_link">Show...</a></div><div class="clear"></div><div id="method"><form><label for="filter_method">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('method', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_method"></input></form></div></div></div><div id="content">
<h1 id="item_name">Module: ActionController::Filters::ClassMethods</h1>

<div id="description"><p>
Filters enable controllers to run shared pre- and post-processing code for
its actions. These filters can be used to do authentication, caching, or
auditing before the intended action is performed. Or to do localization or
output compression after the action has been performed. Filters have access
to the request, response, and all the instance variables set by other
filters in the chain or by the action (in the case of after filters).
</p>
<h2>Filter inheritance</h2>
<p>
Controller inheritance hierarchies share filters downwards, but subclasses
can also add or skip filters without affecting the superclass. For example:
</p>
<pre>
  class BankController &lt; ActionController::Base
    before_filter :audit

    private
      def audit
        # record the action and parameters in an audit log
      end
  end

  class VaultController &lt; BankController
    before_filter :verify_credentials

    private
      def verify_credentials
        # make sure the user is allowed into the vault
      end
  end
</pre>
<p>
Now any actions performed on the BankController will have the audit method
called before. On the VaultController, first the audit method is called,
then the verify_credentials method. If the audit method renders or
redirects, then verify_credentials and the intended action are never
called.
</p>
<h2>Filter types</h2>
<p>
A filter can take one of three forms: method reference (symbol), external
class, or inline method (proc). The first is the most common and works by
referencing a protected or private method somewhere in the inheritance
hierarchy of the controller by use of a symbol. In the bank example above,
both BankController and VaultController use this form.
</p>
<p>
Using an external class makes for more easily reused generic filters, such
as output compression. External filter classes are implemented by having a
static <tt>filter</tt> method on any class and then passing this class to
the filter method. Example:
</p>
<pre>
  class OutputCompressionFilter
    def self.filter(controller)
      controller.response.body = compress(controller.response.body)
    end
  end

  class NewspaperController &lt; ActionController::Base
    after_filter OutputCompressionFilter
  end
</pre>
<p>
The filter method is passed the controller instance and is hence granted
access to all aspects of the controller and can manipulate them as it sees
fit.
</p>
<p>
The inline method (using a proc) can be used to quickly do something small
that doesn&#8216;t require a lot of explanation. Or just as a quick test.
It works like this:
</p>
<pre>
  class WeblogController &lt; ActionController::Base
    before_filter { |controller| head(400) if controller.params[&quot;stop_action&quot;] }
  end
</pre>
<p>
As you can see, the block expects to be passed the controller after it has
assigned the request to the internal variables. This means that the block
has access to both the request and response objects complete with
convenience methods for params, session, template, and assigns. Note: The
inline method doesn&#8216;t strictly have to be a block; any object that
responds to call and returns 1 or -1 on arity will do (such as a Proc or an
Method object).
</p>
<p>
Please note that around_filters function a little differently than the
normal before and after filters with regard to filter types. Please see the
section dedicated to around_filters below.
</p>
<h2>Filter chain ordering</h2>
<p>
Using <tt><a href="ClassMethods.html#M000352">before_filter</a></tt> and
<tt><a href="ClassMethods.html#M000355">after_filter</a></tt> appends the
specified filters to the existing chain. That&#8216;s usually just fine,
but some times you care more about the order in which the filters are
executed. When that&#8216;s the case, you can use <tt><a
href="ClassMethods.html#M000351">prepend_before_filter</a></tt> and <tt><a
href="ClassMethods.html#M000354">prepend_after_filter</a></tt>. Filters
added by these methods will be put at the beginning of their respective
chain and executed before the rest. For example:
</p>
<pre>
  class ShoppingController &lt; ActionController::Base
    before_filter :verify_open_shop

  class CheckoutController &lt; ShoppingController
    prepend_before_filter :ensure_items_in_cart, :ensure_items_in_stock
</pre>
<p>
The filter chain for the CheckoutController is now
<tt>:ensure_items_in_cart, :ensure_items_in_stock,</tt>
<tt>:verify_open_shop</tt>. So if either of the ensure filters renders or
redirects, we&#8216;ll never get around to see if the shop is open or not.
</p>
<p>
You may pass multiple filter arguments of each type as well as a filter
block. If a block is given, it is treated as the last argument.
</p>
<h2>Around filters</h2>
<p>
Around filters wrap an action, executing code both before and after. They
may be declared as method references, blocks, or objects responding to
filter or to both before and after.
</p>
<p>
To use a method as an <a
href="ClassMethods.html#M000358">around_filter</a>, pass a symbol naming
the Ruby method. Yield (or block.call) within the method to run the action.
</p>
<pre>
  around_filter :catch_exceptions

  private
    def catch_exceptions
      yield
    rescue =&gt; exception
      logger.debug &quot;Caught exception! #{exception}&quot;
      raise
    end
</pre>
<p>
To use a block as an <a href="ClassMethods.html#M000358">around_filter</a>,
pass a block taking as args both the controller and the action block. You
can&#8216;t call yield directly from an <a
href="ClassMethods.html#M000358">around_filter</a> block; explicitly call
the action block instead:
</p>
<pre>
  around_filter do |controller, action|
    logger.debug &quot;before #{controller.action_name}&quot;
    action.call
    logger.debug &quot;after #{controller.action_name}&quot;
  end
</pre>
<p>
To use a filter object with <a
href="ClassMethods.html#M000358">around_filter</a>, pass an object
responding to :filter or both :before and :after. With a filter method,
yield to the block as above:
</p>
<pre>
  around_filter BenchmarkingFilter

  class BenchmarkingFilter
    def self.filter(controller, &amp;block)
      Benchmark.measure(&amp;block)
    end
  end
</pre>
<p>
With before and after methods:
</p>
<pre>
  around_filter Authorizer.new

  class Authorizer
    # This will run before the action. Redirecting aborts the action.
    def before(controller)
      unless user.authorized?
        redirect_to(login_url)
      end
    end

    # This will run after the action if and only if before did not render or redirect.
    def after(controller)
    end
  end
</pre>
<p>
If the filter has before and after methods, the before method will be
called before the action. If before renders or redirects, the filter chain
is halted and after will not be run. See Filter Chain Halting below for an
example.
</p>
<h2>Filter chain skipping</h2>
<p>
Declaring a filter on a base class conveniently applies to its subclasses,
but sometimes a subclass should skip some of its superclass&#8217; filters:
</p>
<pre>
  class ApplicationController &lt; ActionController::Base
    before_filter :authenticate
    around_filter :catch_exceptions
  end

  class WeblogController &lt; ApplicationController
    # Will run the :authenticate and :catch_exceptions filters.
  end

  class SignupController &lt; ApplicationController
    # Skip :authenticate, run :catch_exceptions.
    skip_before_filter :authenticate
  end

  class ProjectsController &lt; ApplicationController
    # Skip :catch_exceptions, run :authenticate.
    skip_filter :catch_exceptions
  end

  class ClientsController &lt; ApplicationController
    # Skip :catch_exceptions and :authenticate unless action is index.
    skip_filter :catch_exceptions, :authenticate, :except =&gt; :index
  end
</pre>
<h2>Filter conditions</h2>
<p>
Filters may be limited to specific actions by declaring the actions to
include or exclude. Both options accept single actions (:only =&gt; :index)
or arrays of actions (:except =&gt; [:foo, :bar]).
</p>
<pre>
  class Journal &lt; ActionController::Base
    # Require authentication for edit and delete.
    before_filter :authorize, :only =&gt; [:edit, :delete]

    # Passing options to a filter with a block.
    around_filter(:except =&gt; :index) do |controller, action_block|
      results = Profiler.run(&amp;action_block)
      controller.response.sub! &quot;&lt;/body&gt;&quot;, &quot;#{results}&lt;/body&gt;&quot;
    end

    private
      def authorize
        # Redirect to login unless authenticated.
      end
  end
</pre>
<h2>Filter Chain Halting</h2>
<p>
<tt><a href="ClassMethods.html#M000352">before_filter</a></tt> and <tt><a
href="ClassMethods.html#M000358">around_filter</a></tt> may halt the
request before a controller action is run. This is useful, for example, to
deny access to unauthenticated users or to redirect from http to https.
Simply call render or redirect. After filters will not be executed if the
filter chain is halted.
</p>
<p>
Around filters halt the request unless the action block is called. Given
these filters
</p>
<pre>
  after_filter :after
  around_filter :around
  before_filter :before
</pre>
<p>
The filter chain will look like:
</p>
<pre>
  ...
  .      #   .  #around (code before yield)
  .  .       #   .  .  #before (actual filter code is run)
  .  .  .       #   .  .  .  execute controller action
  .  .  .  /
  .  .  ...
  .  .  /
  .  #around (code after yield)
  . /
  #after (actual filter code is run, unless the around filter does not yield)
</pre>
<p>
If around returns before yielding, after will still not be run. The before
filter and controller action will not be run. If before renders or
redirects, the second half of around and will still run but after and the
action will not. If around fails to yield, after will not be run.
</p>
</div>




<p></p>






<h1>Public Instance Methods</h1>


<a class="small" name="M000355"><br/></a>
<div class="method_block"><h3>
<a href='#M000355'>


after_filter

(*filters, &amp;block)

</a>
</h3>
<p>
Alias for <a href="ClassMethods.html#M000353">append_after_filter</a>
</p>

</div>

<a class="small" name="M000353"><br/></a>
<div class="method_block"><h3>
<a href='#M000353'>


append_after_filter

(*filters, &amp;block)

</a>
</h3>
<p>
The passed <tt>filters</tt> will be appended to the array of filters that
run <em>after</em> actions on this controller are performed.
</p>

<p class="source_link" id="M000353-show-link"><a onclick="toggle('M000353-source'); toggleText('M000353-link'); return false;" href="#" id="M000353-link">Show source...</a></p><div class="source" id="M000353-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 265</span>
265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_after_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
266:         <span class="ruby-identifier">append_filter_to_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">:after</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
267:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000356"><br/></a>
<div class="method_block"><h3>
<a href='#M000356'>


append_around_filter

(*filters, &amp;block)

</a>
</h3>
<p>
If you <a href="ClassMethods.html#M000356">append_around_filter</a> A.new,
B.new, the filter chain looks like
</p>
<pre>
  B#before
    A#before
      # run the action
    A#after
  B#after
</pre>
<p>
With around filters which yield to the action block, before and after are
the code before and after the yield.
</p>

<p class="source_link" id="M000356-show-link"><a onclick="toggle('M000356-source'); toggleText('M000356-link'); return false;" href="#" id="M000356-link">Show source...</a></p><div class="source" id="M000356-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 289</span>
289:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_around_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
290:         <span class="ruby-identifier">filters</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-identifier">extract_conditions</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
291:         <span class="ruby-identifier">filters</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">proxy_before_and_after_filter</span>(<span class="ruby-identifier">f</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filter</span><span class="ruby-operator">|</span>
292:           <span class="ruby-identifier">append_filter_to_chain</span>([<span class="ruby-identifier">filter</span>, <span class="ruby-identifier">conditions</span>])
293:         <span class="ruby-keyword kw">end</span>
294:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000350"><br/></a>
<div class="method_block"><h3>
<a href='#M000350'>


append_before_filter

(*filters, &amp;block)

</a>
</h3>
<p>
The passed <tt>filters</tt> will be appended to the <a
href="ClassMethods.html#M000362">filter_chain</a> and will execute before
the action on this controller is performed.
</p>

<p class="source_link" id="M000350-show-link"><a onclick="toggle('M000350-source'); toggleText('M000350-link'); return false;" href="#" id="M000350-link">Show source...</a></p><div class="source" id="M000350-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 250</span>
250:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_before_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
251:         <span class="ruby-identifier">append_filter_to_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">:before</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
252:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000358"><br/></a>
<div class="method_block"><h3>
<a href='#M000358'>


around_filter

(*filters, &amp;block)

</a>
</h3>
<p>
Alias for <a href="ClassMethods.html#M000356">append_around_filter</a>
</p>

</div>

<a class="small" name="M000352"><br/></a>
<div class="method_block"><h3>
<a href='#M000352'>


before_filter

(*filters, &amp;block)

</a>
</h3>
<p>
Alias for <a href="ClassMethods.html#M000350">append_before_filter</a>
</p>

</div>

<a class="small" name="M000362"><br/></a>
<div class="method_block"><h3>
<a href='#M000362'>


filter_chain

()

</a>
</h3>
<p>
Returns an array of Filter objects for this controller.
</p>

<p class="source_link" id="M000362-show-link"><a onclick="toggle('M000362-source'); toggleText('M000362-link'); return false;" href="#" id="M000362-link">Show source...</a></p><div class="source" id="M000362-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 347</span>
347:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">filter_chain</span>
348:         <span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value str">&quot;filter_chain&quot;</span>) <span class="ruby-operator">||</span> []
349:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000354"><br/></a>
<div class="method_block"><h3>
<a href='#M000354'>


prepend_after_filter

(*filters, &amp;block)

</a>
</h3>
<p>
The passed <tt>filters</tt> will be prepended to the array of filters that
run <em>after</em> actions on this controller are performed.
</p>

<p class="source_link" id="M000354-show-link"><a onclick="toggle('M000354-source'); toggleText('M000354-link'); return false;" href="#" id="M000354-link">Show source...</a></p><div class="source" id="M000354-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 271</span>
271:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepend_after_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
272:         <span class="ruby-identifier">prepend_filter_to_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">:after</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
273:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000357"><br/></a>
<div class="method_block"><h3>
<a href='#M000357'>


prepend_around_filter

(*filters, &amp;block)

</a>
</h3>
<p>
If you <a href="ClassMethods.html#M000357">prepend_around_filter</a> A.new,
B.new, the filter chain looks like:
</p>
<pre>
  A#before
    B#before
      # run the action
    B#after
  A#after
</pre>
<p>
With around filters which yield to the action block, before and after are
the code before and after the yield.
</p>

<p class="source_link" id="M000357-show-link"><a onclick="toggle('M000357-source'); toggleText('M000357-link'); return false;" href="#" id="M000357-link">Show source...</a></p><div class="source" id="M000357-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 306</span>
306:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepend_around_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
307:         <span class="ruby-identifier">filters</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-identifier">extract_conditions</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
308:         <span class="ruby-identifier">filters</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">proxy_before_and_after_filter</span>(<span class="ruby-identifier">f</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filter</span><span class="ruby-operator">|</span>
309:           <span class="ruby-identifier">prepend_filter_to_chain</span>([<span class="ruby-identifier">filter</span>, <span class="ruby-identifier">conditions</span>])
310:         <span class="ruby-keyword kw">end</span>
311:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000351"><br/></a>
<div class="method_block"><h3>
<a href='#M000351'>


prepend_before_filter

(*filters, &amp;block)

</a>
</h3>
<p>
The passed <tt>filters</tt> will be prepended to the <a
href="ClassMethods.html#M000362">filter_chain</a> and will execute before
the action on this controller is performed.
</p>

<p class="source_link" id="M000351-show-link"><a onclick="toggle('M000351-source'); toggleText('M000351-link'); return false;" href="#" id="M000351-link">Show source...</a></p><div class="source" id="M000351-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 256</span>
256:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepend_before_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
257:         <span class="ruby-identifier">prepend_filter_to_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">:before</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
258:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000360"><br/></a>
<div class="method_block"><h3>
<a href='#M000360'>


skip_after_filter

(*filters)

</a>
</h3>
<p>
Removes the specified filters from the <tt>after</tt> filter chain. Note
that this only works for skipping method-reference filters, not procs. This
is especially useful for managing the chain in inheritance hierarchies
where only one out of many sub-controllers need a different hierarchy.
</p>
<p>
You can control the actions to skip the filter for with the <tt>:only</tt>
and <tt>:except</tt> options, just like when you apply the filters.
</p>

<p class="source_link" id="M000360-show-link"><a onclick="toggle('M000360-source'); toggleText('M000360-link'); return false;" href="#" id="M000360-link">Show source...</a></p><div class="source" id="M000360-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 332</span>
332:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_after_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>)
333:         <span class="ruby-identifier">skip_filter_in_chain</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">:after?</span>)
334:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000359"><br/></a>
<div class="method_block"><h3>
<a href='#M000359'>


skip_before_filter

(*filters)

</a>
</h3>
<p>
Removes the specified filters from the <tt>before</tt> filter chain. Note
that this only works for skipping method-reference filters, not procs. This
is especially useful for managing the chain in inheritance hierarchies
where only one out of many sub-controllers need a different hierarchy.
</p>
<p>
You can control the actions to skip the filter for with the <tt>:only</tt>
and <tt>:except</tt> options, just like when you apply the filters.
</p>

<p class="source_link" id="M000359-show-link"><a onclick="toggle('M000359-source'); toggleText('M000359-link'); return false;" href="#" id="M000359-link">Show source...</a></p><div class="source" id="M000359-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 322</span>
322:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_before_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>)
323:         <span class="ruby-identifier">skip_filter_in_chain</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">:before?</span>)
324:       <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000361"><br/></a>
<div class="method_block"><h3>
<a href='#M000361'>


skip_filter

(*filters)

</a>
</h3>
<p>
Removes the specified filters from the filter chain. This only works for
method reference (symbol) filters, not procs. This method is different from
<a href="ClassMethods.html#M000360">skip_after_filter</a> and <a
href="ClassMethods.html#M000359">skip_before_filter</a> in that it will
match any before, after or yielding around filter.
</p>
<p>
You can control the actions to skip the filter for with the <tt>:only</tt>
and <tt>:except</tt> options, just like when you apply the filters.
</p>

<p class="source_link" id="M000361-show-link"><a onclick="toggle('M000361-source'); toggleText('M000361-link'); return false;" href="#" id="M000361-link">Show source...</a></p><div class="source" id="M000361-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 342</span>
342:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">skip_filter</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>)
343:         <span class="ruby-identifier">skip_filter_in_chain</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">filters</span>)
344:       <span class="ruby-keyword kw">end</span></pre></div>
</div>


<h1>Protected Instance Methods</h1>


<a class="small" name="M000363"><br/></a>
<div class="method_block"><h3>
<a href='#M000363'>


append_filter_to_chain

(filters, filter_type = :around, &amp;block)

</a>
</h3>

<p class="source_link" id="M000363-show-link"><a onclick="toggle('M000363-source'); toggleText('M000363-link'); return false;" href="#" id="M000363-link">Show source...</a></p><div class="source" id="M000363-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 514</span>
514:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_filter_to_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span> = <span class="ruby-identifier">:around</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
515:           <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">find_filter_append_position</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>)
516:           <span class="ruby-identifier">update_filter_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>, <span class="ruby-identifier">pos</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
517:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000370"><br/></a>
<div class="method_block"><h3>
<a href='#M000370'>


condition_hash

(filters, *actions)

</a>
</h3>

<p class="source_link" id="M000370-show-link"><a onclick="toggle('M000370-source'); toggleText('M000370-link'); return false;" href="#" id="M000370-link">Show source...</a></p><div class="source" id="M000370-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 620</span>
620:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">condition_hash</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">actions</span>)
621:           <span class="ruby-identifier">actions</span> = <span class="ruby-identifier">actions</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
622:           <span class="ruby-identifier">filters</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>,<span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>.<span class="ruby-identifier">update</span>( <span class="ruby-identifier">f</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">actions</span>)) }
623:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000366"><br/></a>
<div class="method_block"><h3>
<a href='#M000366'>


find_filter_append_position

(filters, filter_type)

</a>
</h3>

<p class="source_link" id="M000366-show-link"><a onclick="toggle('M000366-source'); toggleText('M000366-link'); return false;" href="#" id="M000366-link">Show source...</a></p><div class="source" id="M000366-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 530</span>
530:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_filter_append_position</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>)
531:           <span class="ruby-comment cmt"># appending an after filter puts it at the end of the call chain</span>
532:           <span class="ruby-comment cmt"># before and around filters go before the first after filter in the chain</span>
533:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">filter_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:after</span>
534:             <span class="ruby-identifier">filter_chain</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span>,<span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
535:               <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">after?</span>
536:             <span class="ruby-keyword kw">end</span>
537:           <span class="ruby-keyword kw">end</span>
538:           <span class="ruby-keyword kw">return</span> <span class="ruby-value">-1</span>
539:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000367"><br/></a>
<div class="method_block"><h3>
<a href='#M000367'>


find_filter_prepend_position

(filters, filter_type)

</a>
</h3>

<p class="source_link" id="M000367-show-link"><a onclick="toggle('M000367-source'); toggleText('M000367-link'); return false;" href="#" id="M000367-link">Show source...</a></p><div class="source" id="M000367-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 541</span>
541:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_filter_prepend_position</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>)
542:           <span class="ruby-comment cmt"># prepending a before or around filter puts it at the front of the call chain</span>
543:           <span class="ruby-comment cmt"># after filters go before the first after filter in the chain</span>
544:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filter_type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:after</span>
545:             <span class="ruby-identifier">filter_chain</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span>,<span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
546:               <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">after?</span>
547:             <span class="ruby-keyword kw">end</span>
548:             <span class="ruby-keyword kw">return</span> <span class="ruby-value">-1</span>
549:           <span class="ruby-keyword kw">end</span>
550:           <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span>
551:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000368"><br/></a>
<div class="method_block"><h3>
<a href='#M000368'>


find_or_create_filter

(filter, filter_type)

</a>
</h3>

<p class="source_link" id="M000368-show-link"><a onclick="toggle('M000368-source'); toggleText('M000368-link'); return false;" href="#" id="M000368-link">Show source...</a></p><div class="source" id="M000368-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 560</span>
560:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_or_create_filter</span>(<span class="ruby-identifier">filter</span>, <span class="ruby-identifier">filter_type</span>)
561:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">found_filter</span> = <span class="ruby-identifier">find_filter</span>(<span class="ruby-identifier">filter</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">filter_type</span> }
562:             <span class="ruby-identifier">found_filter</span>
563:           <span class="ruby-keyword kw">else</span>
564:             <span class="ruby-identifier">f</span> = <span class="ruby-identifier">class_for_filter</span>(<span class="ruby-identifier">filter</span>, <span class="ruby-identifier">filter_type</span>).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">filter</span>)
565:             <span class="ruby-comment cmt"># apply proxy to filter if necessary</span>
566:             <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">filter_type</span>
567:             <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:before</span>
568:               <span class="ruby-constant">BeforeFilterProxy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">f</span>)
569:             <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:after</span>
570:               <span class="ruby-constant">AfterFilterProxy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">f</span>)
571:             <span class="ruby-keyword kw">else</span>
572:               <span class="ruby-identifier">f</span>
573:             <span class="ruby-keyword kw">end</span>
574:           <span class="ruby-keyword kw">end</span>
575:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000364"><br/></a>
<div class="method_block"><h3>
<a href='#M000364'>


prepend_filter_to_chain

(filters, filter_type = :around, &amp;block)

</a>
</h3>

<p class="source_link" id="M000364-show-link"><a onclick="toggle('M000364-source'); toggleText('M000364-link'); return false;" href="#" id="M000364-link">Show source...</a></p><div class="source" id="M000364-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 519</span>
519:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepend_filter_to_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span> = <span class="ruby-identifier">:around</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
520:           <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">find_filter_prepend_position</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>)
521:           <span class="ruby-identifier">update_filter_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>, <span class="ruby-identifier">pos</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
522:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000371"><br/></a>
<div class="method_block"><h3>
<a href='#M000371'>


remove_actions_from_included_actions!

(filters,*actions)

</a>
</h3>

<p class="source_link" id="M000371-show-link"><a onclick="toggle('M000371-source'); toggleText('M000371-link'); return false;" href="#" id="M000371-link">Show source...</a></p><div class="source" id="M000371-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 639</span>
639:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_actions_from_included_actions!</span>(<span class="ruby-identifier">filters</span>,<span class="ruby-operator">*</span><span class="ruby-identifier">actions</span>)
640:           <span class="ruby-identifier">actions</span> = <span class="ruby-identifier">actions</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
641:           <span class="ruby-identifier">updated_hash</span> = <span class="ruby-identifier">filters</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-identifier">read_inheritable_attribute</span>(<span class="ruby-value str">'included_actions'</span>)<span class="ruby-operator">||</span>{}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span>,<span class="ruby-identifier">filter</span><span class="ruby-operator">|</span>
642:             <span class="ruby-identifier">ia</span> = (<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">filter</span>] <span class="ruby-operator">||</span> []) <span class="ruby-operator">-</span> <span class="ruby-identifier">actions</span>
643:             <span class="ruby-identifier">ia</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span><span class="ruby-identifier">hash</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">filter</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">filter</span>] = <span class="ruby-identifier">ia</span>
644:             <span class="ruby-identifier">hash</span>
645:           <span class="ruby-keyword kw">end</span>
646:           <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">'included_actions'</span>, <span class="ruby-identifier">updated_hash</span>)
647:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000369"><br/></a>
<div class="method_block"><h3>
<a href='#M000369'>


update_conditions

(filters, conditions)

</a>
</h3>

<p class="source_link" id="M000369-show-link"><a onclick="toggle('M000369-source'); toggleText('M000369-link'); return false;" href="#" id="M000369-link">Show source...</a></p><div class="source" id="M000369-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 611</span>
611:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_conditions</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">conditions</span>)
612:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">empty?</span>
613:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">conditions</span>[<span class="ruby-identifier">:only</span>]
614:             <span class="ruby-identifier">write_inheritable_hash</span>(<span class="ruby-value str">'included_actions'</span>, <span class="ruby-identifier">condition_hash</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">conditions</span>[<span class="ruby-identifier">:only</span>]))
615:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">conditions</span>[<span class="ruby-identifier">:except</span>]
616:             <span class="ruby-identifier">write_inheritable_hash</span>(<span class="ruby-value str">'excluded_actions'</span>, <span class="ruby-identifier">condition_hash</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">conditions</span>[<span class="ruby-identifier">:except</span>]))
617:           <span class="ruby-keyword kw">end</span>
618:         <span class="ruby-keyword kw">end</span></pre></div>
</div>

<a class="small" name="M000365"><br/></a>
<div class="method_block"><h3>
<a href='#M000365'>


update_filter_chain

(filters, filter_type, pos, &amp;block)

</a>
</h3>

<p class="source_link" id="M000365-show-link"><a onclick="toggle('M000365-source'); toggleText('M000365-link'); return false;" href="#" id="M000365-link">Show source...</a></p><div class="source" id="M000365-source"><pre>     <span class="ruby-comment cmt"># File vendor/rails/actionpack/lib/action_controller/filters.rb, line 524</span>
524:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_filter_chain</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>, <span class="ruby-identifier">pos</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
525:           <span class="ruby-identifier">new_filters</span> = <span class="ruby-identifier">create_filters</span>(<span class="ruby-identifier">filters</span>, <span class="ruby-identifier">filter_type</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
526:           <span class="ruby-identifier">new_chain</span> = <span class="ruby-identifier">filter_chain</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-identifier">pos</span>, <span class="ruby-identifier">new_filters</span>).<span class="ruby-identifier">flatten</span>
527:           <span class="ruby-identifier">write_inheritable_attribute</span>(<span class="ruby-value str">'filter_chain'</span>, <span class="ruby-identifier">new_chain</span>)
528:         <span class="ruby-keyword kw">end</span></pre></div>
</div>





</div><div class="clear" id="footer">Generated on Jan 21, 2008 / Allison 2 &copy; 2007 <a href="http://cloudbur.st">Cloudburst, LLC</a></div></div></body></html>