<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><title>File: README</title><link type="text/css" href="../../../.././rdoc-style.css" media="screen" rel="stylesheet"/><script type="text/javascript">
// Allison template
// Copyright 2007, 2008 Cloudburst, LLC. Licensed under the AFL 3. See the included LICENSE file.

var href_base = '../../../.././rdoc-style.css'.replace(/(.*\/).*/, '$1'); // inline js is good for something  

function $(id) {
    if (document.getElementById)
      elem = document.getElementById(id);
    else if ( document.all )
      elem = eval("document.all." + id);
    else
      return false;
    return elem;
}

  function toggle(id) {
    elem = $(id);
    elemStyle = elem.style;   
    if (elemStyle.display == "block") {
      elemStyle.display = "none"
    } else {
      elemStyle.display = "block"
    }
    return true;
  }

  function toggleText(id) {
    elem = $(id)
    if (m = elem.innerHTML.match(/(Hide)(.*)/)) {
      elem.innerHTML = "Show" + m[2];
    } else if (m = elem.innerHTML.match(/(Show)(.*)/)) {
      elem.innerHTML = "Hide" + m[2];
    }
    return true;
  }

function span(s, klass) {
  return '<span class="' + klass + '">' + s + '</span>';
}
  
function highlightSymbols() {
  pres = document.getElementsByTagName('pre');
  for(var i = 0; i < pres.length; i++) {
    pre = pres[i];
    spans = pre.getElementsByTagName('span');
    for(var k = 0; k < spans.length; k++) {
      span = spans[k];
      if (span.className.match(/ruby-identifier/)) {
        if (span.innerHTML.match(/^:/)) {
          span.className += " ruby-symbol";
        }
      }
    }
  }
}

 function hasClass(obj) {
     var result = false;
     if (obj.getAttributeNode("class") != null) {
         result = obj.getAttributeNode("class").value;
     }
     return result;
  }   

 function stripe() {
    var even = true;
    var color = "#e4ebed";
    var tables = document.getElementsByTagName('table');
    if (tables.length == 0) { return; }
    for (var h = 0; h < tables.length; h++) {
        var trs = tables[h].getElementsByTagName("tr");
        for (var i = 0; i < trs.length; i++) {
          var tds = trs[i].getElementsByTagName("td");
            for (var j = 0; j < tds.length; j++) {       
              if (hasClass(tds[j]) != "first") {                
              var mytd = tds[j];
              if (even) {
                mytd.style.backgroundColor = color;
              }         
            }
          }
          even =  ! even;
      }
    }
  }
  
function ajaxGet(url) {
  url = (href_base + url).replace('/./', '/')
  var req = false;

  if (window.ActiveXObject) {
    try {
      // stupid hack because IE7 disables local Ajax with the native xmlhttprequest object
      // for security purposes. Yet ActiveX still works. Thanks, Microsoft. I hate you. Die.
      req = new ActiveXObject("MSXML2.XMLHTTP.3.0");
    } catch (e) {
      try {
        /* IE 6 and maybe 5, don't know, don't care */
        req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          req = false;
        }
      }
    }
  }
    
  /* real browsers */
  if (!req && window.XMLHttpRequest) {
    try {
      req = new XMLHttpRequest();
    } catch (e) {
      req = false;
    }
  } 
  
  if (req) {
    req.open('GET', url, false);
    req.send(null);
    return req.responseText;
  } else {
    return "Ajax error";  
  }
}


function addEvent(elm, evType, fn, useCapture) {
	if (elm.addEventListener) {
	  elm.addEventListener(evType, fn, useCapture);  
  	return true;
	} else if (elm.attachEvent) {
  	var r = elm.attachEvent('on' + evType, fn);  
	  return r;  
	} else {
  	elm['on' + evType] = fn;
	}
}

function insertIndices() {
  pages = ["class", "file", "method"]
  for (x in pages) { 
    $(pages[x]).innerHTML += ajaxGet('fr_' + pages[x] + '_index.html').replace(/(href=")/g, '$1' + href_base);
  }
  /* mouseoverify method links */
  links = $('method').getElementsByTagName('a');
  for (var x = 0; x < links.length; x++) {
    if (m = links[x].innerHTML.match(/(.*)\s\((.*)\)/)) {
      links[x].innerHTML = m[1] + '<br>';
      links[x].title = m[2];
    }
  }
  /* this is stupid */
  $('class').style.display = "block";
  $('file').style.display = "block";
  
  /* has to be here because IE7 does not guarantee the onLoad callback order */
  abbreviateIndicesInner(["class", "file"], 25, "a");
  /* same, linkTitle() depends on the class link list */
  linkTitle();
}

function abbreviateIndices() {
  var ids = ["defined_in", "child_of", "includes", "requires", "method", "methods"];
  abbreviateIndicesInner(ids, 25, 'a');
  abbreviateIndicesInner(ids, 25, 'span');
}

function abbreviateIndicesInner(indices, amount, tag) {
  for (var x = 0; x < indices.length; x++) { 
    var the_index = $(indices[x]);
    if (the_index) {
      links = the_index.getElementsByTagName(tag);
      for (var y = 0; y < links.length; y++) {
        var link = links[y];
        if (link.getElementsByTagName('span').length == 0 && link.getElementsByTagName('a').length == 0) {
          // avoid nesting
          link.innerHTML = link.innerHTML.replace(/<br>|\n/gi, '');
          link.title = link.innerHTML;
          link.innerHTML = abbreviate(link.innerHTML, amount) + '<br>';
        }
      }
    }
  }
}

function linkTitle() {
  
  /* grab the correct title element from the index */
  var index_page = ajaxGet('index.html');
  title_text = index_page.match(/<title>(.*)<\/title>/m)[1];
  document.title = title_text + " - " + document.title;
  var p = $('header').getElementsByTagName('p')[0]
  if (p.innerHTML.match(/^\s*$/)) {
    p.innerHTML = title_text;
  } else {
    p.innerHTML = title_text + ": " + p.innerHTML;
  }
  
  /* set the link properly */
  title_link = index_page.match(/<a\s+href="(.*?)"/)[1];
  var element = $('title');
  var item_type = "";
  var item_name = "";
  if (m = element.innerHTML.match(/(Class:|Module:|File:)\s*(.*)/)) {
    item_type = m[1];
    item_name = m[2];
  } else {
    item_name = element.innerHTML;
  }
  element.innerHTML = '<a href="' + href_base + title_link + '">' + item_type + " " + abbreviate(item_name, 45) + '</a>';
  element.getElementsByTagName('a')[0].title = item_name
  
  /* breadcrumb navigation */
  items = item_name.split("::");
  items_new = item_name.split("::");
  file_links = $('class').getElementsByTagName('a');
  for (var x = 0; x < items.length - 1; x++ ){
    var item = items[x];
    link = ("/classes/" + items.slice(0,x).join("/") + "/" + item + ".html").replace('//', '/');
    regex = new RegExp(RegExp.escape(link) + '$');
    for (var y = 0; y < file_links.length; y++) {
      if (file_links[y].href.match(regex)) {
         items_new[x] = '<a href="' + href_base + link + '">' + item + '</a>';
         break;
      }
    }  
  }
  $('item_name').innerHTML = item_type + ' ' + items_new.join(" :: ");
}

function abbreviate(s, size) {
  while (s.length > size) {
    var old_s = s;
    s = s.replace(/\s|\n/mg, '');
    s = s.replace(/([A-Z])[a-z]+/m, '$1');
    if (!s || old_s == s) {
      return "..." + s.substring(s.length - size, s.length);
    }
  }
  return s;
}

function disableSubmit(event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  if (keyCode == 13) {
    return false;
  } else {
    return true;
  }
}
  
function filterList(id, s, event) {
  
  /* some weak escaping */
  s = s.replace(/[^\w\d\.\_\-\/\:\=\[\]\?\!]/g, '');
  s = RegExp.escape(s);
  
  var show_all = false;
  if (s.match(/^\s*$/)) {
    show_all = true;
  }
  
  links = $(id).getElementsByTagName('a')
  regex = new RegExp(s, 'i');
  
  for (var x = 0; x < links.length; x++) {
    var link = links[x];
    if (show_all) {
      link.style.display = 'inline';
    } else {
       if (link.innerHTML.match(regex)) {        
         link.style.display = 'inline';
       } else {
         link.style.display = 'none';
       }
    }
  }
  return true;
}

RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

function hacks() {
  // show the spacer if necessary, 
  divs = document.getElementsByTagName('div');
  for(var x = 0; x < divs.length; x++) {
    if (divs[x].className && divs[x].className.match(/top/)) {
      document.getElementById('spacer').style.display = 'block';
    }
  }
  // remove extra colons from tables
  tds = document.getElementsByTagName('td');
  for(var x = 0; x < tds.length; x++) {
    str = tds[x].innerHTML
    if (str.charAt(str.length - 1) == ":") {
      tds[x].innerHTML = str.slice(0, str.length - 1)
    }
  }
}

addEvent(window, 'load', insertIndices, false);
addEvent(window, 'load', abbreviateIndices, false);
addEvent(window, 'load', stripe, false);
addEvent(window, 'load', highlightSymbols, false);
addEvent(window, 'load', hacks, false);
</script></head><body><div id="container"><div class="curve" id="preheader_curve_0"></div><div class="curve" id="preheader_curve_1"></div><div class="curve" id="preheader_curve_2"></div><div class="curve" id="preheader_curve_3"></div><div class="curve" id="preheader_curve_4"></div><div class="curve" id="preheader_curve_5"></div><div id="header"><p>
vendor/rails/activeresource/README
</p><span><h1 id="title">
File: README
</h1></span>
</div><div class="clear"></div><div id="left">




<div id="spacer"></div><div class="navigation darker index" id="class_wrapper"><div class="list_header"><h3>All classes</h3></div><div class="list_header_link"><a onclick="toggle('class'); toggleText('class_link'); return false;" href="#" id="class_link">Hide...</a></div><div class="clear"></div><div id="class"><form><label for="filter_class">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('class', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_class"></input></form></div></div><div class="navigation darker index" id="file_wrapper"><div class="list_header"><h3>All files</h3></div><div class="list_header_link"><a onclick="toggle('file'); toggleText('file_link'); return false;" href="#" id="file_link">Hide...</a></div><div class="clear"></div><div id="file"><form><label for="filter_file">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('file', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_file"></input></form></div></div><div class="navigation darker index" id="method_wrapper"><div class="list_header"><h3>All methods</h3></div><div class="list_header_link"><a onclick="toggle('method'); toggleText('method_link'); return false;" href="#" id="method_link">Show...</a></div><div class="clear"></div><div id="method"><form><label for="filter_method">Filter:&nbsp;&nbsp;</label><input type="text" onKeyUp="return filterList('method', this.value, event);" onKeyPress="return disableSubmit(event);" id="filter_method"></input></form></div></div></div><div id="content">
<h1 id="item_name">File: README</h1>

<div id="description"><h1>Active Resource</h1>
<p>
Active Resource (ARes) connects business objects and Representational State
Transfer (REST) web services. It implements object-relational mapping for
REST webservices to provide transparent proxying capabilities between a
client (<a
href="../../../../classes/ActiveResource.html">ActiveResource</a>) and a
RESTful service (which is provided by Simply RESTful routing in <a
href="../../../../classes/ActionController/Resources.html">ActionController::Resources</a>).
</p>
<h2>Philosophy</h2>
<p>
Active Resource attempts to provide a coherent wrapper object-relational
mapping for REST web services. It follows the same philosophy as Active
Record, in that one of its prime aims is to reduce the amount of code
needed to map to these resources. This is made possible by relying on a
number of code- and protocol-based conventions that make it easy for Active
Resource to infer complex relations and structures. These conventions are
outlined in detail in the documentation for <a
href="../../../../classes/ActiveResource/Base.html">ActiveResource::Base</a>.
</p>
<h2>Overview</h2>
<p>
Model classes are mapped to remote REST resources by Active Resource much
the same way Active Record maps model classes to database tables. When a
request is made to a remote resource, a REST XML request is generated,
transmitted, and the result received and serialized into a usable Ruby
object.
</p>
<h3>Configuration and Usage</h3>
<p>
Putting <a
href="../../../../classes/ActiveResource.html">ActiveResource</a> to use is
very similar to ActiveRecord. It&#8216;s as simple as creating a model
class that inherits from <a
href="../../../../classes/ActiveResource/Base.html">ActiveResource::Base</a>
and providing a <tt>site</tt> class variable to it:
</p>
<pre>
   class Person &lt; ActiveResource::Base
     self.site = &quot;http://api.people.com:3000/&quot;
   end
</pre>
<p>
Now the Person class is REST enabled and can invoke REST services very
similarly to how ActiveRecord invokes lifecycle methods that operate
against a persistent store.
</p>
<pre>
   # Find a person with id = 1
   ryan = Person.find(1)
   Person.exists?(1)  #=&gt; true
</pre>
<p>
As you can see, the methods are quite similar to Active Record&#8216;s
methods for dealing with database records. But rather than dealing with
</p>
<h4>Protocol</h4>
<p>
Active Resource is built on a standard XML format for requesting and
submitting resources over HTTP. It mirrors the RESTful routing built into
ActionController but will also work with any other REST service that
properly implements the protocol. REST uses HTTP, but unlike
&quot;typical&quot; web applications, it makes use of all the verbs
available in the HTTP specification:
</p>
<ul>
<li>GET requests are used for finding and retrieving resources.

</li>
<li>POST requests are used to create new resources.

</li>
<li>PUT requests are used to update existing resources.

</li>
<li>DELETE requests are used to delete resources.

</li>
</ul>
<p>
For more information on how this protocol works with Active Resource, see
the <a
href="../../../../classes/ActiveResource/Base.html">ActiveResource::Base</a>
documentation; for more general information on REST web services, see the
article <a
href="http://en.wikipedia.org/wiki/Representational_State_Transfer">here</a>.
</p>
<h4>Find</h4>
<p>
GET Http requests expect the XML form of whatever resource/resources is/are
being requested. So, for a request for a single element - the XML of that
item is expected in response:
</p>
<pre>
   # Expects a response of
   #
   # &lt;person&gt;&lt;id type=&quot;integer&quot;&gt;1&lt;/id&gt;&lt;attribute1&gt;value1&lt;/attribute1&gt;&lt;attribute2&gt;..&lt;/attribute2&gt;&lt;/person&gt;
   #
   # for GET http://api.people.com:3000/people/1.xml
   #
   ryan = Person.find(1)
</pre>
<p>
The XML document that is received is used to build a new object of type
Person, with each XML element becoming an attribute on the object.
</p>
<pre>
   ryan.is_a? Person  #=&gt; true
   ryan.attribute1  #=&gt; 'value1'
</pre>
<p>
Any complex element (one that contains other elements) becomes its own
object:
</p>
<pre>
   # With this response:
   #
   # &lt;person&gt;&lt;id&gt;1&lt;/id&gt;&lt;attribute1&gt;value1&lt;/attribute1&gt;&lt;complex&gt;&lt;attribute2&gt;value2&lt;/attribute2&gt;&lt;/complex&gt;&lt;/person&gt;
   #
   # for GET http://api.people.com:3000/people/1.xml
   #
   ryan = Person.find(1)
   ryan.complex  #=&gt; &lt;Person::Complex::xxxxx&gt;
   ryan.complex.attribute2  #=&gt; 'value2'
</pre>
<p>
Collections can also be requested in a similar fashion
</p>
<pre>
   # Expects a response of
   #
   # &lt;people type=&quot;array&quot;&gt;
   #  &lt;person&gt;&lt;id type=&quot;integer&quot;&gt;1&lt;/id&gt;&lt;first&gt;Ryan&lt;/first&gt;&lt;/person&gt;
   #  &lt;person&gt;&lt;id type=&quot;integer&quot;&gt;2&lt;/id&gt;&lt;first&gt;Jim&lt;/first&gt;&lt;/person&gt;
   # &lt;/people&gt;
   #
   # for GET http://api.people.com:3000/people.xml
   #
   people = Person.find(:all)
   people.first  #=&gt; &lt;Person::xxx 'first' =&gt; 'Ryan' ...&gt;
   people.last  #=&gt; &lt;Person::xxx 'first' =&gt; 'Jim' ...&gt;
</pre>
<h4>Create</h4>
<p>
Creating a new resource submits the xml form of the resource as the body of
the request and expects a &#8216;Location&#8217; header in the response
with the RESTful URL location of the newly created resource. The id of the
newly created resource is parsed out of the Location response header and
automatically set as the id of the ARes object.
</p>
<pre>
  # &lt;person&gt;&lt;first&gt;Ryan&lt;/first&gt;&lt;/person&gt;
  #
  # is submitted as the body on
  #
  # POST http://api.people.com:3000/people.xml
  #
  # when save is called on a new Person object.  An empty response is
  # is expected with a 'Location' header value:
  #
  # Response (201): Location: http://api.people.com:3000/people/2
  #
  ryan = Person.new(:first =&gt; 'Ryan')
  ryan.new?  #=&gt; true
  ryan.save  #=&gt; true
  ryan.new?  #=&gt; false
  ryan.id    #=&gt; 2
</pre>
<h4>Update</h4>
<p>
&#8216;save&#8217; is also used to update an existing resource - and
follows the same protocol as creating a resource with the exception that no
response headers are needed - just an empty response when the update on the
server side was successful.
</p>
<pre>
  # &lt;person&gt;&lt;first&gt;Ryan&lt;/first&gt;&lt;/person&gt;
  #
  # is submitted as the body on
  #
  # PUT http://api.people.com:3000/people/1.xml
  #
  # when save is called on an existing Person object.  An empty response is
  # is expected with code (204)
  #
  ryan = Person.find(1)
  ryan.first #=&gt; 'Ryan'
  ryan.first = 'Rizzle'
  ryan.save  #=&gt; true
</pre>
<h4>Delete</h4>
<p>
Destruction of a resource can be invoked as a class and instance method of
the resource.
</p>
<pre>
  # A request is made to
  #
  # DELETE http://api.people.com:3000/people/1.xml
  #
  # for both of these forms.  An empty response with
  # is expected with response code (200)
  #
  ryan = Person.find(1)
  ryan.destroy  #=&gt; true
  ryan.exists?  #=&gt; false
  Person.delete(2)  #=&gt; true
  Person.exists?(2) #=&gt; false
</pre>
<p>
You can find more usage information in the <a
href="../../../../classes/ActiveResource/Base.html">ActiveResource::Base</a>
documentation.
</p>
</div>




<p></p>







</div><div class="clear" id="footer">Generated on Jan 21, 2008 / Allison 2 &copy; 2007 <a href="http://cloudbur.st">Cloudburst, LLC</a></div></div></body></html>